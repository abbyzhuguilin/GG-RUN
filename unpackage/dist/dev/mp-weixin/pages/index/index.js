(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/index/index"],{

/***/ 23:
/*!**********************************************************************!*\
  !*** E:/web-project/errand/main.js?{"page":"pages%2Findex%2Findex"} ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {__webpack_require__(/*! uni-pages */ 4);__webpack_require__(/*! @dcloudio/uni-stat */ 5);
var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));
var _index = _interopRequireDefault(__webpack_require__(/*! ./pages/index/index.nvue */ 24));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}
createPage(_index.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["createPage"]))

/***/ }),

/***/ 24:
/*!****************************************************!*\
  !*** E:/web-project/errand/pages/index/index.nvue ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.nvue?vue&type=template&id=4e3ea066&scoped=true& */ 25);
/* harmony import */ var _index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.nvue?vue&type=script&lang=js& */ 27);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.nvue?vue&type=style&index=0&lang=css& */ 33);
/* harmony import */ var _index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.nvue?vue&type=style&index=1&id=4e3ea066&scoped=true&lang=css& */ 35);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 17);

var renderjs






/* normalize component */

var component = Object(_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__["default"])(
  _index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "4e3ea066",
  null,
  false,
  _index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "E:/web-project/errand/pages/index/index.nvue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 25:
/*!***********************************************************************************************!*\
  !*** E:/web-project/errand/pages/index/index.nvue?vue&type=template&id=4e3ea066&scoped=true& ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=template&id=4e3ea066&scoped=true& */ 26);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_template_id_4e3ea066_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 26:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web-project/errand/pages/index/index.nvue?vue&type=template&id=4e3ea066&scoped=true& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components = {
  "simple-address": function() {
    return Promise.all(/*! import() | components/simple-address/simple-address */[__webpack_require__.e("common/vendor"), __webpack_require__.e("components/simple-address/simple-address")]).then(__webpack_require__.bind(null, /*! @/components/simple-address/simple-address.nvue */ 410))
  }
}
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 27:
/*!*****************************************************************************!*\
  !*** E:/web-project/errand/pages/index/index.nvue?vue&type=script&lang=js& ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=script&lang=js& */ 28);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_360_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 28:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web-project/errand/pages/index/index.nvue?vue&type=script&lang=js& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _regenerator = _interopRequireDefault(__webpack_require__(/*! ./node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/regenerator */ 29));




















































































































































































var _index = _interopRequireDefault(__webpack_require__(/*! ../../config/index.js */ 13));
var _permission = _interopRequireDefault(__webpack_require__(/*! @/js_sdk/wa-permission/permission.js */ 32));

var _dayjs = _interopRequireDefault(__webpack_require__(/*! dayjs */ 20));
var _relativeTime = _interopRequireDefault(__webpack_require__(/*! dayjs/plugin/relativeTime */ 21));
__webpack_require__(/*! dayjs/locale/zh-cn */ 22);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {try {var info = gen[key](arg);var value = info.value;} catch (error) {reject(error);return;}if (info.done) {resolve(value);} else {Promise.resolve(value).then(_next, _throw);}}function _asyncToGenerator(fn) {return function () {var self = this,args = arguments;return new Promise(function (resolve, reject) {var gen = fn.apply(self, args);function _next(value) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);}function _throw(err) {asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);}_next(undefined);});};}var simpleAddress = function simpleAddress() {Promise.all(/*! require.ensure | components/simple-address/simple-address */[__webpack_require__.e("common/vendor"), __webpack_require__.e("components/simple-address/simple-address")]).then((function () {return resolve(__webpack_require__(/*! @/components/simple-address/simple-address.nvue */ 410));}).bind(null, __webpack_require__)).catch(__webpack_require__.oe);}; // 引入中文
_dayjs.default.locale('zh-cn'); // 引入中文
_dayjs.default.extend(_relativeTime.default);var _default =
{
  data: function data() {
    return {
      statusHeight: 0,
      mapheight: 0,
      mapwidth: 0,

      latitude: 0,
      longitude: 0,

      covers: [
      {
        id: 1,
        latitude: 0,
        longitude: 0,
        iconPath: '/static/img/index/dingweione.png',
        width: 20,
        height: 30,
        callout: {
          content: '',
          color: '#09023E',
          fontSize: 12,
          bgColor: 'white',
          display: 'ALWAYS',
          borderRadius: 0,
          padding: 0 } }],



      polyline: [],


      points: [],
      //储存地址
      city: '',
      area: '',
      editAddress: {
        longitude: 0,
        name: '',
        latitude: 0,
        address: '' },

      //防抖处理
      timerId: '',
      //
      headerCity: '宁波市',
      routeFlag: true,
      msgInfo: {},
      //安卓或ios
      platform: '',
      newsReaderFlag: 0,
      //禁用宁波市以外
      disabledFlag: false,
      cityPickerValueDefault: [10, 1, 0],
      //
      mapContext: {},
      //首页改动后数据
      choiceCar: 0,
      ftScroll: ['帮我送', '帮我取', '帮我买'],
      ftScrollCar: ['帮我送', '帮我取'],
      ftItemIndex: 0,
      ftSendAddress: {},
      endAddress: {
        name: '',
        address: '',
        editAddress: {} },

      sendAddress: {
        editAddress: '' },

      // 距离
      distance: 0,
      timer: 0,
      showTimer: 0,
      mapShow: true,
      distanceTipFlag: true,
      nheaderFlag: false,
      //用户起始 终点的姓名号码
      userStartUserName: '',
      userStartUserPhone: '',
      userEndUserName: '',
      userEndUserPhone: '',
      // 骑手个数
      horseManTotal: 0,
      // 是否开通标识 0允许
      openFlag: 1,
      // 地区编码
      adcode: 0 };

  },
  components: {
    simpleAddress: simpleAddress },

  onHide: function onHide() {
    // this.endAddress = {}
    // this.polyline = []

  },
  created: function created() {
    this.choiceCar = 0;
  },
  onLoad: function onLoad() {var _this = this;

    // 解决头部图标可能出不来
    setTimeout(function () {
      _this.nheaderFlag = true;
    }, 1000);
    this.choiceCar = 0;
    // console.log(this.choiceCar)
    //判断手机 设置地图高度
    var data = uni.getSystemInfoSync();
    this.platform = data.platform;
    this.statusHeight = data.statusBarHeight;

    // this.mapwidth = data.windowWidth * 2;
    // if (data.brand === 'Xiaomi') {
    // 	this.mapheight = data.safeArea.height * 2 - 112;
    // } else if (this.platform == 'ios') {
    // 	this.mapheight = data.safeArea.height * 2;
    // } else {
    // 	this.mapheight = data.windowHeight * 2 - 112 + (data.statusBarHeight * 2 + 10);
    // }
    this.mapheight = data.windowHeight * 2 - data.windowHeight * 0.2;

    this.headerCity = '宁波市';
    //获取当前用户位置
    this.getLocation();
    //获取默认地址
    this.initAddress();
    //查看是否有消息未读
    this.initMsgReader();
    setTimeout(function () {
      _this.getLocation();
    }, 1500);
  },
  onShow: function onShow() {
    this.distance = 0;
    uni.setStorageSync('loginFlag', 1);
    this.routeFlag = true;
    this.initMsgReader();

    if (this.platform == 'ios') {
      this.initIosPosition();
    } else {
      this.initPosition();
    }


    if (uni.getStorageSync('endAddress')) {

      this.endAddress = JSON.parse(uni.getStorageSync('endAddress'));
      // console.log(this.endAddress)
      this.userEndUserName = this.endAddress.name;
      this.userEndUserPhone = this.endAddress.mobile;
      // this.covers = []
      // this.covers = [...this.covers]
      // this.$set(this.covers,0,[])



      // this.covers = [
      // 	{
      // 		id: 1,
      // 		latitude: this.latitude,
      // 		longitude: this.longitude,
      // 		iconPath: '/static/img/index/dingweione.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	},
      // 	{
      // 		latitude: this.endAddress.editAddress.latitude,
      // 		longitude: this.endAddress.editAddress.longitude,
      // 		iconPath: '/static/img/index/dingweitwo.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '计算距离中....',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	}
      // ];

      this.plusReady();


    }
    if (uni.getStorageSync('sendAddress')) {
      this.sendAddress = JSON.parse(uni.getStorageSync('sendAddress'));
      // console.log(this.sendAddress)
      this.userStartUserName = this.sendAddress.name;
      this.userStartUserPhone = this.sendAddress.mobile;
      this.ftSendAddress = {};
      this.ftSendAddress.titleName = this.sendAddress.editAddress.name;
      this.ftSendAddress.addressname = this.sendAddress.editAddress.address;



      this.handleMap(this.sendAddress.editAddress.latitude, this.sendAddress.editAddress.longitude);



      if (uni.getStorageSync('endAddress')) {

        // this.covers = []
        // this.covers = [...this.covers]
        // this.$set(this.covers,0,[])

        // this.covers = [
        // 	{
        // 		id: 1,
        // 		latitude: this.latitude,
        // 		longitude: this.longitude,
        // 		iconPath: '/static/img/index/dingweione.png',
        // 		width: 20,
        // 		height: 30,
        // 		callout: {
        // 			content: '',
        // 			color: '#09023E',
        // 			fontSize: 12,
        // 			bgColor: 'white',
        // 			display: 'ALWAYS',
        // 			borderRadius: 0,
        // 			padding: 10
        // 		} 
        // 	},
        // 	{
        // 		latitude: this.endAddress.editAddress.latitude,
        // 		longitude: this.endAddress.editAddress.longitude,
        // 		iconPath: '/static/img/index/dingweitwo.png',
        // 		width: 20,
        // 		height: 30,
        // 		callout: {
        // 			content: '计算距离中....',
        // 			color: '#09023E',
        // 			fontSize: 12,
        // 			bgColor: 'white',
        // 			display: 'ALWAYS',
        // 			borderRadius: 0,
        // 			padding: 10
        // 		}
        // 	}
        // ];
        this.plusReady();

      }




    }
    if (this.distance) {
      console.log(this.distance);
      this.covers = [
      {
        id: 1,
        latitude: this.latitude,
        longitude: this.longitude,
        iconPath: '/static/img/index/dingweione.png',
        width: 20,
        height: 30,
        callout: {
          content: '起始位置',
          color: '#09023E',
          fontSize: 12,
          bgColor: 'white',
          display: 'ALWAYS',
          borderRadius: 0,
          padding: 10 } },


      {
        latitude: this.endAddress.editAddress.latitude,
        longitude: this.endAddress.editAddress.longitude,
        iconPath: '/static/img/index/dingweitwo.png',
        width: 20,
        height: 30,
        callout: {
          content: this.distance + '公里,预计' + this.showTimer + '前送达',
          color: '#09023E',
          fontSize: 12,
          bgColor: 'white',
          display: 'ALWAYS',
          borderRadius: 0,
          padding: 10 } }];



    }

  },
  onTabItemTap: function onTabItemTap(e) {var _this2 = this;
    // 刷新地图
    // if (this.platform == 'ios') {
    // 	this.mapShow = false
    // 	setTimeout(() => {
    // 		this.mapShow = true
    // 	},600)
    // }

    // if (uni.getStorageSync('sendAddress')) {
    // 	uni.removeStorageSync('sendAddress')
    // }

    this.userEndUserName = "";
    this.userEndUserPhone = "";
    // this.mapShow = false
    this.endAddress.editAddress.name = "";
    this.endAddress.editAddress.address = "";
    this.endAddress = {
      name: '',
      address: '',
      editAddress: {} };

    uni.removeStorageSync('endAddress');
    this.distance = 0;
    // 
    // this.covers = [
    // 	{
    // 		id: 1,
    // 		latitude: this.latitude,
    // 		longitude: this.longitude,
    // 		iconPath: '/static/img/index/dingweione.png',
    // 		width: 20,
    // 		height: 30,
    // 		callout: {
    // 			content: '起始位置',
    // 			color: '#09023E',
    // 			fontSize: 12,
    // 			bgColor: 'white',
    // 			display: 'ALWAYS',
    // 			borderRadius: 0,
    // 			padding: 10
    // 		}
    // 	}
    // ];
    this.setRefreshMarkTitle();
    this.polyline = [
    {
      points: [],
      color: '#0091ff',
      width: 0 }];




    setTimeout(function () {
      // this.covers = [
      // 	{
      // 		id: 1,
      // 		latitude: this.latitude,
      // 		longitude: this.longitude,
      // 		iconPath: '/static/img/index/dingweione.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '起始位置',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	}
      // ];
      _this2.setRefreshMarkTitle();
      _this2.polyline = [
      {
        points: [],
        color: '#0091ff',
        width: 0 }];



    }, 200);
    setTimeout(function () {
      // this.covers = [
      // 	{
      // 		id: 1,
      // 		latitude: this.latitude,
      // 		longitude: this.longitude,
      // 		iconPath: '/static/img/index/dingweione.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '起始位置',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	}
      // ];
      _this2.setRefreshMarkTitle();
      _this2.polyline = [
      {
        points: [],
        color: '#0091ff',
        width: 0 }];



    }, 400);
    setTimeout(function () {
      // this.covers = [
      // 	{
      // 		id: 1,
      // 		latitude: this.latitude,
      // 		longitude: this.longitude,
      // 		iconPath: '/static/img/index/dingweione.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '起始位置',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	}
      // ];
      _this2.setRefreshMarkTitle();
      _this2.polyline = [
      {
        points: [],
        color: '#0091ff',
        width: 0 }];



    }, 800);
    setTimeout(function () {
      // this.covers = [
      // 	{
      // 		id: 1,
      // 		latitude: this.latitude,
      // 		longitude: this.longitude,
      // 		iconPath: '/static/img/index/dingweione.png',
      // 		width: 20,
      // 		height: 30,
      // 		callout: {
      // 			content: '起始位置',
      // 			color: '#09023E',
      // 			fontSize: 12,
      // 			bgColor: 'white',
      // 			display: 'ALWAYS',
      // 			borderRadius: 0,
      // 			padding: 10
      // 		}
      // 	}
      // ];
      _this2.setRefreshMarkTitle();
      _this2.polyline = [
      {
        points: [],
        color: '#0091ff',
        width: 0 }];



    }, 1000);

  },
  methods: {
    //显示picker
    openAddres: function openAddres() {
      this.$refs.simpleAddress.open();
    },
    setRefreshMarkTitle: function setRefreshMarkTitle() {
      if (this.horseManTotal <= 0) {
        this.covers = [
        {
          id: 1,
          latitude: this.latitude,
          longitude: this.longitude,
          iconPath: '/static/img/index/dingweione.png',
          width: 20,
          height: 30,
          callout: {
            content: '附近暂无骑手,请稍等',
            color: '#09023E',
            fontSize: 12,
            bgColor: 'white',
            display: 'ALWAYS',
            borderRadius: 0,
            padding: 10 } }];



        if (this.platform == 'ios') {
          this.covers = [
          {
            id: 1,
            latitude: this.latitude,
            longitude: this.longitude,
            iconPath: '/static/img/index/dingweione.png',
            width: 20,
            height: 30,
            callout: {
              content: '附近暂无骑手,请稍等',
              color: '#09023E',
              fontSize: 12,
              bgColor: 'white',
              display: 'ALWAYS',
              borderRadius: 0,
              padding: 10 } }];



        }
      }

      if (this.horseManTotal <= 2 && this.horseManTotal > 0) {
        this.covers = [
        {
          id: 1,
          latitude: this.latitude,
          longitude: this.longitude,
          iconPath: '/static/img/index/dingweione.png',
          width: 20,
          height: 30,
          callout: {
            content: '附近有' + 3 + '位骑手,预计3分钟内接单',
            color: '#09023E',
            fontSize: 12,
            bgColor: 'white',
            display: 'ALWAYS',
            borderRadius: 0,
            padding: 10 } }];



        if (this.platform == 'ios') {
          this.covers = [
          {
            id: 1,
            latitude: this.latitude,
            longitude: this.longitude,
            iconPath: '/static/img/index/dingweione.png',
            width: 20,
            height: 30,
            callout: {
              content: '附近有' + 3 + '位骑手,预计3分钟内接单',
              color: '#09023E',
              fontSize: 12,
              bgColor: 'white',
              display: 'ALWAYS',
              borderRadius: 0,
              padding: 10 } }];



        }
      } else if (this.horseManTotal >= 3) {
        this.covers = [
        {
          id: 1,
          latitude: this.latitude,
          longitude: this.longitude,
          iconPath: '/static/img/index/dingweione.png',
          width: 20,
          height: 30,
          callout: {
            content: '附近有' + this.horseManTotal + '位骑手,预计3分钟内接单',
            color: '#09023E',
            fontSize: 12,
            bgColor: 'white',
            display: 'ALWAYS',
            borderRadius: 0,
            padding: 10 } }];



        if (this.platform == 'ios') {
          this.covers = [
          {
            id: 1,
            latitude: this.latitude,
            longitude: this.longitude,
            iconPath: '/static/img/index/dingweione.png',
            width: 20,
            height: 30,
            callout: {
              content: '附近有' + this.horseManTotal + '位骑手,预计3分钟内接单',
              color: '#09023E',
              fontSize: 12,
              bgColor: 'white',
              display: 'ALWAYS',
              borderRadius: 0,
              padding: 10 } }];



        }
      }
    },

    //切换城市
    onConfirm: function onConfirm(e) {var _this3 = this;
      var choiceAddress = e.label.replace('-', '').replace('-', '');

      uni.request({
        url: 'https://restapi.amap.com/v3/geocode/geo?address=' + choiceAddress + '&output=JSON&key=6223011d1e55de8ee9d00617ee5270c2', //仅为示例，并非真实接口地址。
        success: function success(res) {

          _this3.headerCity = res.data.geocodes[0].city;

          _this3.latitude = res.data.geocodes[0].location.split(',')[1];
          _this3.longitude = res.data.geocodes[0].location.split(',')[0];
          _this3.getHorseman();

          if (res.data.geocodes[0].city !== '宁波市') {
            _this3.disabledFlag = true;
          }


          uni.request({
            url:
            'https://restapi.amap.com/v3/geocode/regeo?output=JSON&location=' +
            _this3.longitude +
            ',' +
            _this3.latitude +
            '&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all', //仅为示例，并非真实接口地址。
            success: function success(res) {

              var userPhone = uni.getStorageSync('user_phone');
              var userName = uni.getStorageSync('user_Name');
              var latitude = _this3.longitude + ',' + _this3.latitude;
              if (res.data.regeocode.aois.length != 0) {
                _this3.ftSendAddress = {};
                _this3.$set(_this3.ftSendAddress, 'titleName', res.data.regeocode.aois[0].name);
                _this3.$set(_this3.ftSendAddress, 'location', res.data.regeocode.aois[0].location);
                _this3.$set(_this3.ftSendAddress, 'addressname', res.data.regeocode.formatted_address);

                _this3.editAddress.name = res.data.regeocode.aois[0].name;
                _this3.editAddress.address = res.data.regeocode.formatted_address;
                _this3.editAddress.longitude = _this3.longitude;
                _this3.editAddress.latitude = _this3.latitude;

                _this3.province = res.data.regeocode.addressComponent.province;
                _this3.city = res.data.regeocode.addressComponent.city;
                _this3.area = res.data.regeocode.addressComponent.district;

                var sendAddress = {
                  addressDetail: '',
                  latitude: latitude,
                  mobile: _this3.userStartUserPhone,
                  name: _this3.userStartUserName,
                  province: _this3.province,
                  editAddress: _this3.editAddress,
                  city: _this3.city,
                  area: _this3.area,
                  orderId: '' };

                uni.setStorageSync('sendAddress', JSON.stringify(sendAddress));

              }
            } });

        } });


    },

    //安卓
    initPosition: function initPosition() {
      if (plus.os.name == 'Android') {
        var context = plus.android.importClass('android.content.Context');
        var locationManager = plus.android.importClass('android.location.LocationManager');
        var main = plus.android.runtimeMainActivity();
        var mainSvr = main.getSystemService(context.LOCATION_SERVICE);
        var gpsProvider = mainSvr.isProviderEnabled(locationManager.GPS_PROVIDER); //检查是否开启了GPS
        if (!gpsProvider) {
          var message = '为了获取您的精准位置，请开启GPS设备。';
          var title = 'GPS未启用';
          var alertCB = function alertCB() {
            var Intent = plus.android.importClass('android.content.Intent');
            var mIntent = new Intent('android.settings.LOCATION_SOURCE_SETTINGS');
            main.startActivity(mIntent); //打开GPS设置
          };
          plus.nativeUI.alert(message, alertCB, title);
        }
      }
    },
    //iosGPS
    initIosPosition: function initIosPosition() {
      var cllocationManger = plus.ios.import('CLLocationManager');
      var enable = cllocationManger.locationServicesEnabled();
      var status = cllocationManger.authorizationStatus();
      if (enable && status != 2) {
        // console.log("手机系统的定位已经打开且App已经获得定位权限");
      } else {
        uni.showModal({
          title: 'GPS定位服务',
          content: '为确保您的地址准确，请开启GPS服务系统',
          success: function success(res) {
            if (res.confirm) {
              _permission.default.gotoAppPermissionSetting();
              this.getLocation();
            } else if (res.cancel) {
              console.log('用户点击取消');
              this.getLocation();
            }
          } });

      }
      plus.ios.deleteObject(cllocationManger);
    },
    goToNews: function goToNews() {
      uni.navigateTo({
        url: '../news/news' });

    },

    //点击小图标复位
    restoration: function restoration() {var _this4 = this;
      this.mapShow = false;
      console.log(this.fwlongitude, this.fwlatitude);
      this.longitude = this.fwlongitude;
      this.latitude = this.fwlatitude;
      this.points = [];
      this.handleMap(this.fwlatitude, this.fwlongitude);
      setTimeout(function () {
        _this4.mapShow = true;
      }, 400);
    },

    //派送
    goToStorage: function goToStorage(index) {var _this5 = this;

      var token = uni.getStorageSync('token');
      if (!token) {
        uni.showToast({
          icon: 'none',
          title: '暂未登录' });

        setTimeout(function () {
          uni.navigateTo({
            url: '../enter/enter' });

        }, 1000);
        return;
      }

      console.log(this.headerCity);
      // if (this.headerCity != '宁波市') {
      // 	uni.showToast({
      // 		icon: 'none',
      // 		title: '该地区暂未开通服务，敬请期待'
      // 	});
      // 	return;
      // }

      // if (uni.getStorageSync('sendAddress') == false || uni.getStorageSync('endAddress') == false ) {
      if (uni.getStorageSync('endAddress') == '') {
        uni.showToast({
          icon: 'none',
          title: '请检查地址信息是否完善' });

        return;
      }
      if (this.ftSendAddress.titleName === '未获取到地址') {
        uni.showToast({
          icon: 'none',
          title: '请检查地址信息是否正确' });

        return;
      }


      if (this.ftItemIndex === 2) {
        uni.navigateTo({
          url: '../storage/storage?car=' + this.choiceCar + '&scrollIndex=' + this.ftItemIndex });

        return;
      }

      console.log(this.sendAddress);
      if (this.sendAddress.mobile.trim() == '' || this.sendAddress.name.trim() == '') {
        uni.showToast({
          icon: 'none',
          title: '请完善取货地址信息' });

        return;
      }

      //防抖处理
      this.timerId && clearTimeout(this.timerId);
      this.timerId = setTimeout(function () {

        if (uni.getStorageSync('user_phone')) {
          var userPhone = uni.getStorageSync('user_phone');
          var userName = uni.getStorageSync('user_Name');
          _this5.token = uni.getStorageSync('token');
          var latitude = _this5.longitude + ',' + _this5.latitude;
          uni.request({
            url:
            'https://restapi.amap.com/v3/geocode/regeo?output=JSON&location=' +
            _this5.longitude +
            ',' +
            _this5.latitude +
            '&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all', //仅为示例，并非真实接口地址。
            success: function success(res) {
              // console.log(res.data.regeocode.addressComponent.adcode.substring(0, 4))

              // if (res.data.regeocode.addressComponent.adcode.substring(0, 4) != '3302') {
              // 	return uni.showToast({
              // 		icon: 'none',
              // 		title: '该地区暂未开通服务，敬请期待'
              // 	})
              // }
              _this5.adcode = res.data.regeocode.addressComponent.adcode.substring(0, 4);

              uni.request({
                url: 'https://admin.gglaisong.com/token/order/test_adcode', //仅为示例，并非真实接口地址。
                data: {
                  adcode: _this5.adcode },

                method: "POST",
                header: {
                  'content-type': 'application/x-www-form-urlencoded',
                  'token': _this5.token },

                success: function success(resOpen) {
                  console.log(resOpen);
                  _this5.openFlag = resOpen.data.code;
                  if (_this5.openFlag != 0) {
                    return uni.showToast({
                      icon: 'none',
                      title: '该地区暂未开通服务，敬请期待' });

                  }
                  if (res.data.regeocode.aois.length == 0 && res.data.regeocode.pois.length == 0) {

                    _this5.editAddress.name = '';
                    _this5.editAddress.address = '';
                    _this5.editAddress.longitude = '';
                    _this5.editAddress.latitude = "";
                    latitude = '';

                    var sendAddress = {
                      addressDetail: '',
                      latitude: latitude,
                      mobile: _this5.userStartUserPhone,
                      name: _this5.userStartUserName,
                      province: _this5.province,
                      editAddress: _this5.editAddress,
                      city: _this5.city,
                      area: _this5.area,
                      orderId: '' };

                    // console.log(this.sendAddress)

                    if (!uni.getStorageSync('sendAddress')) {
                      uni.setStorageSync('sendAddress', JSON.stringify(sendAddress));
                    }
                    if (sendAddress != uni.getStorageSync('sendAddress')) {
                      uni.setStorageSync('sendAddress', JSON.stringify(sendAddress));
                    }

                    if (_this5.distanceTipFlag) {
                      if (_this5.distance > 10 && !_this5.choiceCar) {
                        uni.showModal({
                          title: '提示',
                          content: '您的下单距离已超过10公里，是否使用特殊派送',
                          success: function success(res) {
                            if (res.confirm) {
                              uni.navigateTo({
                                url: '../storage/storage?car=' + 1 + '&scrollIndex=' + _this5.ftItemIndex });

                            } else if (res.cancel) {
                              _this5.distanceTipFlag = true;
                              _this5.routeFlag = true;
                            }
                          } });

                      } else {
                        uni.navigateTo({
                          url: '../storage/storage?car=' + index + '&scrollIndex=' + _this5.ftItemIndex });

                      }
                      _this5.disabledFlag = false;
                    }

                  } else if (_this5.msgInfo == undefined && res.data.regeocode.aois.length) {
                    // console.log(res.data.regeocode)
                    _this5.editAddress.name = res.data.regeocode.aois[0].name;
                    _this5.editAddress.address = res.data.regeocode.formatted_address;
                    _this5.editAddress.longitude = _this5.longitude;
                    _this5.editAddress.latitude = _this5.latitude;

                    _this5.province = res.data.regeocode.addressComponent.province;
                    _this5.city = res.data.regeocode.addressComponent.city;
                    _this5.area = res.data.regeocode.addressComponent.district;


                    var _sendAddress = {
                      addressDetail: '',
                      latitude: latitude,
                      mobile: _this5.userStartUserPhone,
                      name: _this5.userStartUserName,
                      province: _this5.province,
                      editAddress: _this5.editAddress,
                      city: _this5.city,
                      area: _this5.area,
                      orderId: '' };


                    if (uni.getStorageSync('sendAddress')) {
                      _sendAddress = JSON.parse(uni.getStorageSync('sendAddress'));
                    }

                    if (!uni.getStorageSync('sendAddress')) {
                      uni.setStorageSync('sendAddress', JSON.stringify(_sendAddress));
                    }
                    if (_sendAddress != uni.getStorageSync('sendAddress')) {
                      uni.setStorageSync('sendAddress', JSON.stringify(_sendAddress));
                    }


                    if (_this5.routeFlag) {

                      _this5.routeFlag = false;
                      if (_this5.distanceTipFlag) {
                        if (_this5.distance > 10 && !_this5.choiceCar) {
                          uni.showModal({
                            title: '提示',
                            content: '您的下单距离已超过10公里，是否使用特殊派送',
                            success: function success(res) {
                              if (res.confirm) {
                                uni.navigateTo({
                                  url: '../storage/storage?car=' + 1 + '&scrollIndex=' + _this5.ftItemIndex });

                              } else if (res.cancel) {

                                _this5.distanceTipFlag = true;
                                _this5.routeFlag = true;
                              }
                            } });

                        } else {
                          uni.navigateTo({
                            url: '../storage/storage?car=' + index + '&scrollIndex=' + _this5.ftItemIndex });

                        }
                        _this5.disabledFlag = false;
                      }
                    }

                  } else {

                    if (_this5.routeFlag) {

                      _this5.routeFlag = false;

                      if (_this5.distanceTipFlag) {
                        if (_this5.distance > 10 && !_this5.choiceCar) {
                          uni.showModal({
                            title: '提示',
                            content: '您的下单距离已超过10公里，是否使用特殊派送',
                            success: function success(res) {
                              if (res.confirm) {
                                uni.navigateTo({
                                  url: '../storage/storage?car=' + 1 + '&scrollIndex=' + _this5.ftItemIndex });

                              } else if (res.cancel) {

                                _this5.distanceTipFlag = true;
                                _this5.routeFlag = true;
                              }
                            } });

                        } else {
                          uni.navigateTo({
                            url: '../storage/storage?car=' + index + '&scrollIndex=' + _this5.ftItemIndex });

                        }
                        _this5.disabledFlag = false;
                      }
                    }
                  }
                } });

              console.log(_this5.openFlag);



            } });

        }
      }, 200);
    },
    //默认地址
    initAddress: function initAddress() {var _this6 = this;
      var token = uni.getStorageSync('token');
      uni.request({
        url: _index.default + 'token/address/user_address_list', //仅为示例，并非真实接口地址。
        method: 'GET',
        header: {
          token: token,
          'content-type': 'application/x-www-form-urlencoded' },

        success: function success(res) {
          if (res.data.code === 0) {
            var msg = res.data.data.find(function (item) {return item.defaultFlag === 0;});

            _this6.msgInfo = msg;
          }
        } });

    },
    //获取位置
    getLocation: function getLocation() {var _this7 = this;
      // this.$nextTick(() =>{
      var that = this;
      var userPhone = uni.getStorageSync('user_phone');
      var userName = uni.getStorageSync('user_Name');
      var latitude = this.longitude + ',' + this.latitude;

      uni.getLocation({
        //获取当前的位置坐标
        type: 'gcj02',
        // geocode: true
        success: function success(res) {

          _this7.latitude = res.latitude;
          _this7.longitude = res.longitude;
          _this7.covers[0].latitude = res.latitude;
          _this7.covers[0].longitude = res.longitude;
          _this7.fwlatitude = res.latitude;
          _this7.fwlongitude = res.longitude;
          uni.request({
            url:
            'https://restapi.amap.com/v3/geocode/regeo?output=JSON&location=' +
            _this7.longitude +
            ',' +
            _this7.latitude +
            '&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all', //仅为示例，并非真实接口地址。
            success: function success(res) {


              _this7.headerCity = res.data.regeocode.addressComponent.city;
              // console.log(res.data)
              if (res.data.regeocode.aois.length != 0) {

                // this.ftSendAddress = {}
                // this.$set(this.ftSendAddress,'titleName',res.data.regeocode.aois[0].name)
                // this.$set(this.ftSendAddress,'location',res.data.regeocode.aois[0].location)
                // this.$set(this.ftSendAddress,'addressname',res.data.regeocode.formatted_address)

                _this7.editAddress.name = res.data.regeocode.aois[0].name;
                _this7.editAddress.address = res.data.regeocode.formatted_address;
                _this7.editAddress.longitude = _this7.longitude;
                _this7.editAddress.latitude = _this7.latitude;

                _this7.province = res.data.regeocode.addressComponent.province;
                _this7.city = res.data.regeocode.addressComponent.city;
                _this7.area = res.data.regeocode.addressComponent.district;

                // console.log('我改变了他6')		
                var sendAddress = {
                  addressDetail: '',
                  latitude: latitude,
                  mobile: _this7.userStartUserPhone,
                  name: _this7.userStartUserName,
                  province: _this7.province,
                  editAddress: _this7.editAddress,
                  city: _this7.city,
                  area: _this7.area,
                  orderId: '' };


                _this7.sendAddress = sendAddress;
                uni.setStorageSync('sendAddress', JSON.stringify(sendAddress));


              } else if (res.data.regeocode.pois.length != 0) {
                // this.ftSendAddress = {}
                // this.$set(this.ftSendAddress,'titleName',res.data.regeocode.pois[0].name)
                // this.$set(this.ftSendAddress,'location',res.data.regeocode.pois[0].location)
                // this.$set(this.ftSendAddress,'addressname',res.data.regeocode.formatted_address)

                _this7.editAddress.name = res.data.regeocode.pois[0].name;
                _this7.editAddress.address = res.data.regeocode.formatted_address;
                _this7.editAddress.longitude = _this7.longitude;
                _this7.editAddress.latitude = _this7.latitude;

                _this7.province = res.data.regeocode.addressComponent.province;
                _this7.city = res.data.regeocode.addressComponent.city;
                _this7.area = res.data.regeocode.addressComponent.district;


                var _sendAddress2 = {
                  addressDetail: '',
                  latitude: latitude,
                  mobile: _this7.userStartUserPhone,
                  name: _this7.userStartUserName,
                  province: _this7.province,
                  editAddress: _this7.editAddress,
                  city: _this7.city,
                  area: _this7.area,
                  orderId: '' };

                _this7.sendAddress = _sendAddress2;
                uni.setStorageSync('sendAddress', JSON.stringify(_sendAddress2));
              } else {
                _this7.ftSendAddress.titleName = '未获取到地址';
                _this7.ftSendAddress.addressname = '';
              }
            } });


          _this7.getHorseman();

        },
        fail: function fail(err) {
          console.log(err);
        } });

    },
    //有无骑手
    getHorseman: function getHorseman() {var _this8 = this;
      var lat = Number(this.latitude).toFixed(6);
      var _long = Number(this.longitude).toFixed(5);
      var center = lat + ',' + _long;
      var token = uni.getStorageSync('token');
      uni.request({
        url: 'https://tsapi.amap.com/v1/track/terminal/aroundsearch',
        method: 'POST',
        header: {
          'content-type': 'application/x-www-form-urlencoded' },

        data: {
          // key: 'e54514186dfbafae58736cd342838baf',
          // sid: '92478',
          key: "4145121d3d1b5dcf41702960f3bd5adc",
          sid: '126730',
          center: center,
          radius: 3 * 1000 },

        success: function () {var _success = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee(res) {var userIds, i;return _regenerator.default.wrap(function _callee$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:
                    // this.covers = []
                    // this.covers = [...this.covers]
                    // this.$set(this.covers,0,[])




                    userIds = [];
                    for (i = 0; i < res.data.data.results.length; i++) {

                      userIds.push(res.data.data.results[i].name);
                    }
                    userIds = userIds.join(',');


                    uni.request({
                      url: 'https://admin.gglaisong.com/notoken/user/get_receipt_flag', //仅为示例，并非真实接口地址。
                      method: 'POST',
                      data: {
                        userIds: userIds },

                      header: {

                        'content-type': 'application/x-www-form-urlencoded' },

                      success: function success(msg) {
                        console.log(msg);
                        _this8.horseManTotal = msg.data.data.length;

                        if (_this8.horseManTotal == 0) {
                          _this8.covers = [
                          {
                            id: 1,
                            latitude: _this8.latitude,
                            longitude: _this8.longitude,
                            iconPath: '/static/img/index/dingweione.png',
                            width: 20,
                            height: 30,
                            callout: {
                              content: '附近暂无骑手,请稍等',
                              color: '#09023E',
                              fontSize: 12,
                              bgColor: 'white',
                              display: 'ALWAYS',
                              borderRadius: 0,
                              padding: 10 } }];



                          if (_this8.platform == 'ios') {
                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '附近暂无骑手,请稍等',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];



                          }
                        }

                        if (_this8.horseManTotal <= 2 && _this8.horseManTotal > 0) {
                          _this8.covers = [
                          {
                            id: 1,
                            latitude: _this8.latitude,
                            longitude: _this8.longitude,
                            iconPath: '/static/img/index/dingweione.png',
                            width: 20,
                            height: 30,
                            callout: {
                              content: '附近有' + 3 + '位骑手,预计3分钟内接单',
                              color: '#09023E',
                              fontSize: 12,
                              bgColor: 'white',
                              display: 'ALWAYS',
                              borderRadius: 0,
                              padding: 10 } }];



                          if (_this8.platform == 'ios') {
                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '附近有' + 3 + '位骑手,预计3分钟内接单',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];



                          }

                          if (uni.getStorageSync('endAddress')) {

                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '起始位置',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } },


                            {
                              latitude: _this8.endAddress.editAddress.latitude,
                              longitude: _this8.endAddress.editAddress.longitude,
                              iconPath: '/static/img/index/dingweitwo.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: _this8.distance + '公里,预计' + _this8.showTimer + '前送达',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];



                            if (_this8.platform == 'ios') {
                              _this8.covers = [
                              {
                                id: 1,
                                latitude: _this8.latitude,
                                longitude: _this8.longitude,
                                iconPath: '/static/img/index/dingweione.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: '起始位置',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } },


                              {
                                latitude: _this8.endAddress.editAddress.latitude,
                                longitude: _this8.endAddress.editAddress.longitude,
                                iconPath: '/static/img/index/dingweitwo.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: _this8.distance + '公里,预计' + _this8.showTimer + '前送达',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } }];



                            }
                          }
                          _this8.plusReady();
                        } else {

                          _this8.covers = [
                          {
                            id: 1,
                            latitude: _this8.latitude,
                            longitude: _this8.longitude,
                            iconPath: '/static/img/index/dingweione.png',
                            width: 20,
                            height: 30,
                            callout: {
                              content: '附近有' + _this8.horseManTotal + '位骑手,预计3分钟内接单',
                              color: '#09023E',
                              fontSize: 12,
                              bgColor: 'white',
                              display: 'ALWAYS',
                              borderRadius: 0,
                              padding: 10 } }];



                          if (_this8.platform == 'ios') {
                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '附近有' + _this8.horseManTotal + '位骑手,预计3分钟内接单',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];




                          }
                          if (_this8.horseManTotal <= 0) {
                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '附近暂无骑手,请稍等',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];



                            if (_this8.platform == 'ios') {
                              _this8.covers = [
                              {
                                id: 1,
                                latitude: _this8.latitude,
                                longitude: _this8.longitude,
                                iconPath: '/static/img/index/dingweione.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: '附近暂无骑手,请稍等',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } }];



                            }
                          }

                          if (_this8.horseManTotal >= 3) {
                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '附近有' + _this8.horseManTotal + '位骑手,预计3分钟内接单',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];



                            if (_this8.platform == 'ios') {
                              _this8.covers = [
                              {
                                id: 1,
                                latitude: _this8.latitude,
                                longitude: _this8.longitude,
                                iconPath: '/static/img/index/dingweione.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: '附近有' + _this8.horseManTotal + '位骑手,预计3分钟内接单',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } }];




                            }
                          }

                          if (uni.getStorageSync('endAddress')) {

                            _this8.covers = [
                            {
                              id: 1,
                              latitude: _this8.latitude,
                              longitude: _this8.longitude,
                              iconPath: '/static/img/index/dingweione.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: '起始位置',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } },


                            {
                              latitude: _this8.endAddress.editAddress.latitude,
                              longitude: _this8.endAddress.editAddress.longitude,
                              iconPath: '/static/img/index/dingweitwo.png',
                              width: 20,
                              height: 30,
                              callout: {
                                content: _this8.distance + '公里,预计' + _this8.showTimer + '前送达',
                                color: '#09023E',
                                fontSize: 12,
                                bgColor: 'white',
                                display: 'ALWAYS',
                                borderRadius: 0,
                                padding: 10 } }];




                            if (_this8.platform == 'ios') {
                              _this8.covers = [
                              {
                                id: 1,
                                latitude: _this8.latitude,
                                longitude: _this8.longitude,
                                iconPath: '/static/img/index/dingweione.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: '起始位置',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } },


                              {
                                latitude: _this8.endAddress.editAddress.latitude,
                                longitude: _this8.endAddress.editAddress.longitude,
                                iconPath: '/static/img/index/dingweitwo.png',
                                width: 20,
                                height: 30,
                                callout: {
                                  content: _this8.distance + '公里,预计' + _this8.showTimer + '前送达',
                                  color: '#09023E',
                                  fontSize: 12,
                                  bgColor: 'white',
                                  display: 'ALWAYS',
                                  borderRadius: 0,
                                  padding: 10 } }];



                            }
                          }
                          _this8.plusReady();
                        }
                      } });case 4:case "end":return _context.stop();}}}, _callee);}));function success(_x) {return _success.apply(this, arguments);}return success;}() });




    },
    //触碰地图
    handleMap: function handleMap(e, lati) {var _this9 = this;
      // this.covers = []
      // this.covers = [...this.covers]
      // this.$set(this.covers,0,[])
      // this.$refs.newsMap.attr.polyline = []
      // setTimeout(() => {
      // 	this.$refs.newsMap.attr.polyline = []
      // },300)
      // setTimeout(() => {
      // 	this.$refs.newsMap.attr.polyline = []
      // },600)

      // 刷新地图
      // if (this.platform == 'ios') {
      // 	this.mapShow = false
      // 	setTimeout(() => {
      // 		this.mapShow = true
      // 	}, 800)
      // }


      if (typeof e === "string") {

        this.latitude = Number(e).toFixed(6);

        this.longitude = Number(lati).toFixed(5);


      } else if (typeof e === "number") {

        this.latitude = Number(e).toFixed(6);
        this.longitude = Number(lati).toFixed(5);

      } else {
        console.log(typeof e === "object");
        this.latitude = Number(e.detail.latitude).toFixed(6);

        this.longitude = Number(e.detail.longitude).toFixed(5);

      }

      uni.request({
        url:
        'https://restapi.amap.com/v3/geocode/regeo?output=JSON&location=' +
        this.longitude +
        ',' +
        this.latitude +
        '&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all', //仅为示例，并非真实接口地址。
        success: function success(res) {
          _this9.headerCity = res.data.regeocode.addressComponent.city;
          var userPhone = uni.getStorageSync('user_phone');
          var userName = uni.getStorageSync('user_Name');
          var latitude = _this9.longitude + ',' + _this9.latitude;

          _this9.titleName = _this9.ftSendAddress.titleName;
          if (res.data.regeocode.aois.length != 0) {
            console.log(e);
            if (typeof e !== "string") {

              _this9.ftSendAddress = {};
              _this9.$set(_this9.ftSendAddress, 'titleName', res.data.regeocode.aois[0].name);
              _this9.$set(_this9.ftSendAddress, 'location', res.data.regeocode.aois[0].location);
              _this9.$set(_this9.ftSendAddress, 'addressname', res.data.regeocode.formatted_address);
            } else {

              _this9.ftSendAddress = {};
              _this9.$set(_this9.ftSendAddress, 'titleName', _this9.sendAddress.editAddress.name);
              _this9.$set(_this9.ftSendAddress, 'location', res.data.regeocode.aois[0].location);
              _this9.$set(_this9.ftSendAddress, 'addressname', _this9.sendAddress.editAddress.address);
            }


            _this9.editAddress.name = res.data.regeocode.aois[0].name;
            _this9.editAddress.address = res.data.regeocode.formatted_address;
            _this9.editAddress.longitude = _this9.longitude;
            _this9.editAddress.latitude = _this9.latitude;

            _this9.province = res.data.regeocode.addressComponent.province;
            _this9.city = res.data.regeocode.addressComponent.city;
            _this9.area = res.data.regeocode.addressComponent.district;


            // 解决备注问题
            if (_this9.titleName !== _this9.ftSendAddress.titleName && !_this9.sendAddress.id) {

              _this9.addressDetail = '';
              _this9.sendAddress.addressDetail = '';
            } else {

            }
            if (_this9.sendAddress.addressDetail) {

              _this9.addressDetail = _this9.sendAddress.addressDetail;
            } else {

              _this9.addressDetail = '';
            }

            if (typeof e === "object") {
              _this9.addressDetail = '';
              _this9.sendAddress.addressDetail = '';
            }


            if (typeof e !== 'string') {
              console.log(_this9.addressDetail);
              var sendAddress = {
                addressDetail: _this9.addressDetail,
                latitude: latitude,
                mobile: _this9.userStartUserPhone,
                name: _this9.userStartUserName,
                province: _this9.province,
                editAddress: _this9.editAddress,
                city: _this9.city,
                area: _this9.area,
                orderId: '' };

              _this9.sendAddress = sendAddress;
              uni.setStorageSync('sendAddress', JSON.stringify(sendAddress));
            }



          } else if (res.data.regeocode.pois.length != 0) {

            if (typeof e !== "string") {

              _this9.ftSendAddress = {};

              _this9.$set(_this9.ftSendAddress, 'titleName', res.data.regeocode.pois[0].name);
              _this9.$set(_this9.ftSendAddress, 'location', res.data.regeocode.pois[0].location);
              _this9.$set(_this9.ftSendAddress, 'addressname', res.data.regeocode.formatted_address);
            } else {

              _this9.ftSendAddress = {};
              _this9.$set(_this9.ftSendAddress, 'titleName', _this9.sendAddress.editAddress.name);
              _this9.$set(_this9.ftSendAddress, 'location', res.data.regeocode.pois[0].location);
              _this9.$set(_this9.ftSendAddress, 'addressname', _this9.sendAddress.editAddress.address);
            }

            _this9.editAddress.name = res.data.regeocode.pois[0].name;
            _this9.editAddress.address = res.data.regeocode.formatted_address;
            _this9.editAddress.longitude = _this9.longitude;
            _this9.editAddress.latitude = _this9.latitude;

            _this9.province = res.data.regeocode.addressComponent.province;
            _this9.city = res.data.regeocode.addressComponent.city;
            _this9.area = res.data.regeocode.addressComponent.district;



            // 解决备注问题
            if (_this9.titleName !== _this9.ftSendAddress.titleName && !_this9.sendAddress.id) {

              _this9.sendAddress.addressDetail = '';
              _this9.titleName = _this9.ftSendAddress.titleName;
            } else {

            }

            if (_this9.sendAddress.addressDetail) {

              _this9.addressDetail = _this9.sendAddress.addressDetail;
            } else {

              _this9.addressDetail = '';
            }
            if (typeof e === "object") {
              _this9.addressDetail = '';
              _this9.sendAddress.addressDetail = '';
            }


            var _sendAddress3 = {
              addressDetail: _this9.addressDetail,
              latitude: latitude,
              mobile: _this9.userStartUserPhone,
              name: _this9.userStartUserName,
              province: _this9.province,
              editAddress: _this9.editAddress,
              city: _this9.city,
              area: _this9.area,
              orderId: '' };

            _this9.sendAddress = _sendAddress3;
            uni.setStorageSync('sendAddress', JSON.stringify(_sendAddress3));
          } else {
            _this9.ftSendAddress.titleName = '未获取到地址';
            _this9.ftSendAddress.addressname = '';
          }

        } });


      this.getHorseman();

      this.plusReady();
    },
    //消息是否有未读
    initMsgReader: function initMsgReader() {var _this10 = this;
      var token = uni.getStorageSync('token');
      // console.log(token)
      uni.request({
        url: _index.default + '/token/user/new_msg_is_read', //仅为示例，并非真实接口地址。
        data: {
          token: token },

        method: 'POST',
        header: {
          'content-type': 'application/x-www-form-urlencoded',
          token: token },

        success: function success(res) {
          _this10.newsReaderFlag = res.data.data;
        } });

    },
    //切换车
    handleChoiceCar: function handleChoiceCar(index) {
      this.choiceCar = index;

      if (this.choiceCar && this.ftItemIndex === 2) {

        this.ftItemIndex = 0;
      }

    },
    //切换帮我买等
    handleFTIndex: function handleFTIndex(index) {
      this.ftItemIndex = index;
      if (index === 2) {

        uni.navigateTo({
          url: '../storage/storage?car=' + this.choiceCar + '&scrollIndex=' + this.ftItemIndex });

      }

    },
    //编辑
    goToEdit: function goToEdit(addressInfo, index, id) {

      if (index === 0 && !uni.getStorageSync('sendAddress')) {
        console.log('123');

        uni.navigateTo({
          url: '../editAddress/editAddress?addressInfo=' + JSON.stringify(addressInfo) + '&status=' + index + '&id=' + id + '&ftSendAddress=' + JSON.stringify(this.ftSendAddress) });

      } else {
        uni.setStorageSync('noSetSend', false);
        console.log('456');
        uni.navigateTo({
          url: '../editAddress/editAddress?addressInfo=' + JSON.stringify(addressInfo) + '&status=' + index + '&id=' + id });

      }

    },
    //去地址簿
    goToAddress: function goToAddress(index) {
      uni.navigateTo({
        url: '../address/address?address=' + index });

    },

    //设置骑手与目的地距离
    plusReady: function plusReady() {var _this11 = this;

      if (uni.getStorageSync('endAddress')) {

        var origin = this.endAddress.editAddress.longitude + ',' + this.endAddress.editAddress.latitude;

        var destination = this.longitude + ',' + this.latitude;

        uni.request({
          // url: 'https://restapi.amap.com/v3/direction/driving?origin=' + origin + '&destination=' + destination +
          // 	'&extensions=base&output=JSON&key=8978acd8e3f1ba1623bfd047571db077',
          url: 'https://restapi.amap.com/v4/direction/bicycling?origin=' + origin + '&destination=' + destination +
          '&key=8978acd8e3f1ba1623bfd047571db077',
          method: "GET",
          success: function success(msg) {

            // console.log(msg)
            setTimeout(function () {
              // console.log('进入设置')

              _this11.distance = Number(msg.data.data.paths[0].distance / 1000).toFixed(2);
              _this11.timer = Math.floor(_this11.distance * 1000 / 500) * 3;

              _this11.showTimer = (0, _dayjs.default)().add(_this11.timer, 'minute').format('HH:mm');

              // this.covers = []
              // this.covers = [...this.covers]
              // this.$set(this.covers,0,[])

              if (uni.getStorageSync('endAddress')) {
                _this11.covers = [
                {
                  id: 1,
                  latitude: _this11.latitude,
                  longitude: _this11.longitude,
                  iconPath: '/static/img/index/dingweione.png',
                  width: 20,
                  height: 30,
                  callout: {
                    content: '起始位置',
                    color: '#09023E',
                    fontSize: 12,
                    bgColor: 'white',
                    display: 'ALWAYS',
                    borderRadius: 0,
                    padding: 10 } },


                {
                  latitude: _this11.endAddress.editAddress.latitude,
                  longitude: _this11.endAddress.editAddress.longitude,
                  iconPath: '/static/img/index/dingweitwo.png',
                  width: 20,
                  height: 30,
                  callout: {
                    content: _this11.distance + '公里,预计' + _this11.showTimer + '前送达',
                    color: '#09023E',
                    fontSize: 12,
                    bgColor: 'white',
                    display: 'ALWAYS',
                    borderRadius: 0,
                    padding: 10 } }];



              }



            }, 500);

            var data = msg.data.data;



            var points = [];
            if (data.paths && data.paths[0] && data.paths[0].steps) {
              var steps = data.paths[0].steps;
              for (var i = 0; i < steps.length; i++) {
                var polen = steps[i].polyline.split(';');
                for (var j = 0; j < polen.length; j++) {
                  points.push({
                    longitude: parseFloat(polen[j].split(',')[0]),
                    latitude: parseFloat(polen[j].split(',')[1]) });

                }
              }
            }


            // 绘制线
            // this.polyline = [
            // 	{
            // 		points:points,
            // 		color:'#0091ff',
            // 		width:4
            // 	}
            // ]
            // if(this.platform == 'ios') {
            // 	this.polyline = [
            // 		{
            // 			points:points,
            // 			color:'#0091ff',
            // 			width:4
            // 		}
            // 	]
            // }
            if (uni.getStorageSync('endAddress')) {
              // console.log(typeof this.endAddress.editAddress.latitude)
              // console.log(typeof this.endAddress.editAddress.longitude)
              _this11.points = [{
                latitude: _this11.endAddress.editAddress.latitude,
                longitude: _this11.endAddress.editAddress.longitude }];

            } else {
              _this11.points = [{
                latitude: _this11.latitude,
                longitude: _this11.longitude }];

            }


          } });

      }


    } } };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 33:
/*!*************************************************************************************!*\
  !*** E:/web-project/errand/pages/index/index.nvue?vue&type=style&index=0&lang=css& ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=0&lang=css& */ 34);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 34:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web-project/errand/pages/index/index.nvue?vue&type=style&index=0&lang=css& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ }),

/***/ 35:
/*!*************************************************************************************************************!*\
  !*** E:/web-project/errand/pages/index/index.nvue?vue&type=style&index=1&id=4e3ea066&scoped=true&lang=css& ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.nvue?vue&type=style&index=1&id=4e3ea066&scoped=true&lang=css& */ 36);
/* harmony import */ var _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_360_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_360_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_D_360_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_360_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_nvue_vue_type_style_index_1_id_4e3ea066_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 36:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web-project/errand/pages/index/index.nvue?vue&type=style&index=1&id=4e3ea066&scoped=true&lang=css& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[23,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map