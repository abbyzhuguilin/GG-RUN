<view class="order-detail"><block wx:if="{{orderStatus==1}}"><view class="detail-title"><view class="title-left">等待骑手接单</view><view class="title-wait">请耐心等待，骑手很快就接到你的订单了！</view></view></block><block wx:if="{{orderStatus==6}}"><view class="detail-title cancelOrder-title"><view class="title-left">已取消订单</view></view></block><block wx:if="{{orderStatus==0||orderStatus==1||orderStatus==6}}"><view class="detail-header"><view class="avatar"><image src="{{orderDetailInfo.userAvatar?orderDetailInfo.userAvatar:'../../static/img/order/avatar.png'}}" mode="aspectFill"></image></view><view class="header-right"><view class="right-top"><view class="send-user">寄件人</view><view class="user">{{orderDetailInfo.startAddress.userName}}</view><view class="user-phone">{{orderDetailInfo.startAddress.mobile}}</view></view><view class="right-bottom"><view class="send">发单数量</view><view class="send-num">{{orderDetailInfo.userOddNumber}}</view><view class="cancel">取消数量</view><view class="cancel-num">{{orderDetailInfo.userCancelledNumber}}</view></view></view></view></block><block wx:if="{{orderStatus==2||orderStatus==3||orderStatus==4||orderStatus==7}}"><view class="detail-header-already"><view class="header-already-left"><view class="already-left"><image src="{{orderDetailInfo.riderAvatar?orderDetailInfo.riderAvatar:'../../static/img/order/avatar.png'}}" mode="aspectFill"></image></view><view class="already-right"><view class="already-right-header"><view class="user-name">{{orderDetailInfo.riderName}}</view><view class="user-phone">{{''+orderDetailInfo.riderMobile+''}}</view></view><view class="user-star-box"><view class="star"><block wx:for="{{rateActive}}" wx:for-item="startActive" wx:for-index="index" wx:key="index"><image src="../../static/img/order/star-active.png" mode="aspectFill"></image></block><block wx:for="{{rate}}" wx:for-item="start" wx:for-index="i" wx:key="i"><image src="../../static/img/order/star.png" mode="aspectFill"></image></block></view><view class="star-num">{{rateActive+"星"}}</view><view class="order-num">{{orderDetailInfo.riderTotalNum+"单"}}</view></view></view></view><view data-event-opts="{{[['tap',[['callPhone',['$0'],['orderDetailInfo.riderMobile']]]]]}}" class="header-already-right" bindtap="__e"><image src="../../static/img/order/call-phone.png" mode="aspectFill"></image></view></view></block><block wx:if="{{orderStatus==5}}"><view class="header-complete"><view class="complete-left"><view class="complete-left-avatar"><image src="{{orderDetailInfo.riderAvatar?orderDetailInfo.riderAvatar:'../../static/img/order/avatar.png'}}" mode="aspectFill"></image></view><view class="complete-left-right"><view class="left-right-top"><view class="user-name">{{orderDetailInfo.riderName}}</view><view data-event-opts="{{[['tap',[['callPhone',['$0'],['orderDetailInfo.riderMobile']]]]]}}" class="user-phone" bindtap="__e">{{orderDetailInfo.riderMobile}}</view><image src="../../static/img/order/dianhua.png" mode="aspectFill" data-event-opts="{{[['tap',[['callPhone',['$0'],['orderDetailInfo.riderMobile']]]]]}}" bindtap="__e"></image></view><view class="left-right-bottom"><view class="star-box"><block wx:for="{{rateActive}}" wx:for-item="startActive" wx:for-index="index" wx:key="index"><image src="../../static/img/order/star-active.png" mode="aspectFill"></image></block><block wx:for="{{rate}}" wx:for-item="start" wx:for-index="i" wx:key="i"><image src="../../static/img/order/star.png" mode="aspectFill"></image></block></view><view class="star-num">{{rateActive+"星"}}</view><view class="order-num">{{orderDetailInfo.riderTotalNum+"单"}}</view></view></view></view></view></block><block wx:if="{{orderStatus==2||orderStatus==3||orderStatus==4||orderStatus==5}}"><view class="detail-already-main"><view class="map"><block wx:if="{{!showCancelButton}}"><order-detail-map vue-id="0e26bf40-1" orderDetailInfo="{{orderDetailInfo}}" covers="{{covers}}" bind:__l="__l"></order-detail-map></block><block wx:if="{{orderStatus==4||orderStatus==5}}"><cover-view class="map-already"><cover-image class="coverImage" src="../../static/img/order/already-complete.png" mode="aspectFill"></cover-image><cover-view class="coverText">骑手已到达目的地</cover-view></cover-view></block></view><block wx:if="{{orderDetailInfo.pickUpCode}}"><view><block wx:if="{{orderStatus==2}}"><view class="already-main-detail"><view data-event-opts="{{[['tap',[['copyPickUpCode',['$0'],['orderDetailInfo.pickUpCode']]]]]}}" class="already-main-item" bindtap="__e"><view class="pickup-left">取货码</view><view class="pickup-right">{{orderDetailInfo.pickUpCode}}</view><image src="../../static/img/order/fuzhi.png" mode="aspectFill"></image></view><view class="already-tip">确认骑手送达后，将取货码给其收货确认收货。</view></view></block></view></block><block wx:if="{{orderDetailInfo.signForCode}}"><view><block wx:if="{{orderStatus==3||orderStatus==4}}"><view class="already-main-detail"><view data-event-opts="{{[['tap',[['copyPickUpCode',['$0'],['orderDetailInfo.pickUpCode']]]]]}}" class="already-main-item" bindtap="__e"><view class="pickup-left">签收码</view><view class="pickup-right">{{orderDetailInfo.signForCode}}</view><image src="../../static/img/order/fuzhi.png" mode="aspectFill"></image></view><view class="already-tip">确认骑手送达后，将取货码给其收货确认收货。</view></view></block></view></block><block wx:if="{{orderStatus==5}}"><view class="already-main-detail nocenter"><view class="collectOrUncollectBox"><view data-event-opts="{{[['tap',[['handleCollect',['$event']]]]]}}" class="{{['collectOrUncollectBox-item',(orderDetailInfo.shieldType===0)?'on':'']}}" bindtap="__e">{{orderDetailInfo.shieldType===0?'已收藏':"收藏骑手"}}</view><view data-event-opts="{{[['tap',[['handleShield',['$event']]]]]}}" class="{{['collectOrUncollectBox-item',(orderDetailInfo.shieldType===1)?'on':'']}}" bindtap="__e">{{orderDetailInfo.shieldType===1?"已屏蔽":"屏蔽骑手"}}</view></view><view class="already-main-detail-p _p">骑手拉黑后您发布的订单<label style="color:rgba(219, 33, 33, 1);" class="_span">无法</label>接单</view><view class="already-main-detail-p _p">骑手收藏后您发布的订单<label style="color:rgba(219, 33, 33, 1);" class="_span">优先</label>接单</view><view class="pickandsignCodeBox"><view class="pickandsignCodeBox-left">{{'取货码:'+orderDetailInfo.pickUpCode+''}}</view><view class="pickandsignCodeBox-right">{{'签收码:'+orderDetailInfo.signForCode+''}}</view></view></view></block></view></block><view class="detail-main"><view class="main-item"><view>订单类型:</view><view style="color:rgba(38, 66, 222, 1);font-weight:bold;">{{buyType[orderDetailInfo.type]}}</view><block wx:if="{{orderStatus==7}}"><view data-event-opts="{{[['tap',[['showQuestion',['$0'],['orderDetailInfo.orderProblem.problemDescription']]]]]}}" style="color:#fff;font-weight:bold;font-size:12px;background-color:rgba(38, 66, 222, 1);padding:6rpx;box-sizing:border-box;border-radius:4rpx;" bindtap="__e">查看原因</view></block></view><view class="main-item"><view>商品价值:</view><view>{{"¥"+orderDetailInfo.goodsInventory.cost}}</view></view><view class="main-item"><view>物品重量:</view><view>{{(orderDetailInfo.goodsInventory.weight?orderDetailInfo.goodsInventory.weight:1)+"kg内"}}</view></view><view class="main-item"><view>物品信息:</view><view>{{orderDetailInfo.goodsInventory.goods}}</view></view><block wx:if="{{elseInfo}}"><view class="main-item"><view>其他属性:</view><view style="color:rgba(38, 66, 222, 1);">{{elseInfo}}</view></view></block><view data-event-opts="{{[['tap',[['goTofreight',[0]]]]]}}" class="main-item" catchtap="__e"><view>跑腿服务:</view><block wx:if="{{orderDetailInfo.type!=2}}"><view style="color:#ff2525;">{{orderDetailInfo.payAmount?'￥'+orderDetailInfo.payAmount:0}}</view></block><block wx:else><view style="color:#ff2525;">{{detailPayPrice?'￥'+detailPayPrice:0}}</view></block><image src="../../static/img/my/right.png" mode></image></view><view class="main-item"><view>取件时间:</view><view>{{orderDetailInfo.pickUpTime?orderDetailInfo.pickUpTime:"马上取件"}}</view></view><block wx:if="{{orderDetailInfo.estimatedTime}}"><view class="main-item"><view>预计送达:</view><view>{{orderDetailInfo.estimatedTime?orderDetailInfo.estimatedTime:""}}</view></view></block><block wx:if="{{orderDetailInfo.remark}}"><view class="main-item"><view>用户备注:</view><view style="color:rgba(38, 66, 222, 1);">{{orderDetailInfo.remark}}</view></view></block></view><view class="detail-order"><view data-event-opts="{{[['tap',[['copyOrderNo',['$0'],['orderDetailInfo.orderNo']]]]]}}" class="order-item" bindtap="__e"><view class="order-left">订单编号:</view><view class="order-right"><view class="order-right-box"><view>{{orderDetailInfo.orderNo}}</view><image src="../../static/img/order/fuzhi.png" mode="aspectFill"></image></view><view class="order-start">{{orderDetailInfo.orderLevel+"星"}}</view></view></view><view class="order-item"><view class="order-left">发布时间:</view><view class="order-right">{{orderDetailInfo.createTime}}</view></view><view class="order-item"><view class="order-left">订单性质:</view><view class="order-right">{{orderDetailInfo.pickUpType?"预约":"即时"}}</view></view></view><view class="main-center"><view class="center-left"><block wx:if="{{orderDetailInfo.type==2}}"><view class="left-top">买</view></block><block wx:else><view class="left-top">取</view></block><view class="left-line"><view class="content _div"></view></view><block wx:if="{{orderDetailInfo.type==2}}"><view class="left-bottom">收</view></block><block wx:else><view class="left-bottom">达</view></block></view><view class="center-right"><block wx:if="{{!orderDetailInfo.buyAddressType}}"><view class="right-top"><view class="right-top-header"><view class="top-title">{{orderDetailInfo.startAddress.title}}</view></view><view class="right-top-center">{{orderDetailInfo.startAddress.addressDetail}}</view><view hidden="{{!(orderDetailInfo.type!==2)}}" class="right-top-footer">{{orderDetailInfo.startAddress.userName+" "+orderDetailInfo.startAddress.mobile}}</view></view></block><block wx:else><view class="right-top top-title-child">就近购买</view></block><view class="right-bottom"><view class="right-bottom-header"><view class="bottom-title">{{orderDetailInfo.endAddress.title}}</view></view><view class="right-bottom-center">{{orderDetailInfo.endAddress.addressDetail}}</view><view class="right-bottom-footer">{{orderDetailInfo.endAddress.userName+" "+orderDetailInfo.endAddress.mobile}}</view></view></view></view><block wx:if="{{orderStatus!=5}}"><view class="{{['detail-footer',(orderStatus==0)?'pdleft':'']}}"><block wx:if="{{orderStatus==0||orderStatus==1||orderStatus==2||orderStatus==3}}"><view data-event-opts="{{[['tap',[['goToCancelOrder',['$0'],['orderDetailInfo.orderId']]]]]}}" class="cancel-button" catchtap="__e">取消订单</view></block><block wx:if="{{orderStatus==0}}"><view data-event-opts="{{[['tap',[['nowpayOrder',['$event']]]]]}}" class="pay-now" bindtap="__e">立即支付</view></block><block wx:if="{{orderStatus==4}}"><view data-event-opts="{{[['tap',[['goToEvaluate',['$event']]]]]}}" class="pay-now" bindtap="__e">去评价</view></block><block wx:if="{{orderStatus==3}}"><view data-event-opts="{{[['tap',[['commitDelivery',['$event']]]]]}}" class="pay-now" bindtap="__e">确认收货</view></block><block wx:if="{{orderStatus==6}}"><view data-event-opts="{{[['tap',[['goToStorage',['$0'],['orderDetailInfo']]]]]}}" class="pay-now" bindtap="__e">重新发单</view></block></view></block><block wx:if="{{showCancelButton}}"><view data-event-opts="{{[['tap',[['closeCancelModel',['$event']]]]]}}" class="orderCancelModel" catchtap="__e"><view class="orderCancelModel-Wrapper"><view class="cancelModel-top"><view>取消订单</view><image src="../../static/img/order/closeBlack.png" mode data-event-opts="{{[['tap',[['closeCancelModel',[0]]]]]}}" catchtap="__e"></image></view><view class="cancelModel-center"><view class="cancelModel-center-top">{{'用户在'+cancelTimer+"分钟内取消订单免责，超过"+cancelPrice+'分钟取消订单有责，需要补偿骑手3元。'}}</view><view class="cancelModel-center-bottom">确定<label class="_span">取消</label>订单?</view></view><view class="cancelModel-bottom"><view data-event-opts="{{[['tap',[['closeCancelModel',['$event']]]]]}}" class="cancelModel-bottom-left" catchtap="__e">取消</view><view data-event-opts="{{[['tap',[['newGoToCancelOrder',['$0'],['orderDetailInfo.orderId']]]]]}}" class="cancelModel-bottom-right" catchtap="__e">确定</view></view></view></view></block><uni-popup class="vue-ref" vue-id="0e26bf40-2" type="bottom" data-ref="popupPay" bind:__l="__l" vue-slots="{{['default']}}"><view class="popupPay-header"><view class="popupPay-header-left">您需支付</view><view class="popupPay-header-right">{{"¥"+orderDetailInfo.payAmount}}</view></view><block wx:for="{{payInfo}}" wx:for-item="popPay" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['handleCircle',[index]]]]]}}" class="popupPay-item" bindtap="__e"><view class="circle"><view hidden="{{!(circleShow===index)}}" class="n-circle"></view></view><image src="{{popPay.image}}" mode="aspectFill"></image><view class="pay-way">{{''+popPay.text+''}}<block wx:if="{{popPay.sectext}}"><view class="pay-way-sectext">{{popPay.sectext}}</view></block></view></view></block><view data-event-opts="{{[['tap',[['payOrder',['$event']]]]]}}" class="popupPay-button" bindtap="__e">确认支付</view></uni-popup></view>