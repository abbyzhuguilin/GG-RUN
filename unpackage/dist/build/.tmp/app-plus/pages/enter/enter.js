(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/enter/enter"],{"30b6":function(e,t,n){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}))},3167:function(e,t,n){"use strict";n.r(t);var r=n("30b6"),a=n("c10a");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("c8ab");var o,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=c.exports},"41b5":function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("4795")),i=o(n("f8e4"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,c,"next",e)}function c(e){u(i,r,a,o,c,"throw",e)}o(void 0)}))}}var s={onLoad:function(){e.getStorageSync("user_phone")&&(this.phone=e.getStorageSync("user_phone"));var t=e.getSystemInfoSync();this.platform=t.platform,r("log","android"==this.platform," at pages\\enter\\enter.vue:68")},onHide:function(){e.setStorageSync("loginFlag",1)},onShow:function(){var t=e.getSystemInfoSync();this.platform=t.platform},data:function(){return{phone:"",pwd:"",scrollIndex:1,cid:"",uniId:"",nickName:"",avatarUrl:"",platform:"",isYzm:!1,isYzmPlaceHoler:"请输入您的密码",getYzm:!0,countTimer:60}},methods:{handleScrollList:function(e){this.scrollIndex=e,this.pwd=""},handleGetYzm:function(){var t=this;return c(a.default.mark((function n(){var o,u,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$u.test.mobile(t.phone)){n.next=2;break}return n.abrupt("return",e.showToast({icon:"none",title:"请输入正确的手机号"}));case 2:if(t.getYzm){n.next=4;break}return n.abrupt("return");case 4:return r("log",t.phone," at pages\\enter\\enter.vue:101"),o=i.default.setEncrypt(t.$api.publiukey,t.phone),n.next=8,t.$fetch(t.$api.customerPhone,{mobile:o},"GET","form");case 8:u=n.sent,r("log",u," at pages\\enter\\enter.vue:106"),t.countTimer=60,t.getYzm=!1,c=setInterval((function(){t.countTimer<=0?(clearInterval(c),t.getYzm=!0):t.countTimer--}),1e3);case 13:case"end":return n.stop()}}),n)})))()},goToRegister:function(){e.navigateTo({url:"../register/register"})},goToForgetPwd:function(){e.navigateTo({url:"../my/changePwd?status=0"})},yzmLogin:function(){this.isYzm=!this.isYzm,this.isYzm?this.isYzmPlaceHoler="请输入您的验证码":this.isYzmPlaceHoler="请输入您的密码"},login:function(){var t=this;return c(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==t.phone.trim()&&""!==t.pwd.trim()){n.next=3;break}return e.showToast({icon:"none",title:"请先输入手机或密码"}),n.abrupt("return");case 3:if(t.cid=plus.push.getClientInfo().clientid,!t.isYzm){n.next=10;break}return n.next=7,t.$fetch(t.$api.customer_mobile_login,{loginName:t.phone,checkCode:t.pwd,cid:t.cid},"POST","Form");case 7:r=n.sent,n.next=13;break;case 10:return n.next=12,t.$fetch(t.$api.customerLogin,{loginName:t.phone,password:t.pwd,cid:t.cid},"POST","Form");case 12:r=n.sent;case 13:t.resMsg=r.msg,0==r.code?(e.setStorageSync("token",r.data.token),e.setStorageSync("redInfoFlag",1),e.showToast({icon:"success",title:"登录成功"}),setTimeout((function(){e.switchTab({url:"../my/my"})}),1500)):(e.showToast({icon:"none",title:r.msg}),e.setStorageSync("redInfoFlag",0));case 15:case"end":return n.stop()}}),n)})))()},wxLogin:function(){var t=this;e.showLoading({title:"正在登陆中..."}),e.login({provider:"weixin",success:function(){var n=c(a.default.mark((function n(i){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r("log",i.authResult," at pages\\enter\\enter.vue:186"),t.uniId=i.authResult.unionid,e.getUserInfo({provider:"weixin",success:function(e){t.nickName=e.userInfo.nickName,t.avatarUrl=e.userInfo.avatarUrl}}),e.hideLoading(),n.next=6,t.$fetch(t.$api.customerWx,{cid:t.cid,unionId:i.authResult.unionid},"POST","FORM");case 6:o=n.sent,0!==o.code?(e.showToast({icon:"none",title:"暂未绑定手机号"}),setTimeout((function(){e.navigateTo({url:"../register/register?wxlogin=1&unionId="+t.uniId+"&nickName="+t.nickName+"&avatarUrl="+t.avatarUrl})}),1e3)):(e.setStorageSync("token",o.data.token),e.switchTab({url:"../my/my"}));case 8:case"end":return n.stop()}}),n)})));function i(e){return n.apply(this,arguments)}return i}()})}}};t.default=s}).call(this,n("6e42")["default"],n("0de9")["default"])},"7e1d":function(e,t,n){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}))},8305:function(e,t,n){"use strict";(function(e){n("7207"),n("921b");r(n("66fd"));var t=r(n("3167"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},b16b:function(e,t,n){"use strict";n.r(t);var r=n("f0ca"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},c0ef:function(e,t,n){},c10a:function(e,t,n){"use strict";n.r(t);var r=n("41b5"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},c8ab:function(e,t,n){"use strict";var r=n("c0ef"),a=n.n(r);a.a},f0ca:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("1010"));function a(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{}},methods:{},getRealLen:function(e){return e.replace(/[^\x00-\xff]/g,"__").length},setEncryptList:function(e,t,n){var r=[],a=t,i=/.{40}/g,o=a.match(i);o.push(a.substring(o.join("").length));for(var u=0;u<o.length;u++){var c=this.getRealLen(o[u]);if(c>116)for(var s=this.setEncryptList(e,o[u],c),f=0;f<s.length;f++)r.push(s[f]);else r.push(this.setEncrypt(e,o[u]))}return r},setEncrypt:function(e,t){var n=new r.default;return n.setPublicKey(e),n.encrypt(t)},setLongEncrypt:function(e,t){var n=t,r=/.{116}/g,a=n.match(r);a.push(n.substring(a.join("").length));for(var i=[],o=0;o<a.length;o++){var u=this.getRealLen(a[o]);if(u>116)for(var c=this.setEncryptList(e,a[o],u),s=0;s<c.length;s++)i.push(c[s]);else i.push(this.setEncrypt(e,a[o]))}return i},setDecryptArray:function(e,t){for(var n="",r=0;r<t.length;r++)n+=this.setDecrypt(e,t[r]);return n},setDecrypt:function(e,t){var n=new r.default;return n.setPrivateKey(e),n.decrypt(t)}};t.default=i},f8e4:function(e,t,n){"use strict";n.r(t);var r=n("7e1d"),a=n("b16b");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var o,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);t["default"]=c.exports}},[["8305","common/runtime","common/vendor"]]]);