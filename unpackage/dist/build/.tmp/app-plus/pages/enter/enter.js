(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/enter/enter"],{1268:function(t,e,n){"use strict";(function(t){n("6857"),n("921b");r(n("66fd"));var e=r(n("140b"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"140b":function(t,e,n){"use strict";n.r(e);var r=n("622d"),i=n("3beb");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("a6af");var o,u=n("f0c5"),s=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=s.exports},"217e":function(t,e,n){"use strict";n.r(e);var r=n("5ba8"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},"3beb":function(t,e,n){"use strict";n.r(e);var r=n("aa4a"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},"5ba8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("aed1"));function i(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{}},methods:{},getRealLen:function(t){return t.replace(/[^\x00-\xff]/g,"__").length},setEncryptList:function(t,e,n){var r=[],i=e,a=/.{40}/g,o=i.match(a);o.push(i.substring(o.join("").length));for(var u=0;u<o.length;u++){var s=this.getRealLen(o[u]);if(s>116)for(var c=this.setEncryptList(t,o[u],s),l=0;l<c.length;l++)r.push(c[l]);else r.push(this.setEncrypt(t,o[u]))}return r},setEncrypt:function(t,e){var n=new r.default;return n.setPublicKey(t),n.encrypt(e)},setLongEncrypt:function(t,e){var n=e,r=/.{116}/g,i=n.match(r);i.push(n.substring(i.join("").length));for(var a=[],o=0;o<i.length;o++){var u=this.getRealLen(i[o]);if(u>116)for(var s=this.setEncryptList(t,i[o],u),c=0;c<s.length;c++)a.push(s[c]);else a.push(this.setEncrypt(t,i[o]))}return a},setDecryptArray:function(t,e){for(var n="",r=0;r<e.length;r++)n+=this.setDecrypt(t,e[r]);return n},setDecrypt:function(t,e){var n=new r.default;return n.setPrivateKey(t),n.decrypt(e)}};e.default=a},"622d":function(t,e,n){"use strict";var r,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}))},"73b8":function(t,e,n){},"8d8d":function(t,e,n){"use strict";var r,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}))},"9e8a":function(t,e,n){"use strict";n.r(e);var r=n("8d8d"),i=n("217e");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o,u=n("f0c5"),s=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=s.exports},a6af:function(t,e,n){"use strict";var r=n("73b8"),i=n.n(r);i.a},aa4a:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=o(n("9e8a"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r,i,a,o){try{var u=t[a](o),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}var c={onLoad:function(){t.getStorageSync("user_phone")&&(this.phone=t.getStorageSync("user_phone"));var e=t.getSystemInfoSync();this.platform=e.platform,r("log","android"==this.platform," at pages\\enter\\enter.vue:68")},onHide:function(){t.setStorageSync("loginFlag",1)},onShow:function(){var e=t.getSystemInfoSync();this.platform=e.platform},data:function(){return{phone:"",pwd:"",scrollIndex:1,cid:"",uniId:"",nickName:"",avatarUrl:"",platform:"",isYzm:!1,isYzmPlaceHoler:"请输入您的密码",getYzm:!0,countTimer:60}},methods:{handleScrollList:function(t){this.scrollIndex=t,this.pwd=""},handleGetYzm:function(){var e=s(i.default.mark((function e(){var n,o,u,s=this;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$u.test.mobile(this.phone)){e.next=2;break}return e.abrupt("return",t.showToast({icon:"none",title:"请输入正确的手机号"}));case 2:if(this.getYzm){e.next=4;break}return e.abrupt("return");case 4:return r("log",this.phone," at pages\\enter\\enter.vue:101"),n=a.default.setEncrypt(this.$api.publiukey,this.phone),e.next=8,this.$fetch(this.$api.customerPhone,{mobile:n},"GET","form");case 8:o=e.sent,r("log",o," at pages\\enter\\enter.vue:106"),this.countTimer=60,this.getYzm=!1,u=setInterval((function(){s.countTimer<=0?(clearInterval(u),s.getYzm=!0):s.countTimer--}),1e3);case 13:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),goToRegister:function(){t.navigateTo({url:"../register/register"})},goToForgetPwd:function(){t.navigateTo({url:"../my/changePwd?status=0"})},yzmLogin:function(){this.isYzm=!this.isYzm,this.isYzm?this.isYzmPlaceHoler="请输入您的验证码":this.isYzmPlaceHoler="请输入您的密码"},login:function(){var e=s(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.phone.trim()&&""!==this.pwd.trim()){e.next=3;break}return t.showToast({icon:"none",title:"请先输入手机或密码"}),e.abrupt("return");case 3:if(this.cid=plus.push.getClientInfo().clientid,!this.isYzm){e.next=10;break}return e.next=7,this.$fetch(this.$api.customer_mobile_login,{loginName:this.phone,checkCode:this.pwd,cid:this.cid},"POST","Form");case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,this.$fetch(this.$api.customerLogin,{loginName:this.phone,password:this.pwd,cid:this.cid},"POST","Form");case 12:n=e.sent;case 13:this.resMsg=n.msg,0==n.code?(t.setStorageSync("token",n.data.token),t.setStorageSync("redInfoFlag",1),t.showToast({icon:"success",title:"登录成功"}),setTimeout((function(){t.switchTab({url:"../my/my"})}),1500)):(t.showToast({icon:"none",title:n.msg}),t.setStorageSync("redInfoFlag",0));case 15:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),wxLogin:function(){var e=this;t.showLoading({title:"正在登陆中..."}),t.login({provider:"weixin",success:function(){var n=s(i.default.mark((function n(a){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r("log",a.authResult," at pages\\enter\\enter.vue:186"),e.uniId=a.authResult.unionid,t.getUserInfo({provider:"weixin",success:function(t){e.nickName=t.userInfo.nickName,e.avatarUrl=t.userInfo.avatarUrl}}),t.hideLoading(),n.next=6,e.$fetch(e.$api.customerWx,{cid:e.cid,unionId:a.authResult.unionid},"POST","FORM");case 6:o=n.sent,0!==o.code?(t.showToast({icon:"none",title:"暂未绑定手机号"}),setTimeout((function(){t.navigateTo({url:"../register/register?wxlogin=1&unionId="+e.uniId+"&nickName="+e.nickName+"&avatarUrl="+e.avatarUrl})}),1e3)):(t.setStorageSync("token",o.data.token),t.switchTab({url:"../my/my"}));case 8:case"end":return n.stop()}}),n)})));function a(t){return n.apply(this,arguments)}return a}()})}}};e.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["1268","common/runtime","common/vendor"]]]);