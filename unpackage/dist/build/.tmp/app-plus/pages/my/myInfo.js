(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/myInfo"],{"0c74":function(e,t,a){"use strict";var n=a("ca45"),r=a.n(n);r.a},"81a4":function(e,t,a){"use strict";a.r(t);var n=a("9ec3"),r=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},"9ec3":function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(a("4795")),s=u(a("80ce"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a,n,r,s,u){try{var c=e[s](u),i=c.value}catch(o){return void a(o)}c.done?t(i):Promise.resolve(i).then(n,r)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function u(e){c(s,n,r,u,i,"next",e)}function i(e){c(s,n,r,u,i,"throw",e)}u(void 0)}))}}var o={onLoad:function(){this.initMyInfo()},data:function(){return{user:{},sexList:["男","女","保密"]}},methods:{selectedSex:function(t){var a=this;return i(r.default.mark((function n(){var s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.user.sex=a.sexList[t.detail.value],n.next=3,a.$fetch(a.$api.changeBirthday,{sex:t.detail.value},"POST","form");case 3:s=n.sent,0==s.code?e.showToast({icon:"success",title:"修改成功"}):e.showToast({title:s.msg});case 5:case"end":return n.stop()}}),n)})))()},bindDateChange:function(t){var a=this;return i(r.default.mark((function n(){var s,u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.detail.value,a.user.birthday=s,n.next=4,a.$fetch(a.$api.changeBirthday,{birthday:a.user.birthday},"POST","form");case 4:u=n.sent,0==u.code?e.showToast({icon:"success",title:"修改成功"}):e.showToast({title:u.msg});case 6:case"end":return n.stop()}}),n)})))()},changeUserName:function(){var t=this;return i(r.default.mark((function a(){var s;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$fetch(t.$api.changeBirthday,{userName:t.user.userName},"POST","form");case 2:s=a.sent,0==s.code?(e.showToast({icon:"success",title:"修改成功"}),e.setStorageSync("user_Name",t.user.userName)):e.showToast({title:s.msg}),n("log",s," at pages\\my\\myInfo.vue:126");case 5:case"end":return a.stop()}}),a)})))()},previewImage:function(){e.previewImage({urls:[this.user.avatar]})},goToChangePwd:function(){e.navigateTo({url:"./changePwd?status=1"})},goToBindPhone:function(){e.navigateTo({url:"./bindPhone"})},handleChoiceAvatar:function(){var t=this,a=e.getStorageSync("token");e.chooseImage({count:1,sizeType:["compressed"],success:function(n){var r=n.tempFilePaths;e.uploadFile({url:s.default+t.$api.upLoad,filePath:r[0],headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrZW4iLCJpYXQiOjE1Mzc1NTQzMDksImRhdGEiOnsidXNlcm5hbWUiOiJ4dXRvbmdiYW8iLCJpc19zdXBlcnVzZXIiOjEsImlkIjoxNywibG9naW5fdGltZSI6MTUzNzU1NDMwOX0sImV4cCI6MTUzODE1NDMwOX0.32Lys4hjjY2XRpM2r9YSmpYA798u821m_M5Tzb6wxIU","Content-Type":"application/x-www-form-urlencoded"},name:"file",header:{token:a},success:function(e){var a=JSON.parse(e.data);t.user.avatar=a.fileName,t.saveUserAvatar()}})}})},saveUserAvatar:function(){var t=this;return i(r.default.mark((function a(){var n;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$fetch(t.$api.changeAvatar,{avatar:t.user.avatar},"POST","Form");case 2:n=a.sent,t.user.avatar=s.default+t.user.avatar,0==n.code&&e.showToast({icon:"success",title:"修改成功"});case 5:case"end":return a.stop()}}),a)})))()},initMyInfo:function(){var t=this;return i(r.default.mark((function a(){var n,u,c,i;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.getStorageSync("token"),n||(t.user={}),a.next=4,t.$fetch(t.$api.currentUser,{},"GET","form");case 4:u=a.sent,0===u.code?(t.user=u.data,t.user.avatar&&(c=t.user.avatar.indexOf("http"),-1==c&&(t.user.avatar=s.default+t.user.avatar)),i=Number(t.user.sex),t.user.sex=t.sexList[i]):e.showToast({icon:"none",title:u.msg});case 6:case"end":return a.stop()}}),a)})))()}}};t.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},accf:function(e,t,a){"use strict";var n,r=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return n}))},b372:function(e,t,a){"use strict";(function(e){a("7207"),a("921b");n(a("66fd"));var t=n(a("d766"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},ca45:function(e,t,a){},d766:function(e,t,a){"use strict";a.r(t);var n=a("accf"),r=a("81a4");for(var s in r)"default"!==s&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a("0c74");var u,c=a("f0c5"),i=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=i.exports}},[["b372","common/runtime","common/vendor"]]]);