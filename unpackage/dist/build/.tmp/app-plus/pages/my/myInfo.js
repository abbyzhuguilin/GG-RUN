(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/myInfo"],{1979:function(t,e,n){},"1e3b":function(t,e,n){"use strict";var a=n("1979"),r=n.n(a);r.a},"3f7b":function(t,e,n){"use strict";n.r(e);var a=n("a805"),r=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=r.a},7278:function(t,e,n){"use strict";var a,r=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}))},"936c":function(t,e,n){"use strict";n.r(e);var a=n("7278"),r=n("3f7b");for(var s in r)"default"!==s&&function(t){n.d(e,t,(function(){return r[t]}))}(s);n("1e3b");var i,u=n("f0c5"),c=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=c.exports},a805:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("a34a")),s=i(n("14ad"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,a,r,s,i){try{var u=t[s](i),c=u.value}catch(o){return void n(o)}u.done?e(c):Promise.resolve(c).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var s=t.apply(e,n);function i(t){u(s,a,r,i,c,"next",t)}function c(t){u(s,a,r,i,c,"throw",t)}i(void 0)}))}}var o={onLoad:function(){this.initMyInfo()},data:function(){return{user:{},sexList:["男","女","保密"]}},methods:{selectedSex:function(){var e=c(r.default.mark((function e(n){var a;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.user.sex=this.sexList[n.detail.value],e.next=3,this.$fetch(this.$api.changeBirthday,{sex:n.detail.value},"POST","form");case 3:a=e.sent,0==a.code?t.showToast({icon:"success",title:"修改成功"}):t.showToast({title:a.msg});case 5:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),bindDateChange:function(){var e=c(r.default.mark((function e(n){var a,s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.detail.value,this.user.birthday=a,e.next=4,this.$fetch(this.$api.changeBirthday,{birthday:this.user.birthday},"POST","form");case 4:s=e.sent,0==s.code?t.showToast({icon:"success",title:"修改成功"}):t.showToast({title:s.msg});case 6:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),changeUserName:function(){var e=c(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.changeBirthday,{userName:this.user.userName},"POST","form");case 2:n=e.sent,0==n.code?(t.showToast({icon:"success",title:"修改成功"}),t.setStorageSync("user_Name",this.user.userName)):t.showToast({title:n.msg}),a("log",n," at pages\\my\\myInfo.vue:125");case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),previewImage:function(){t.previewImage({urls:[this.user.avatar]})},goToChangePwd:function(){t.navigateTo({url:"./changePwd?status=1"})},goToBindPhone:function(){t.navigateTo({url:"./bindPhone"})},handleChoiceAvatar:function(){var e=this,n=t.getStorageSync("token");t.chooseImage({count:1,sizeType:["compressed"],success:function(a){var r=a.tempFilePaths;t.uploadFile({url:s.default+e.$api.upLoad,filePath:r[0],headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrZW4iLCJpYXQiOjE1Mzc1NTQzMDksImRhdGEiOnsidXNlcm5hbWUiOiJ4dXRvbmdiYW8iLCJpc19zdXBlcnVzZXIiOjEsImlkIjoxNywibG9naW5fdGltZSI6MTUzNzU1NDMwOX0sImV4cCI6MTUzODE1NDMwOX0.32Lys4hjjY2XRpM2r9YSmpYA798u821m_M5Tzb6wxIU","Content-Type":"application/x-www-form-urlencoded"},name:"file",header:{token:n},success:function(t){var n=JSON.parse(t.data);e.user.avatar=n.fileName,e.saveUserAvatar()}})}})},saveUserAvatar:function(){var e=c(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.changeAvatar,{avatar:this.user.avatar},"POST","Form");case 2:n=e.sent,this.user.avatar=s.default+this.user.avatar,0==n.code&&t.showToast({icon:"success",title:"修改成功"});case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),initMyInfo:function(){var e=c(r.default.mark((function e(){var n,a,i,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getStorageSync("token"),n||(this.user={}),e.next=4,this.$fetch(this.$api.currentUser,{},"GET","form");case 4:a=e.sent,0===a.code?(this.user=a.data,this.user.avatar&&(i=this.user.avatar.indexOf("http"),-1==i&&(this.user.avatar=s.default+this.user.avatar)),u=Number(this.user.sex),this.user.sex=this.sexList[u]):t.showToast({icon:"none",title:a.msg});case 6:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()}};e.default=o}).call(this,n("6e42")["default"],n("0de9")["default"])},e911:function(t,e,n){"use strict";(function(t){n("6857"),n("921b");a(n("66fd"));var e=a(n("936c"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["e911","common/runtime","common/vendor"]]]);