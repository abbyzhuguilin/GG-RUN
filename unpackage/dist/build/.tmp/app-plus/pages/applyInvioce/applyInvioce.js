(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/applyInvioce/applyInvioce"],{"0e7d":function(e,t,n){"use strict";var r={"uni-load-more":function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"f373"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.applyInvioceInfo,(function(t,n){var r=JSON.parse(t.startAddress),i=JSON.parse(t.startAddress),o=JSON.parse(t.startAddress),s=JSON.parse(t.startAddress),a=JSON.parse(t.endAddress),c=JSON.parse(t.endAddress),l=JSON.parse(t.endAddress),u=JSON.parse(t.endAddress);return{$orig:e.__get_orig(t),g0:r,g1:i,g2:o,g3:s,g4:a,g5:c,g6:l,g7:u}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}))},"19f9":function(e,t,n){"use strict";(function(e){n("7207"),n("921b");r(n("66fd"));var t=r(n("36f3"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},2959:function(e,t,n){},"36f3":function(e,t,n){"use strict";n.r(t);var r=n("0e7d"),i=n("90b4");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("b46a");var s,a=n("f0c5"),c=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);t["default"]=c.exports},"90b4":function(e,t,n){"use strict";n.r(t);var r=n("94f7"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"94f7":function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("4795"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return u(e)||l(e)||c(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){d(o,r,i,s,a,"next",e)}function a(e){d(o,r,i,s,a,"throw",e)}s(void 0)}))}}var h={onLoad:function(){this.initInvoiceInfo()},onShow:function(){var t=this;this.selectedList=[],this.sumArr=[],this.applyInvioceInfo.forEach((function(e){e.selected&&t.selectedList.push(e)})),e.getStorageSync("backFlag")&&(this.selectedList=[],this.sumArr=[],this.initInvoiceInfo(),e.removeStorageSync("backFlag"))},data:function(){return{currentIndex:"",applyInvioceInfo:[],isCheckAll:!1,selectedList:[],hasFlag:!1,sumArr:[]}},watch:{applyInvioceInfo:{handler:function(e){var t=0;e.forEach((function(e){e.selected&&t++})),t===e.length?this.isCheckAll=!0:this.isCheckAll=!1,0==t&&(this.isCheckAll=!1)},deep:!0}},computed:{},methods:{goToOpenInvioce:function(){var t=this;if(this.selectedList.length<=0)e.showToast({icon:"none",title:"请选择您需要申请的发票"});else{var n="";this.selectedList.forEach((function(e){n=n+","+e.id})),n=n.substr(1),this.sumArr=[],this.completePrice=0,this.selectedList.forEach((function(e){r("log",e.payAmount," at pages\\applyInvioce\\applyInvioce.vue:152"),t.sumArr.push(e.payAmount)}));for(var i=0;i<this.sumArr.length;i++)this.sumArr[i]=Number(this.sumArr[i]),this.completePrice+=this.sumArr[i];this.completePrice=parseFloat(this.completePrice).toFixed(2),this.completePrice<200?e.showToast({icon:"none",title:"开票金额最低200元"}):e.navigateTo({url:"../openInvioce/openInvioce?price="+this.completePrice+"&subString="+n})}},goToDeatail:function(t,n){var r=this;return p(i.default.mark((function o(){var s;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,r.$fetch(r.$api.orderDetail,{id:t},"POST","Form");case 2:s=i.sent,0==s.code&&e.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(s.data)+"&currentIndex="+(n-1)});case 4:case"end":return i.stop()}}),o)})))()},handleSelect:function(e,t){r("log",e.selected," at pages\\applyInvioce\\applyInvioce.vue:192"),e.selected=!e.selected;var n=this.selectedList.indexOf(e);n>-1?(this.selectedList.splice(n,1),r("log",this.selectedList," at pages\\applyInvioce\\applyInvioce.vue:201")):this.selectedList.push(e),this.selectedList.length==this.applyInvioceInfo.length?this.isCheckAll=!0:this.isCheckAll=!1},handleCheckall:function(){var e=this;this.isCheckAll=!this.isCheckAll;var t=[];this.applyInvioceInfo.forEach((function(n,r){n.selected=e.isCheckAll,t.push(n)})),this.selectedList=this.isCheckAll?t:[]},initInvoiceInfo:function(){var e=this;return p(i.default.mark((function t(){var n,o,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.orderCustomer,{status:5,invoiceFlag:0},"POST");case 2:return n=t.sent,t.next=5,e.$fetch(e.$api.orderCustomer,{status:6,invoiceFlag:0},"POST");case 5:for(o=t.sent,e.applyInvioceInfo=[].concat(s(n.rows),s(o.rows)),e.applyInvioceInfo=Array.from(e.applyInvioceInfo),a=0;a<e.applyInvioceInfo.length;a++)r("log",a," at pages\\applyInvioce\\applyInvioce.vue:249"),2==e.applyInvioceInfo[a].type&&(e.applyInvioceInfo[a].payAmount=Number(e.applyInvioceInfo[a].payAmount-e.applyInvioceInfo[a].goodsPredictAmount).toFixed(2)),JSON.parse(e.applyInvioceInfo[a].startAddress).addressDetail=JSON.parse(e.applyInvioceInfo[a].startAddress).addressDetail.replace("undefined","");case 9:case"end":return t.stop()}}),t)})))()}}};t.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},b46a:function(e,t,n){"use strict";var r=n("2959"),i=n.n(r);i.a}},[["19f9","common/runtime","common/vendor"]]]);