(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/applyInvioce/applyInvioce"],{"0375":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("a34a"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||c(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function u(e,t,n,i,r,s,o){try{var a=e[s](o),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(i,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function o(e){u(s,i,r,o,a,"next",e)}function a(e){u(s,i,r,o,a,"throw",e)}o(void 0)}))}}var d={onLoad:function(){this.initInvoiceInfo()},onShow:function(){var t=this;this.selectedList=[],this.sumArr=[],this.applyInvioceInfo.forEach((function(e){e.selected&&t.selectedList.push(e)})),e.getStorageSync("backFlag")&&(this.selectedList=[],this.sumArr=[],this.initInvoiceInfo(),e.removeStorageSync("backFlag"))},data:function(){return{currentIndex:"",applyInvioceInfo:[],isCheckAll:!1,selectedList:[],hasFlag:!1,sumArr:[]}},watch:{applyInvioceInfo:{handler:function(e){var t=0;e.forEach((function(e){e.selected&&t++})),t===e.length?this.isCheckAll=!0:this.isCheckAll=!1,0==t&&(this.isCheckAll=!1)},deep:!0}},computed:{},methods:{goToOpenInvioce:function(){var t=this;if(this.selectedList.length<=0)e.showToast({icon:"none",title:"请选择您需要申请的发票"});else{var n="";this.selectedList.forEach((function(e){n=n+","+e.id})),n=n.substr(1),this.sumArr=[],this.completePrice=0,this.selectedList.forEach((function(e){i("log",e.payAmount," at pages\\applyInvioce\\applyInvioce.vue:152"),t.sumArr.push(e.payAmount)}));for(var r=0;r<this.sumArr.length;r++)this.sumArr[r]=Number(this.sumArr[r]),this.completePrice+=this.sumArr[r];this.completePrice=parseFloat(this.completePrice).toFixed(2),this.completePrice<200?e.showToast({icon:"none",title:"开票金额最低200元"}):e.navigateTo({url:"../openInvioce/openInvioce?price="+this.completePrice+"&subString="+n})}},goToDeatail:function(){var t=p(r.default.mark((function t(n,i){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$fetch(this.$api.orderDetail,{id:n},"POST","Form");case 2:s=t.sent,0==s.code&&e.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(s.data)+"&currentIndex="+(i-1)});case 4:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}(),handleSelect:function(e,t){i("log",e.selected," at pages\\applyInvioce\\applyInvioce.vue:192"),e.selected=!e.selected;var n=this.selectedList.indexOf(e);n>-1?(this.selectedList.splice(n,1),i("log",this.selectedList," at pages\\applyInvioce\\applyInvioce.vue:201")):this.selectedList.push(e),this.selectedList.length==this.applyInvioceInfo.length?this.isCheckAll=!0:this.isCheckAll=!1},handleCheckall:function(){var e=this;this.isCheckAll=!this.isCheckAll;var t=[];this.applyInvioceInfo.forEach((function(n,i){n.selected=e.isCheckAll,t.push(n)})),this.selectedList=this.isCheckAll?t:[]},initInvoiceInfo:function(){var e=p(r.default.mark((function e(){var t,n,s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.orderCustomer,{status:5,invoiceFlag:0},"POST");case 2:return t=e.sent,e.next=5,this.$fetch(this.$api.orderCustomer,{status:6,invoiceFlag:0},"POST");case 5:for(n=e.sent,this.applyInvioceInfo=[].concat(o(t.rows),o(n.rows)),this.applyInvioceInfo=Array.from(this.applyInvioceInfo),s=0;s<this.applyInvioceInfo.length;s++)i("log",s," at pages\\applyInvioce\\applyInvioce.vue:249"),2==this.applyInvioceInfo[s].type&&(this.applyInvioceInfo[s].payAmount=Number(this.applyInvioceInfo[s].payAmount-this.applyInvioceInfo[s].goodsPredictAmount).toFixed(2)),JSON.parse(this.applyInvioceInfo[s].startAddress).addressDetail=JSON.parse(this.applyInvioceInfo[s].startAddress).addressDetail.replace("undefined","");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};t.default=d}).call(this,n("6e42")["default"],n("0de9")["default"])},"1c1d":function(e,t,n){"use strict";n.r(t);var i=n("88cc"),r=n("5178");for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("fe24");var o,a=n("f0c5"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports},5178:function(e,t,n){"use strict";n.r(t);var i=n("0375"),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=r.a},7600:function(e,t,n){},"88cc":function(e,t,n){"use strict";var i={"uni-load-more":function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"5c50"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.applyInvioceInfo,(function(t,n){var i=JSON.parse(t.startAddress),r=JSON.parse(t.startAddress),s=JSON.parse(t.startAddress),o=JSON.parse(t.startAddress),a=JSON.parse(t.endAddress),c=JSON.parse(t.endAddress),l=JSON.parse(t.endAddress),u=JSON.parse(t.endAddress);return{$orig:e.__get_orig(t),g0:i,g1:r,g2:s,g3:o,g4:a,g5:c,g6:l,g7:u}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},s=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}))},bbb4:function(e,t,n){"use strict";(function(e){n("6857"),n("921b");i(n("66fd"));var t=i(n("1c1d"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},fe24:function(e,t,n){"use strict";var i=n("7600"),r=n.n(i);r.a}},[["bbb4","common/runtime","common/vendor"]]]);