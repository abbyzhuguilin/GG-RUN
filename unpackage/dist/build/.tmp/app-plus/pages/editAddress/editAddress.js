(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editAddress/editAddress"],{2077:function(e,s,t){"use strict";(function(e){t("6857"),t("921b");i(t("66fd"));var s=i(t("2100"));function i(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,t("6e42")["createPage"])},2100:function(e,s,t){"use strict";t.r(s);var i=t("cf9b"),d=t("3c75");for(var r in d)"default"!==r&&function(e){t.d(s,e,(function(){return d[e]}))}(r);t("2e15");var a,n=t("f0c5"),o=Object(n["a"])(d["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);s["default"]=o.exports},"2e15":function(e,s,t){"use strict";var i=t("37a4"),d=t.n(i);d.a},"37a4":function(e,s,t){},"3c75":function(e,s,t){"use strict";t.r(s);var i=t("c5d0"),d=t.n(i);for(var r in i)"default"!==r&&function(e){t.d(s,e,(function(){return i[e]}))}(r);s["default"]=d.a},c5d0:function(e,s,t){"use strict";(function(e,i){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=a(t("a34a")),r=a(t("517e"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,s,t,i,d,r,a){try{var n=e[r](a),o=n.value}catch(u){return void t(u)}n.done?s(o):Promise.resolve(o).then(i,d)}function o(e){return function(){var s=this,t=arguments;return new Promise((function(i,d){var r=e.apply(s,t);function a(e){n(r,i,d,a,o,"next",e)}function o(e){n(r,i,d,a,o,"throw",e)}a(void 0)}))}}var u={onLoad:function(s){var t=e.getSystemInfoSync();if(i("log",t," at pages\\editAddress\\editAddress.vue:81"),this.platInfoOS=t.platform,void 0==s.addressDetail&&(s.addressDetail=""),0==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),0==s.addressInfo||0==s.status?e.setNavigationBarTitle({title:"发件地址填写"}):1==s.addressInfo||1==s.status?e.setNavigationBarTitle({title:"收件地址填写"}):3==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),this.status=s.status,this.addressInfo=s.addressInfo,0==s.addressInfo&&1==s.addressInfo||(this.addressInfo=JSON.parse(s.addressInfo),i("log",this.addressInfo," at pages\\editAddress\\editAddress.vue:119"),"undefined"==this.addressInfo.addressDetail&&(this.addressInfo.addressDetail=""),this.userName=this.addressInfo.name,this.userPhone=this.addressInfo.mobile,this.addressInfo.addressDetail instanceof Array?(i("log",this.addressInfo.addressDetail," at pages\\editAddress\\editAddress.vue:127"),this.editAddress.name=this.addressInfo.addressDetail[2],this.editAddress.address=this.addressInfo.addressDetail[0],this.editAddress.latitude=this.addressInfo.latitude.split(",")[1],this.editAddress.longitude=this.addressInfo.latitude.split(",")[0],this.detailAddress=this.addressInfo.addressDetail[1],"undefined"===this.detailAddress&&(this.detailAddress="")):(this.editAddress=this.addressInfo.editAddress,this.detailAddress=this.addressInfo.addressDetail,"undefined"===this.detailAddress&&(this.detailAddress="")),this.city=this.addressInfo.city,this.province=this.addressInfo.province,this.area=this.addressInfo.area,this.addressLongitude=this.addressInfo.latitude,this.orderId=this.addressInfo.id,this.extensionNumber=this.addressInfo.extensionNumber),""!==s.ftSendAddress){var d=JSON.parse(s.ftSendAddress);this.editAddress={},this.editAddress.name=d.titleName,this.editAddress.address=d.addressname,this.editAddress.latitude=d.location.split(",")[1],this.editAddress.longitude=d.location.split(",")[0]}},onUnload:function(){e.hideKeyboard()},data:function(){return{showSpeak:!1,voicePath:"",platInfoOS:"",value:"",addressStatus:"",newAddressStatus:"",editId:"",circleIndex:!0,editAddress:{name:"",address:"",latitude:"",longitude:""},userName:"",userPhone:"",detailAddress:"",province:"",city:"",area:"",defaultFlag:0,addressLongitude:"",addressInfo:"",allTitle:"",orderId:"",status:"",checkPhone:"",autoFill:"",autoFillLatitude:"",holder:"粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。",nstartSendAddress:{},baseAudio:"",accessToken:"",saySpeakPopFlag:!1,saySpeakText:"",extensionNumber:"",point:{point:{},city:"",address:"",name:""}}},watch:{point:{deep:!0,handler:function(s){var t=this;i("log",s," at pages\\editAddress\\editAddress.vue:240"),this.editAddress={},i("log",this.editAddress," at pages\\editAddress\\editAddress.vue:242"),this.$set(this.editAddress,"longitude",s.point.longitude),this.$set(this.editAddress,"latitude",s.point.latitude),this.$set(this.editAddress,"name",s.name),this.$set(this.editAddress,"address",s.address),i("log","更新",s," at pages\\editAddress\\editAddress.vue:249"),e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.point.longitude+","+s.point.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){i("log",e," at pages\\editAddress\\editAddress.vue:254"),t.province=e.data.regeocode.addressComponent.province,t.city=e.data.regeocode.addressComponent.city,t.area=e.data.regeocode.addressComponent.district}})}}},methods:{clearTextAreaValue:function(){this.autoFill="",this.saySpeakText=""},ceshiDemo:function(){i("log","1231313213123213213"," at pages\\editAddress\\editAddress.vue:285")},saveOver:function(){var s=this;e.showLoading({title:"识别中"}),setTimeout((function(){plus.speech.stopRecognize(),s.autoFill+=s.saySpeakText,s.saySpeakPopFlag=!1,e.hideLoading()}),1500)},saySpeak:function(){var e=o(d.default.mark((function e(){var s,t,r;return d.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saySpeakPopFlag=!0,e.next=3,this.checkPermission();case 3:if(s=e.sent,1===s){e.next=6;break}return e.abrupt("return");case 6:t={},r=this,t.engine="baidu",t.continue=!0,t.userInterface=!1,plus.speech.addEventListener("recognizing",(function(e){r.saySpeakText=e.partialResult})),plus.speech.startRecognize(t,(function(e){i("log",e," at pages\\editAddress\\editAddress.vue:329"),e!=r.saySpeakText&&(r.saySpeakText="",r.saySpeakText+=e)}),(function(e){i("log","语音识别失败："+e.message," at pages\\editAddress\\editAddress.vue:337")}));case 13:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),checkPermission:function(){var s=o(d.default.mark((function s(){var t;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!r.default.isIOS){s.next=6;break}return s.next=3,r.default.requestIOS("record");case 3:s.t0=s.sent,s.next=9;break;case 6:return s.next=8,r.default.requestAndroid("android.permission.RECORD_AUDIO");case 8:s.t0=s.sent;case 9:return t=s.t0,null===t||1===t?t=1:2===t?e.showModal({content:"系统麦克风已关闭",confirmText:"确定",showCancel:!1,success:function(e){}}):e.showModal({content:"需要麦克风权限",confirmText:"设置",success:function(e){e.confirm&&r.default.gotoAppSetting()}}),s.abrupt("return",t);case 12:case"end":return s.stop()}}),s)})));function t(){return s.apply(this,arguments)}return t}(),sayFn:function(){i("log","111111"," at pages\\editAddress\\editAddress.vue:372"),this.showSpeak=!0,recorderManager.start()},endSay:function(){i("log","2222"," at pages\\editAddress\\editAddress.vue:377"),this.showSpeak=!1,recorderManager.stop()},shibieYuYin:function(){this.autoFillFn()},saveAddress:function(){this.circleIndex=!this.circleIndex,this.circleIndex?this.defaultFlag=0:this.defaultFlag=1,i("log",this.defaultFlag," at pages\\editAddress\\editAddress.vue:392")},clearForm:function(){this.userName="",this.userPhone="",this.editAddress={},this.detailAddress=""},getContacts:function(){e.showLoading({title:"读取中"});var s=this;if("Android"==plus.os.name)plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE,(function(t){var i=1e3,d=plus.android.runtimeMainActivity(),r=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.provider.ContactsContract"),n=new r(r.ACTION_PICK,a.Contacts.CONTENT_URI);e.hideLoading(),d.onActivityResult=function(e,t,r){if(i==e){var n="",o=d;plus.android.importClass(r);var u=r.getData(),l=o.getContentResolver();plus.android.importClass(l);var h=l.query(u,null,null,null,null);plus.android.importClass(h),h.moveToFirst();var c=h.getString(h.getColumnIndex(a.Contacts.DISPLAY_NAME))||"",p=h.getString(h.getColumnIndex(a.Contacts._ID)),g=l.query(a.CommonDataKinds.Phone.CONTENT_URI,null,a.CommonDataKinds.Phone.CONTACT_ID+" = "+p,null,null);g.moveToNext()&&(n=g.getString(g.getColumnIndex(a.CommonDataKinds.Phone.NUMBER))),n=n.replace(/\s/g,""),n=n.replace(/-/g,""),s.userName=c,s.userPhone=n,callBack&&callBack(c,n),h.close(),g.close()}},d.startActivityForResult(n,i)}));else{var t=plus.ios.newObject("ABPeoplePickerNavigationController");i("log",2," at pages\\editAddress\\editAddress.vue:454"),e.hideLoading();var d=plus.ios.implements("ABPeoplePickerNavigationControllerDelegate",{"peoplePickerNavigationController:didSelectPerson:":function(e,t){i("log",JSON.stringify(e)," at pages\\editAddress\\editAddress.vue:461"),i("log",JSON.stringify(t)," at pages\\editAddress\\editAddress.vue:462"),i("log",typeof t," at pages\\editAddress\\editAddress.vue:463");var d=e,r="",a=d.plusGetAttribute("familyName"),n=d.plusGetAttribute("givenName");r=a+n;var o="",u=d.plusGetAttribute("phoneNumbers");if(u.plusGetAttribute("count")>0){var l=u.plusGetAttribute("firstObject"),h=l.plusGetAttribute("value");o=h.plusGetAttribute("stringValue")}i("log",r,o," at pages\\editAddress\\editAddress.vue:482"),o=o.replace(/\s/g,""),o=o.replace(/-/g,""),s.userName=r,s.userPhone=o,i("log",s.userName,s.userPhone," at pages\\editAddress\\editAddress.vue:487"),callBack&&callBack(r,o)}});plus.ios.invoke(t,"setPeoplePickerDelegate:",d);var r=plus.ios.importClass("UIApplication"),a=r.sharedApplication(),n=plus.ios.invoke(a,"delegate"),o=plus.ios.invoke(n,"window"),u=plus.ios.invoke(o,"rootViewController");plus.ios.invoke(u,"presentViewController:animated:completion:",t,!0,null)}},insertStr:function(e,s,t){return e.slice(0,s)+t+e.slice(s)},autoFillFn:function(){var s=this;if(i("log",this.autoFill.indexOf("1")," at pages\\editAddress\\editAddress.vue:513"),-1!=this.autoFill.indexOf("1")){var t=this.autoFill.indexOf("1");this.autoFill.substring(t,t+11);this.autoFill=this.insertStr(this.autoFill,t," "),this.autoFill=this.insertStr(this.autoFill,t+12," ")}i("log",this.autoFill," at pages\\editAddress\\editAddress.vue:545");var d=this.smartParse(this.autoFill);if(i("log",d," at pages\\editAddress\\editAddress.vue:547"),""!==this.autoFill.trim()){this.userName=d.name,this.userPhone=""+d.phone,this.province=d.province,this.city=d.city,this.area=d.county,this.detailAddress=d.address;var r=d.address,a=this;e.request({url:"https://restapi.amap.com/v3/geocode/geo?address="+this.province+this.city+this.area+r+"&output=JSON&key=6223011d1e55de8ee9d00617ee5270c2",method:"GET",success:function(t){if(i("log",t," at pages\\editAddress\\editAddress.vue:566"),0==t.data.geocodes.length)return e.showToast({icon:"none",title:"暂未识别到地址"});s.autoFillLatitude=t.data.geocodes[0].location,s.editAddress={},e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.autoFillLatitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",method:"GET",success:function(e){0==e.data.regeocode.aois.length?(s.$set(a.editAddress,"name",e.data.regeocode.pois[1].address),s.$set(a.editAddress,"address",e.data.regeocode.formatted_address),s.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),s.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1])):(s.$set(a.editAddress,"name",e.data.regeocode.aois[0].name),s.$set(a.editAddress,"address",e.data.regeocode.formatted_address),s.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),s.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1]))}})}})}},focusAutoFill:function(){this.holder="粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。例如:G小哥,132****0000,广东省深圳市南山区某某街道某某大厦001号"},openMap:function(){e.navigateTo({url:"../choose-location/choose-location",animationType:"slide-in-bottom"})},checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,i("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:645"),!0):(this.checkPhone=!0,i("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:649"),!1)},submitAddress:function(){var s=o(d.default.mark((function s(){var t,r,a,n,o,u,l,h,c,p,g;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i("log",this.userName," at pages\\editAddress\\editAddress.vue:662"),e.removeStorageSync("helpMeBuy"),e.removeStorageSync("helpMeGet"),this.$u.test.mobile(this.userPhone)){s.next=5;break}return s.abrupt("return",e.showToast({icon:"none",title:"手机号码填写错误，请检查"}));case 5:if(void 0!=this.userName){s.next=7;break}return s.abrupt("return",e.showToast({icon:"none",title:"请填写姓名"}));case 7:if(""!=this.userName.trim()){s.next=9;break}return s.abrupt("return",e.showToast({icon:"none",title:"请填写姓名"}));case 9:if(""!=this.userName&&""!=this.userPhone&&""!=this.editAddress.name){s.next=11;break}return s.abrupt("return",e.showToast({icon:"none",title:"姓名/手机/地址必须填写"}));case 11:if(""!=this.userPhone.trim()){s.next=13;break}return s.abrupt("return",e.showToast({icon:"none",title:"请填写手机号"}));case 13:if(i("log",this.editAddress," at pages\\editAddress\\editAddress.vue:699"),"{}"!=JSON.stringify(this.editAddress)){s.next=16;break}return s.abrupt("return",e.showToast({icon:"none",title:"请先选择您的地址"}));case 16:if(this.addressLongitude=this.editAddress.longitude+","+this.editAddress.latitude,this.allTitle=this.editAddress.address+","+this.detailAddress+","+this.editAddress.name,void 0==this.addressDetail&&(this.addressDetail=""),0!=this.addressInfo&&1!=this.addressInfo){s.next=32;break}if(void 0!=this.detailAddress&&""!=this.detailAddress||(this.detailAddress=""),0!=this.defaultFlag){s.next=29;break}return s.next=24,this.$fetch(this.$api.addAddress,{addressDetail:this.allTitle,area:this.area,city:this.city,defaultFlag:1,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,extensionNumber:this.extensionNumber},"POST","form");case 24:s.sent,0==this.addressInfo&&(t={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},0!=this.status&&(i("log","1"," at pages\\editAddress\\editAddress.vue:748"),e.setStorageSync("canClickflag",!0),e.setStorageSync("sendAddress",JSON.stringify(t)),e.setStorageSync("clickAddressFlag",!0))),1==this.addressInfo&&(void 0==this.detailAddress&&(this.detailAddress=""),r={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(r))),s.next=32;break;case 29:void 0==this.detailAddress&&(this.detailAddress=""),0==this.addressInfo&&(a={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},i("log","2"," at pages\\editAddress\\editAddress.vue:800"),e.setStorageSync("canClickflag",!0),e.setStorageSync("sendAddress",JSON.stringify(a)),e.setStorageSync("clickAddressFlag",!0)),1==this.addressInfo&&(void 0==this.detailAddress&&(this.detailAddress=""),n={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(n)));case 32:if(3!=this.status&&0!=this.status&&1!=this.status){s.next=55;break}if(void 0==this.detailAddress&&(this.detailAddress=""),this.addressLongitude=this.editAddress.longitude+","+this.editAddress.latitude,this.allTitle=this.editAddress.address+","+this.detailAddress+","+this.editAddress.name,""==this.orderId||void 0==this.orderId){s.next=43;break}return s.next=39,this.$fetch(this.$api.updateAddress,{addressDetail:this.allTitle,area:this.area,city:this.city,defaultFlag:1,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,id:this.orderId,extensionNumber:this.extensionNumber},"POST","form");case 39:o=s.sent,0==o.code&&(0==this.status&&(void 0==this.detailAddress&&(this.detailAddress=""),i("log",this.addressLongitude," at pages\\editAddress\\editAddress.vue:862"),u={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},i("log","3"," at pages\\editAddress\\editAddress.vue:875"),e.setStorageSync("canClickflag",!0),e.setStorageSync("sendAddress",JSON.stringify(u)),e.setStorageSync("clickAddressFlag",!0)),1==this.status&&(void 0==this.detailAddress&&(this.detailAddress=""),l={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(l)))),s.next=55;break;case 43:if(0!=this.defaultFlag){s.next=52;break}if(""===this.addressInfo){s.next=50;break}return s.next=47,this.$fetch(this.$api.addAddress,{addressDetail:this.allTitle,area:this.area,city:this.city,defaultFlag:1,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,extensionNumber:this.extensionNumber},"POST","form");case 47:s.sent,0==this.status&&(h={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},i("log","4"," at pages\\editAddress\\editAddress.vue:935"),i("log",e.getStorageSync("noSetSend")," at pages\\editAddress\\editAddress.vue:936"),e.getStorageSync("noSetSend")||(e.setStorageSync("canClickflag",!0),e.setStorageSync("sendAddress",JSON.stringify(h)),e.setStorageSync("newAddressFlag",!0),e.setStorageSync("clickAddressFlag",!0),e.removeStorageSync("noSetSend"))),1==this.status&&(void 0==this.detailAddress&&(this.detailAddress=""),c={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(c)));case 50:s.next=55;break;case 52:void 0==this.detailAddress&&(this.detailAddress=""),0==this.status&&(p={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},i("log","5"," at pages\\editAddress\\editAddress.vue:994"),e.setStorageSync("canClickflag",!0),e.setStorageSync("sendAddress",JSON.stringify(p)),e.setStorageSync("clickAddressFlag",!0)),1==this.status&&(void 0==this.detailAddress&&(this.detailAddress=""),g={addressDetail:this.detailAddress,latitude:this.addressLongitude,mobile:this.userPhone,name:this.userName,province:this.province,editAddress:this.editAddress,city:this.city,area:this.area,orderId:this.orderId,extensionNumber:this.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(g)));case 55:e.navigateBack({delta:1});case 56:case"end":return s.stop()}}),s,this)})));function t(){return s.apply(this,arguments)}return t}()}};s.default=u}).call(this,t("6e42")["default"],t("0de9")["default"])},cf9b:function(e,s,t){"use strict";var i={"u-popup":function(){return t.e("node-modules/uview-ui/components/u-popup/u-popup").then(t.bind(null,"7b3a"))}},d=function(){var e=this,s=e.$createElement;e._self._c},r=[];t.d(s,"b",(function(){return d})),t.d(s,"c",(function(){return r})),t.d(s,"a",(function(){return i}))}},[["2077","common/runtime","common/vendor"]]]);