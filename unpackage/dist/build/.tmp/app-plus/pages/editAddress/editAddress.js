(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editAddress/editAddress"],{1020:function(e,s,t){"use strict";(function(e){t("7207"),t("921b");d(t("66fd"));var s=d(t("126b"));function d(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,t("6e42")["createPage"])},"126b":function(e,s,t){"use strict";t.r(s);var d=t("a585"),r=t("dcd9");for(var i in r)"default"!==i&&function(e){t.d(s,e,(function(){return r[e]}))}(i);t("cff6");var a,n=t("f0c5"),o=Object(n["a"])(r["default"],d["b"],d["c"],!1,null,null,null,!1,d["a"],a);s["default"]=o.exports},"5c8b":function(e,s,t){},"6e4d":function(e,s,t){"use strict";(function(e,d){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=a(t("4795")),i=a(t("4d38"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,s,t,d,r,i,a){try{var n=e[i](a),o=n.value}catch(u){return void t(u)}n.done?s(o):Promise.resolve(o).then(d,r)}function o(e){return function(){var s=this,t=arguments;return new Promise((function(d,r){var i=e.apply(s,t);function a(e){n(i,d,r,a,o,"next",e)}function o(e){n(i,d,r,a,o,"throw",e)}a(void 0)}))}}var u={onLoad:function(s){var t=e.getSystemInfoSync();if(d("log",t," at pages\\editAddress\\editAddress.vue:79"),this.platInfoOS=t.platform,void 0==s.addressDetail&&(s.addressDetail=""),0==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),0==s.addressInfo||0==s.status?e.setNavigationBarTitle({title:"发件地址填写"}):1==s.addressInfo||1==s.status?e.setNavigationBarTitle({title:"收件地址填写"}):3==s.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),this.status=s.status,this.addressInfo=s.addressInfo,0==s.addressInfo&&1==s.addressInfo||(this.addressInfo=JSON.parse(s.addressInfo),d("log",this.addressInfo," at pages\\editAddress\\editAddress.vue:117"),"undefined"==this.addressInfo.addressDetail&&(this.addressInfo.addressDetail=""),this.userName=this.addressInfo.name,this.userPhone=this.addressInfo.mobile,this.addressInfo.addressDetail instanceof Array?(d("log",this.addressInfo.addressDetail," at pages\\editAddress\\editAddress.vue:125"),this.editAddress.name=this.addressInfo.addressDetail[2],this.editAddress.address=this.addressInfo.addressDetail[0],this.editAddress.latitude=this.addressInfo.latitude.split(",")[1],this.editAddress.longitude=this.addressInfo.latitude.split(",")[0],this.detailAddress=this.addressInfo.addressDetail[1],"undefined"===this.detailAddress&&(this.detailAddress="")):(this.editAddress=this.addressInfo.editAddress,this.detailAddress=this.addressInfo.addressDetail,"undefined"===this.detailAddress&&(this.detailAddress="")),this.city=this.addressInfo.city,this.province=this.addressInfo.province,this.area=this.addressInfo.area,this.addressLongitude=this.addressInfo.latitude,this.orderId=this.addressInfo.id,this.extensionNumber=this.addressInfo.extensionNumber),""!==s.ftSendAddress){var r=JSON.parse(s.ftSendAddress);this.editAddress={},this.editAddress.name=r.titleName,this.editAddress.address=r.addressname,this.editAddress.latitude=r.location.split(",")[1],this.editAddress.longitude=r.location.split(",")[0]}},onUnload:function(){e.hideKeyboard()},data:function(){return{showSpeak:!1,voicePath:"",platInfoOS:"",value:"",addressStatus:"",newAddressStatus:"",editId:"",circleIndex:!0,editAddress:{name:"",address:"",latitude:"",longitude:""},userName:"",userPhone:"",detailAddress:"",province:"",city:"",area:"",defaultFlag:0,addressLongitude:"",addressInfo:"",allTitle:"",orderId:"",status:"",checkPhone:"",autoFill:"",autoFillLatitude:"",holder:"粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。",nstartSendAddress:{},baseAudio:"",accessToken:"",saySpeakPopFlag:!1,saySpeakText:"",extensionNumber:""}},methods:{clearTextAreaValue:function(){this.autoFill="",this.saySpeakText=""},ceshiDemo:function(){d("log","1231313213123213213"," at pages\\editAddress\\editAddress.vue:234")},saveOver:function(){var s=this;e.showLoading({title:"识别中"}),setTimeout((function(){plus.speech.stopRecognize(),s.autoFill+=s.saySpeakText,s.saySpeakPopFlag=!1,e.hideLoading()}),1500)},saySpeak:function(){var e=this;return o(r.default.mark((function s(){var t,i,a;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.saySpeakPopFlag=!0,s.next=3,e.checkPermission();case 3:if(t=s.sent,1===t){s.next=6;break}return s.abrupt("return");case 6:i={},a=e,i.engine="baidu",i.continue=!0,i.userInterface=!1,plus.speech.addEventListener("recognizing",(function(e){a.saySpeakText=e.partialResult})),plus.speech.startRecognize(i,(function(e){d("log",e," at pages\\editAddress\\editAddress.vue:278"),e!=a.saySpeakText&&(a.saySpeakText="",a.saySpeakText+=e)}),(function(e){d("log","语音识别失败："+e.message," at pages\\editAddress\\editAddress.vue:286")}));case 13:case"end":return s.stop()}}),s)})))()},checkPermission:function(){return o(r.default.mark((function s(){var t;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!i.default.isIOS){s.next=6;break}return s.next=3,i.default.requestIOS("record");case 3:s.t0=s.sent,s.next=9;break;case 6:return s.next=8,i.default.requestAndroid("android.permission.RECORD_AUDIO");case 8:s.t0=s.sent;case 9:return t=s.t0,null===t||1===t?t=1:2===t?e.showModal({content:"系统麦克风已关闭",confirmText:"确定",showCancel:!1,success:function(e){}}):e.showModal({content:"需要麦克风权限",confirmText:"设置",success:function(e){e.confirm&&i.default.gotoAppSetting()}}),s.abrupt("return",t);case 12:case"end":return s.stop()}}),s)})))()},sayFn:function(){d("log","111111"," at pages\\editAddress\\editAddress.vue:321"),this.showSpeak=!0,recorderManager.start()},endSay:function(){d("log","2222"," at pages\\editAddress\\editAddress.vue:326"),this.showSpeak=!1,recorderManager.stop()},shibieYuYin:function(){this.autoFillFn()},saveAddress:function(){this.circleIndex=!this.circleIndex,this.circleIndex?this.defaultFlag=0:this.defaultFlag=1,d("log",this.defaultFlag," at pages\\editAddress\\editAddress.vue:341")},clearForm:function(){this.userName="",this.userPhone="",this.editAddress={},this.detailAddress=""},getContacts:function(){e.showLoading({title:"读取中"});var s=this;if("Android"==plus.os.name)plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE,(function(t){var d=1e3,r=plus.android.runtimeMainActivity(),i=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.provider.ContactsContract"),n=new i(i.ACTION_PICK,a.Contacts.CONTENT_URI);e.hideLoading(),r.onActivityResult=function(e,t,i){if(d==e){var n="",o=r;plus.android.importClass(i);var u=i.getData(),l=o.getContentResolver();plus.android.importClass(l);var c=l.query(u,null,null,null,null);plus.android.importClass(c),c.moveToFirst();var p=c.getString(c.getColumnIndex(a.Contacts.DISPLAY_NAME))||"",A=c.getString(c.getColumnIndex(a.Contacts._ID)),g=l.query(a.CommonDataKinds.Phone.CONTENT_URI,null,a.CommonDataKinds.Phone.CONTACT_ID+" = "+A,null,null);g.moveToNext()&&(n=g.getString(g.getColumnIndex(a.CommonDataKinds.Phone.NUMBER))),n=n.replace(/\s/g,""),n=n.replace(/-/g,""),s.userName=p,s.userPhone=n,callBack&&callBack(p,n),c.close(),g.close()}},r.startActivityForResult(n,d)}));else{var t=plus.ios.newObject("ABPeoplePickerNavigationController");d("log",2," at pages\\editAddress\\editAddress.vue:403"),e.hideLoading();var r=plus.ios.implements("ABPeoplePickerNavigationControllerDelegate",{"peoplePickerNavigationController:didSelectPerson:":function(e,t){d("log",JSON.stringify(e)," at pages\\editAddress\\editAddress.vue:410"),d("log",JSON.stringify(t)," at pages\\editAddress\\editAddress.vue:411"),d("log",typeof t," at pages\\editAddress\\editAddress.vue:412");var r=e,i="",a=r.plusGetAttribute("familyName"),n=r.plusGetAttribute("givenName");i=a+n;var o="",u=r.plusGetAttribute("phoneNumbers");if(u.plusGetAttribute("count")>0){var l=u.plusGetAttribute("firstObject"),c=l.plusGetAttribute("value");o=c.plusGetAttribute("stringValue")}d("log",i,o," at pages\\editAddress\\editAddress.vue:431"),o=o.replace(/\s/g,""),o=o.replace(/-/g,""),s.userName=i,s.userPhone=o,d("log",s.userName,s.userPhone," at pages\\editAddress\\editAddress.vue:436"),callBack&&callBack(i,o)}});plus.ios.invoke(t,"setPeoplePickerDelegate:",r);var i=plus.ios.importClass("UIApplication"),a=i.sharedApplication(),n=plus.ios.invoke(a,"delegate"),o=plus.ios.invoke(n,"window"),u=plus.ios.invoke(o,"rootViewController");plus.ios.invoke(u,"presentViewController:animated:completion:",t,!0,null)}},insertStr:function(e,s,t){return e.slice(0,s)+t+e.slice(s)},autoFillFn:function(){var s=this;if(d("log",this.autoFill.indexOf("1")," at pages\\editAddress\\editAddress.vue:462"),-1!=this.autoFill.indexOf("1")){var t=this.autoFill.indexOf("1");this.autoFill.substring(t,t+11);this.autoFill=this.insertStr(this.autoFill,t," "),this.autoFill=this.insertStr(this.autoFill,t+12," ")}d("log",this.autoFill," at pages\\editAddress\\editAddress.vue:494");var r=this.smartParse(this.autoFill);if(d("log",r," at pages\\editAddress\\editAddress.vue:496"),""!==this.autoFill.trim()){this.userName=r.name,this.userPhone=""+r.phone,this.province=r.province,this.city=r.city,this.area=r.county,this.detailAddress=r.address;var i=r.address,a=this;e.request({url:"https://restapi.amap.com/v3/geocode/geo?address="+this.province+this.city+this.area+i+"&output=JSON&key=6223011d1e55de8ee9d00617ee5270c2",method:"GET",success:function(t){if(d("log",t," at pages\\editAddress\\editAddress.vue:515"),0==t.data.geocodes.length)return e.showToast({icon:"none",title:"暂未识别到地址"});s.autoFillLatitude=t.data.geocodes[0].location,s.editAddress={},e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.autoFillLatitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",method:"GET",success:function(e){0==e.data.regeocode.aois.length?(s.$set(a.editAddress,"name",e.data.regeocode.pois[1].address),s.$set(a.editAddress,"address",e.data.regeocode.formatted_address),s.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),s.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1])):(s.$set(a.editAddress,"name",e.data.regeocode.aois[0].name),s.$set(a.editAddress,"address",e.data.regeocode.formatted_address),s.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),s.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1]))}})}})}},focusAutoFill:function(){this.holder="粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。例如:G小哥,132****0000,广东省深圳市南山区某某街道某某大厦001号"},openMap:function(){var s=this,t=this;e.chooseLocation({success:function(r){s.editAddress=r,t.editAddress&&e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+t.editAddress.longitude+","+t.editAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===t.editAddress.name&&(d("log",e.data.regeocode," at pages\\editAddress\\editAddress.vue:565"),e.data.regeocode.aois.length?t.editAddress.name=e.data.regeocode.aois[0].name:t.editAddress.name=e.data.regeocode.pois[0].name),t.editAddress.address=e.data.regeocode.formatted_address,t.province=e.data.regeocode.addressComponent.province,t.city=e.data.regeocode.addressComponent.city,t.area=e.data.regeocode.addressComponent.district}})}})},checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,d("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:590"),!0):(this.checkPhone=!0,d("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:594"),!1)},submitAddress:function(){var s=this;return o(r.default.mark((function t(){var i,a,n,o,u,l,c,p,A,g,f;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.removeStorageSync("helpMeBuy"),e.removeStorageSync("helpMeGet"),s.$u.test.mobile(s.userPhone)){t.next=4;break}return t.abrupt("return",e.showToast({icon:"none",title:"手机号码填写错误，请检查"}));case 4:if(""!=s.userName.trim()){t.next=6;break}return t.abrupt("return",e.showToast({icon:"none",title:"请填写姓名"}));case 6:if(""!=s.userName&&""!=s.userPhone&&""!=s.editAddress.name){t.next=8;break}return t.abrupt("return",e.showToast({icon:"none",title:"姓名/手机/地址必须填写"}));case 8:if(""!=s.userPhone.trim()){t.next=10;break}return t.abrupt("return",e.showToast({icon:"none",title:"请填写手机号"}));case 10:if(s.addressLongitude=s.editAddress.longitude+","+s.editAddress.latitude,s.allTitle=s.editAddress.address+","+s.detailAddress+","+s.editAddress.name,void 0==s.addressDetail&&(s.addressDetail=""),0!=s.addressInfo&&1!=s.addressInfo){t.next=26;break}if(void 0!=s.detailAddress&&""!=s.detailAddress||(s.detailAddress=""),0!=s.defaultFlag){t.next=23;break}return t.next=18,s.$fetch(s.$api.addAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,extensionNumber:s.extensionNumber},"POST","form");case 18:t.sent,0==s.addressInfo&&(i={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},0!=s.status&&(d("log","1"," at pages\\editAddress\\editAddress.vue:683"),e.setStorageSync("sendAddress",JSON.stringify(i)),e.setStorageSync("clickAddressFlag",!0))),1==s.addressInfo&&(void 0==s.detailAddress&&(s.detailAddress=""),a={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(a))),t.next=26;break;case 23:void 0==s.detailAddress&&(s.detailAddress=""),0==s.addressInfo&&(n={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},d("log","2"," at pages\\editAddress\\editAddress.vue:734"),e.setStorageSync("sendAddress",JSON.stringify(n)),e.setStorageSync("clickAddressFlag",!0)),1==s.addressInfo&&(void 0==s.detailAddress&&(s.detailAddress=""),o={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(o)));case 26:if(3!=s.status&&0!=s.status&&1!=s.status){t.next=49;break}if(void 0==s.detailAddress&&(s.detailAddress=""),s.addressLongitude=s.editAddress.longitude+","+s.editAddress.latitude,s.allTitle=s.editAddress.address+","+s.detailAddress+","+s.editAddress.name,""==s.orderId||void 0==s.orderId){t.next=37;break}return t.next=33,s.$fetch(s.$api.updateAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,id:s.orderId,extensionNumber:s.extensionNumber},"POST","form");case 33:u=t.sent,0==u.code&&(0==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),d("log",s.addressLongitude," at pages\\editAddress\\editAddress.vue:795"),l={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},d("log","3"," at pages\\editAddress\\editAddress.vue:808"),e.setStorageSync("sendAddress",JSON.stringify(l)),e.setStorageSync("clickAddressFlag",!0)),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),c={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(c)))),t.next=49;break;case 37:if(0!=s.defaultFlag){t.next=46;break}if(""===s.addressInfo){t.next=44;break}return t.next=41,s.$fetch(s.$api.addAddress,{addressDetail:s.allTitle,area:s.area,city:s.city,defaultFlag:1,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,extensionNumber:s.extensionNumber},"POST","form");case 41:t.sent,0==s.status&&(p={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},d("log","4"," at pages\\editAddress\\editAddress.vue:867"),d("log",e.getStorageSync("noSetSend")," at pages\\editAddress\\editAddress.vue:868"),e.getStorageSync("noSetSend")||(e.setStorageSync("sendAddress",JSON.stringify(p)),e.setStorageSync("newAddressFlag",!0),e.setStorageSync("clickAddressFlag",!0),e.removeStorageSync("noSetSend"))),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),A={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(A)));case 44:t.next=49;break;case 46:void 0==s.detailAddress&&(s.detailAddress=""),0==s.status&&(g={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},d("log","5"," at pages\\editAddress\\editAddress.vue:925"),e.setStorageSync("sendAddress",JSON.stringify(g)),e.setStorageSync("clickAddressFlag",!0)),1==s.status&&(void 0==s.detailAddress&&(s.detailAddress=""),f={addressDetail:s.detailAddress,latitude:s.addressLongitude,mobile:s.userPhone,name:s.userName,province:s.province,editAddress:s.editAddress,city:s.city,area:s.area,orderId:s.orderId,extensionNumber:s.extensionNumber},e.setStorageSync("endAddress",JSON.stringify(f)));case 49:e.navigateBack({delta:1});case 50:case"end":return t.stop()}}),t)})))()}}};s.default=u}).call(this,t("6e42")["default"],t("0de9")["default"])},a585:function(e,s,t){"use strict";var d={"u-popup":function(){return t.e("node-modules/uview-ui/components/u-popup/u-popup").then(t.bind(null,"d9e1"))}},r=function(){var e=this,s=e.$createElement;e._self._c},i=[];t.d(s,"b",(function(){return r})),t.d(s,"c",(function(){return i})),t.d(s,"a",(function(){return d}))},cff6:function(e,s,t){"use strict";var d=t("5c8b"),r=t.n(d);r.a},dcd9:function(e,s,t){"use strict";t.r(s);var d=t("6e4d"),r=t.n(d);for(var i in d)"default"!==i&&function(e){t.d(s,e,(function(){return d[e]}))}(i);s["default"]=r.a}},[["1020","common/runtime","common/vendor"]]]);