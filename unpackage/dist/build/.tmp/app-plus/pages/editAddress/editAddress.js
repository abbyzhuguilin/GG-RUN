(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/editAddress/editAddress"],{1020:function(e,d,s){"use strict";(function(e){s("7207"),s("921b");t(s("66fd"));var d=t(s("126b"));function t(e){return e&&e.__esModule?e:{default:e}}e(d.default)}).call(this,s("6e42")["createPage"])},"126b":function(e,d,s){"use strict";s.r(d);var t=s("76c3"),r=s("dcd9");for(var a in r)"default"!==a&&function(e){s.d(d,e,(function(){return r[e]}))}(a);s("cff6");var i,o=s("f0c5"),n=Object(o["a"])(r["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],i);d["default"]=n.exports},"5c8b":function(e,d,s){},"6e4d":function(e,d,s){"use strict";(function(e,t){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var r=a(s("4795"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,d,s,t,r,a,i){try{var o=e[a](i),n=o.value}catch(l){return void s(l)}o.done?d(n):Promise.resolve(n).then(t,r)}function o(e){return function(){var d=this,s=arguments;return new Promise((function(t,r){var a=e.apply(d,s);function o(e){i(a,t,r,o,n,"next",e)}function n(e){i(a,t,r,o,n,"throw",e)}o(void 0)}))}}var n={onLoad:function(d){if(void 0==d.addressDetail&&(d.addressDetail=""),0==d.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),0==d.addressInfo||0==d.status?e.setNavigationBarTitle({title:"发件地址填写"}):1==d.addressInfo||1==d.status?e.setNavigationBarTitle({title:"收件地址填写"}):3==d.status&&e.setNavigationBarTitle({title:"编辑地址填写"}),this.status=d.status,this.addressInfo=d.addressInfo,0==d.addressInfo&&1==d.addressInfo||(this.addressInfo=JSON.parse(d.addressInfo),t("log",this.addressInfo," at pages\\editAddress\\editAddress.vue:78"),"undefined"==this.addressInfo.addressDetail&&(this.addressInfo.addressDetail=""),this.userName=this.addressInfo.name,this.userPhone=this.addressInfo.mobile,this.addressInfo.addressDetail instanceof Array?(t("log",this.addressInfo.addressDetail," at pages\\editAddress\\editAddress.vue:86"),this.editAddress.name=this.addressInfo.addressDetail[2],this.editAddress.address=this.addressInfo.addressDetail[0],this.editAddress.latitude=this.addressInfo.latitude.split(",")[1],this.editAddress.longitude=this.addressInfo.latitude.split(",")[0],this.detailAddress=this.addressInfo.addressDetail[1],"undefined"===this.detailAddress&&(this.detailAddress="")):(this.editAddress=this.addressInfo.editAddress,this.detailAddress=this.addressInfo.addressDetail,"undefined"===this.detailAddress&&(this.detailAddress="")),this.city=this.addressInfo.city,this.province=this.addressInfo.province,this.area=this.addressInfo.area,this.addressLongitude=this.addressInfo.latitude,this.orderId=this.addressInfo.id),""!==d.ftSendAddress){var s=JSON.parse(d.ftSendAddress);this.editAddress={},this.editAddress.name=s.titleName,this.editAddress.address=s.addressname,this.editAddress.latitude=s.location.split(",")[1],this.editAddress.longitude=s.location.split(",")[0]}},onUnload:function(){e.hideKeyboard()},data:function(){return{addressStatus:"",newAddressStatus:"",editId:"",circleIndex:!0,editAddress:{name:"",address:"",latitude:"",longitude:""},userName:"",userPhone:"",detailAddress:"",province:"",city:"",area:"",defaultFlag:0,addressLongitude:"",addressInfo:"",allTitle:"",orderId:"",status:"",checkPhone:"",autoFill:"",autoFillLatitude:"",holder:"粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。",nstartSendAddress:{}}},methods:{saveAddress:function(){this.circleIndex=!this.circleIndex,this.circleIndex?this.defaultFlag=0:this.defaultFlag=1,t("log",this.defaultFlag," at pages\\editAddress\\editAddress.vue:185")},clearForm:function(){this.userName="",this.userPhone="",this.editAddress={},this.detailAddress=""},getContacts:function(){e.showLoading({title:"读取中"});var d=this;if("Android"==plus.os.name)plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE,(function(s){var t=1e3,r=plus.android.runtimeMainActivity(),a=plus.android.importClass("android.content.Intent"),i=plus.android.importClass("android.provider.ContactsContract"),o=new a(a.ACTION_PICK,i.Contacts.CONTENT_URI);e.hideLoading(),r.onActivityResult=function(e,s,a){if(t==e){var o="",n=r;plus.android.importClass(a);var l=a.getData(),u=n.getContentResolver();plus.android.importClass(u);var c=u.query(l,null,null,null,null);plus.android.importClass(c),c.moveToFirst();var A=c.getString(c.getColumnIndex(i.Contacts.DISPLAY_NAME))||"",g=c.getString(c.getColumnIndex(i.Contacts._ID)),f=u.query(i.CommonDataKinds.Phone.CONTENT_URI,null,i.CommonDataKinds.Phone.CONTACT_ID+" = "+g,null,null);f.moveToNext()&&(o=f.getString(f.getColumnIndex(i.CommonDataKinds.Phone.NUMBER))),o=o.replace(/\s/g,""),o=o.replace(/-/g,""),d.userName=A,d.userPhone=o,callBack&&callBack(A,o),c.close(),f.close()}},r.startActivityForResult(o,t)}));else{var s=plus.ios.newObject("ABPeoplePickerNavigationController");t("log",2," at pages\\editAddress\\editAddress.vue:247"),e.hideLoading();var r=plus.ios.implements("ABPeoplePickerNavigationControllerDelegate",{"peoplePickerNavigationController:didSelectPerson:":function(e,s){t("log",JSON.stringify(e)," at pages\\editAddress\\editAddress.vue:254"),t("log",JSON.stringify(s)," at pages\\editAddress\\editAddress.vue:255"),t("log",typeof s," at pages\\editAddress\\editAddress.vue:256");var r=e,a="",i=r.plusGetAttribute("familyName"),o=r.plusGetAttribute("givenName");a=i+o;var n="",l=r.plusGetAttribute("phoneNumbers");if(l.plusGetAttribute("count")>0){var u=l.plusGetAttribute("firstObject"),c=u.plusGetAttribute("value");n=c.plusGetAttribute("stringValue")}t("log",a,n," at pages\\editAddress\\editAddress.vue:275"),n=n.replace(/\s/g,""),n=n.replace(/-/g,""),d.userName=a,d.userPhone=n,t("log",d.userName,d.userPhone," at pages\\editAddress\\editAddress.vue:280"),callBack&&callBack(a,n)}});plus.ios.invoke(s,"setPeoplePickerDelegate:",r);var a=plus.ios.importClass("UIApplication"),i=a.sharedApplication(),o=plus.ios.invoke(i,"delegate"),n=plus.ios.invoke(o,"window"),l=plus.ios.invoke(n,"rootViewController");plus.ios.invoke(l,"presentViewController:animated:completion:",s,!0,null)}},autoFillFn:function(){var d=this,s=this.smartParse(this.autoFill);if(t("log",s," at pages\\editAddress\\editAddress.vue:306"),""!==this.autoFill.trim()){this.userName=s.name,this.userPhone=s.phone,this.province=s.province,this.city=s.city,this.area=s.county,this.detailAddress=s.address;var r=s.address,a=this;e.request({url:"https://restapi.amap.com/v3/geocode/geo?address="+this.province+this.city+this.area+r+"&output=JSON&key=6223011d1e55de8ee9d00617ee5270c2",method:"GET",success:function(s){d.autoFillLatitude=s.data.geocodes[0].location,d.editAddress={},e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+d.autoFillLatitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",method:"GET",success:function(e){0==e.data.regeocode.aois.length?(d.$set(a.editAddress,"name",e.data.regeocode.pois[1].address),d.$set(a.editAddress,"address",e.data.regeocode.formatted_address),d.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),d.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1])):(d.$set(a.editAddress,"name",e.data.regeocode.aois[0].name),d.$set(a.editAddress,"address",e.data.regeocode.formatted_address),d.$set(a.editAddress,"longitude",a.autoFillLatitude.split(",")[0]),d.$set(a.editAddress,"latitude",a.autoFillLatitude.split(",")[1]))}})}})}},focusAutoFill:function(){this.holder="粘贴整段发货信息，系统会智能识别并且填写地址姓名电话。例如:G小哥,132****0000,广东省深圳市南山区某某街道某某大厦001号"},openMap:function(){var d=this,s=this;e.chooseLocation({success:function(r){d.editAddress=r,s.editAddress&&e.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+s.editAddress.longitude+","+s.editAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===s.editAddress.name&&(t("log",e.data.regeocode," at pages\\editAddress\\editAddress.vue:368"),e.data.regeocode.aois.length?s.editAddress.name=e.data.regeocode.aois[0].name:s.editAddress.name=e.data.regeocode.pois[0].name),s.editAddress.address=e.data.regeocode.formatted_address,s.province=e.data.regeocode.addressComponent.province,s.city=e.data.regeocode.addressComponent.city,s.area=e.data.regeocode.addressComponent.district}})}})},checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,t("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:393"),!0):(this.checkPhone=!0,t("log",this.checkPhone," at pages\\editAddress\\editAddress.vue:397"),!1)},submitAddress:function(){var d=this;return o(r.default.mark((function s(){var a,i,o,n,l,u,c,A,g,f,p;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!d.checkPhone){s.next=3;break}return e.showToast({icon:"none",title:"手机号码填写错误，请检查"}),s.abrupt("return");case 3:if(""!=d.userName&&""!=d.userPhone&&""!=d.editAddress.name){s.next=6;break}return e.showToast({icon:"none",title:"姓名/手机/地址必须填写"}),s.abrupt("return");case 6:if(d.addressLongitude=d.editAddress.longitude+","+d.editAddress.latitude,d.allTitle=d.editAddress.address+","+d.detailAddress+","+d.editAddress.name,void 0==d.addressDetail&&(d.addressDetail=""),0!=d.addressInfo&&1!=d.addressInfo){s.next=22;break}if(void 0!=d.detailAddress&&""!=d.detailAddress||(d.detailAddress=""),0!=d.defaultFlag){s.next=19;break}return s.next=14,d.$fetch(d.$api.addAddress,{addressDetail:d.allTitle,area:d.area,city:d.city,defaultFlag:1,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province},"POST","form");case 14:s.sent,0==d.addressInfo&&(a={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},0!=d.status&&(t("log","1"," at pages\\editAddress\\editAddress.vue:461"),e.setStorageSync("sendAddress",JSON.stringify(a)))),1==d.addressInfo&&(void 0==d.detailAddress&&(d.detailAddress=""),i={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},e.setStorageSync("endAddress",JSON.stringify(i))),s.next=22;break;case 19:void 0==d.detailAddress&&(d.detailAddress=""),0==d.addressInfo&&(o={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},t("log","2"," at pages\\editAddress\\editAddress.vue:509"),e.setStorageSync("sendAddress",JSON.stringify(o))),1==d.addressInfo&&(void 0==d.detailAddress&&(d.detailAddress=""),n={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},e.setStorageSync("endAddress",JSON.stringify(n)));case 22:if(3!=d.status&&0!=d.status&&1!=d.status){s.next=45;break}if(void 0==d.detailAddress&&(d.detailAddress=""),d.addressLongitude=d.editAddress.longitude+","+d.editAddress.latitude,d.allTitle=d.editAddress.address+","+d.detailAddress+","+d.editAddress.name,""==d.orderId||void 0==d.orderId){s.next=33;break}return s.next=29,d.$fetch(d.$api.updateAddress,{addressDetail:d.allTitle,area:d.area,city:d.city,defaultFlag:1,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,id:d.orderId},"POST","form");case 29:l=s.sent,0==l.code&&(0==d.status&&(void 0==d.detailAddress&&(d.detailAddress=""),t("log",d.addressLongitude," at pages\\editAddress\\editAddress.vue:567"),u={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},t("log","3"," at pages\\editAddress\\editAddress.vue:579"),e.setStorageSync("sendAddress",JSON.stringify(u))),1==d.status&&(void 0==d.detailAddress&&(d.detailAddress=""),c={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},e.setStorageSync("endAddress",JSON.stringify(c)))),s.next=45;break;case 33:if(0!=d.defaultFlag){s.next=42;break}if(""===d.addressInfo){s.next=40;break}return s.next=37,d.$fetch(d.$api.addAddress,{addressDetail:d.allTitle,area:d.area,city:d.city,defaultFlag:1,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province},"POST","form");case 37:s.sent,0==d.status&&(A={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},t("log","4"," at pages\\editAddress\\editAddress.vue:635"),t("log",e.getStorageSync("noSetSend")," at pages\\editAddress\\editAddress.vue:636"),e.getStorageSync("noSetSend")||(e.setStorageSync("sendAddress",JSON.stringify(A)),e.removeStorageSync("noSetSend"))),1==d.status&&(void 0==d.detailAddress&&(d.detailAddress=""),g={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},e.setStorageSync("endAddress",JSON.stringify(g)));case 40:s.next=45;break;case 42:void 0==d.detailAddress&&(d.detailAddress=""),0==d.status&&(f={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},t("log","5"," at pages\\editAddress\\editAddress.vue:689"),e.setStorageSync("sendAddress",JSON.stringify(f))),1==d.status&&(void 0==d.detailAddress&&(d.detailAddress=""),p={addressDetail:d.detailAddress,latitude:d.addressLongitude,mobile:d.userPhone,name:d.userName,province:d.province,editAddress:d.editAddress,city:d.city,area:d.area,orderId:d.orderId},e.setStorageSync("endAddress",JSON.stringify(p)));case 45:e.navigateBack({delta:1});case 46:case"end":return s.stop()}}),s)})))()}}};d.default=n}).call(this,s("6e42")["default"],s("0de9")["default"])},"76c3":function(e,d,s){"use strict";var t,r=function(){var e=this,d=e.$createElement;e._self._c},a=[];s.d(d,"b",(function(){return r})),s.d(d,"c",(function(){return a})),s.d(d,"a",(function(){return t}))},cff6:function(e,d,s){"use strict";var t=s("5c8b"),r=s.n(t);r.a},dcd9:function(e,d,s){"use strict";s.r(d);var t=s("6e4d"),r=s.n(t);for(var a in t)"default"!==a&&function(e){s.d(d,e,(function(){return t[e]}))}(a);d["default"]=r.a}},[["1020","common/runtime","common/vendor"]]]);