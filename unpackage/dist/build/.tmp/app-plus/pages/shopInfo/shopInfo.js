(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopInfo/shopInfo"],{"0d8f":function(t,i,n){"use strict";n.r(i);var e=n("fc4b"),o=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(i,t,(function(){return e[t]}))}(s);i["default"]=o.a},7984:function(t,i,n){},a21b:function(t,i,n){"use strict";var e={"u-upload":function(){return n.e("node-modules/uview-ui/components/u-upload/u-upload").then(n.bind(null,"3347"))}},o=function(){var t=this,i=t.$createElement;t._self._c},s=[];n.d(i,"b",(function(){return o})),n.d(i,"c",(function(){return s})),n.d(i,"a",(function(){return e}))},aabd:function(t,i,n){"use strict";var e=n("7984"),o=n.n(e);o.a},ec1f:function(t,i,n){"use strict";n.r(i);var e=n("a21b"),o=n("0d8f");for(var s in o)"default"!==s&&function(t){n.d(i,t,(function(){return o[t]}))}(s);n("aabd");var h,c=n("f0c5"),r=Object(c["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],h);i["default"]=r.exports},efc1:function(t,i,n){"use strict";(function(t){n("6857"),n("921b");e(n("66fd"));var i=e(n("ec1f"));function e(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("6e42")["createPage"])},fc4b:function(t,i,n){"use strict";(function(t,e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o,s=h(n("a34a"));function h(t){return t&&t.__esModule?t:{default:t}}function c(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function r(t,i,n,e,o,s,h){try{var c=t[s](h),r=c.value}catch(u){return void n(u)}c.done?i(r):Promise.resolve(r).then(e,o)}function u(t){return function(){var i=this,n=arguments;return new Promise((function(e,o){var s=t.apply(i,n);function h(t){r(s,e,o,h,c,"next",t)}function c(t){r(s,e,o,h,c,"throw",t)}h(void 0)}))}}var a=(o={onLoad:function(){this.$refs.uUploadRef.clear()},onShow:function(){var i=this;t.getStorageSync("shopInfo")&&(this.shopInfo=t.getStorageSync("shopInfo"),this.currentIndex=this.shopInfo.index,this.weight=this.shopInfo.weight,this.price=this.shopInfo.price,this.pics=JSON.parse(this.shopInfo.pics),this.fileList=[],this.pics.length&&this.pics.forEach((function(t){i.fileList.push({url:t})})),e("log",this.pics," at pages\\shopInfo\\shopInfo.vue:86"),0==this.shopInfo.status?(this.choiceElese(),this.elseShop=this.shopInfo.main):this.shopInfoMain=this.shopInfo.main)},data:function(){return{shopList:[],currentIndex:0,elseShop:"",weight:1,price:20,showElse:!1,shopInfoMain:"",shopInfo:{},action:"https://upload.qiniup.com/",fileList:[],QNtoken:{},pics:[]}}},c(o,"onLoad",(function(){this.getQiniuToken(),this.initGoodsInfo()})),c(o,"onUnload",(function(){t.hideKeyboard()})),c(o,"methods",{UpLoaded:function(i){var n=this;t.showLoading({title:"上传中"}),this.pics=[],i.forEach((function(t){e("log",t," at pages\\shopInfo\\shopInfo.vue:131"),void 0!=t.response?n.pics.push(n.$api.baseLocation+t.response.hash):n.pics.push(t.url)})),setTimeout((function(){t.hideLoading()}),2500)},RemoveImg:function(t,i){this.pics.splice(t,1)},changList:function(t){e("log",t," at pages\\shopInfo\\shopInfo.vue:150")},getQiniuToken:function(){var t=u(s.default.mark((function t(){var i;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$fetch(this.$api.getQiniuToken,{},"POST","form");case 2:i=t.sent,e("log",i," at pages\\shopInfo\\shopInfo.vue:154"),this.QNtoken={token:i.data.token};case 5:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}(),handleCurrent:function(t,i){this.shopInfoMain=t,this.currentIndex=i,this.shopInfo.index=i,this.showElse=!1},handleElseShop:function(){this.currentIndex=-1,this.showElse=!0},weightSub:function(){this.weight=Number(this.weight)-1,this.weight<=0&&(t.showToast({icon:"none",title:"重量不能再低啦"}),this.weight=1)},weightAdd:function(){this.weight=Number(this.weight)+1},priceSub:function(){this.price=Number(this.price)-1,this.price<=0&&(t.showToast({icon:"none",title:"价格不能再低啦"}),this.price=1)},priceAdd:function(){this.price=Number(this.price)+1,this.price>500&&(t.showToast({icon:"none",title:"价格不能再高啦"}),this.price=500)},checkWeight:function(){this.weight<=0&&(t.showToast({icon:"none",title:"重量不能再小啦"}),this.weight=1)},checkPrice:function(){this.price<=0&&(t.showToast({icon:"none",title:"价格不能再低啦"}),this.price=1),this.price>500&&(t.showToast({icon:"none",title:"价格不能再高啦"}),this.price=500)},goBack:function(){if(""!==this.shopInfoMain||""!==this.elseShop.trim()){if(this.price>500)return t.showToast({icon:"none",title:"商品预估价最高500元"}),void(this.price=500);if(this.showElse){if(""==this.elseShop)return void t.showToast({icon:"none",title:"请填写其他商品类型"});this.shopInfo.main=this.elseShop,this.shopInfo.weight=this.weight,this.shopInfo.price=this.price,this.shopInfo.status=0,this.shopInfo.pics=JSON.stringify(this.pics),t.setStorageSync("shopInfo",this.shopInfo)}else{this.shopInfo.main=this.shopInfoMain,this.shopInfo.weight=this.weight,this.shopInfo.price=this.price,this.shopInfo.status=1,this.shopInfo.pics=JSON.stringify(this.pics),t.setStorageSync("shopInfo",this.shopInfo)}t.navigateBack({delta:1})}else t.showToast({icon:"none",title:"请确认您的商品类型"})},initGoodsInfo:function(){var i=u(s.default.mark((function i(){var n;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,this.$fetch(this.$api.goodsType,{},"GET","Form");case 2:n=i.sent,0==n.code?this.shopList=n.data:t.showToast({icon:"none",title:n.msg});case 4:case"end":return i.stop()}}),i,this)})));function n(){return i.apply(this,arguments)}return n}(),choiceElese:function(){this.showElse=!0,this.currentIndex=-1}}),c(o,"watch",{}),o);i.default=a}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["efc1","common/runtime","common/vendor"]]]);