(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/register"],{"12f0":function(e,t,n){"use strict";(function(e){n("7207"),n("921b");r(n("66fd"));var t=r(n("a8f4"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"3eb9":function(e,t,n){"use strict";n.r(t);var r=n("4669"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},4669:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("4795"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function c(e){a(o,r,i,c,u,"next",e)}function u(e){a(o,r,i,c,u,"throw",e)}c(void 0)}))}}var u={onLoad:function(t){e("log",plus.push.getClientInfo()," at pages\\register\\register.vue:29"),this.cid=plus.push.getClientInfo().clientid,e("log",t," at pages\\register\\register.vue:31"),t.wxlogin&&(e("log","进入"," at pages\\register\\register.vue:33"),this.wxlogin=t.wxlogin,this.uniId=t.unionId,this.nickName=t.nickName,this.avatarUrl=t.avatarUrl)},data:function(){return{wxlogin:"",uniId:"",isReader:!0,getYzm:!0,computedTimer:0,userPhone:"",code:"",yzm:"",userPwd:"",userSecPwd:"",inviteCode:"",resMsg:"",cid:"",checkPhone:"",nickName:"",avatarUrl:""}},methods:{checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,!0):(this.checkPhone=!0,!1)},handleIsReader:function(){this.isReader=!this.isReader},getCode:function(){var e=this;return c(i.default.mark((function t(){var n,o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkPhoneNumber(),e.getYzm){t.next=3;break}return t.abrupt("return");case 3:if(""!=e.userPhone.trim()){t.next=6;break}return r.showToast({icon:"none",title:"请先输入手机号"}),t.abrupt("return");case 6:if(!e.checkPhone){t.next=9;break}return r.showToast({icon:"none",title:"请检查手机号输入是否正确"}),t.abrupt("return");case 9:return e.getYzm=!1,e.computedTimer=60,n=setInterval((function(){0===e.computedTimer?(clearInterval(n),e.getYzm=!0):e.computedTimer--}),1e3),t.next=14,e.$fetch(e.$api.customerPhone,{mobile:e.userPhone},"GET","form");case 14:o=t.sent,e.yzm=o.msg;case 16:case"end":return t.stop()}}),t)})))()},formSubmit:function(){var t=this;return c(i.default.mark((function n(){var o,a,c,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.wxlogin){n.next=24;break}if(""!=t.userPhone.trim()&&""!=t.code.trim()&&""!=t.userPwd&&""!=t.userSecPwd){n.next=4;break}return r.showToast({icon:"none",title:"请填写信息后进行注册"}),n.abrupt("return");case 4:if(t.userPwd==t.userSecPwd){n.next=7;break}return r.showToast({icon:"none",title:"两次输入的密码不一致"}),n.abrupt("return");case 7:if(t.isReader){n.next=10;break}return r.showToast({icon:"none",title:"请认真阅读平台用户协议"}),n.abrupt("return");case 10:return n.next=12,t.$fetch(t.$api.customerUser,{mobile:t.userPhone,checkCode:t.code,password:t.userPwd,inviteCode:t.inviteCode,cid:t.cid},"POST","form");case 12:if(o=n.sent,0!==o.code){n.next=21;break}return r.showToast({icon:"success",title:"注册成功"}),n.next=17,t.$fetch(t.$api.customerLogin,{loginName:t.userPhone,password:t.userPwd,cid:t.cid},"POST","Form");case 17:a=n.sent,0==a.code?(r.setStorageSync("token",a.data.token),setTimeout((function(){r.switchTab({url:"../my/my"})}),1500)):r.showToast({icon:"none",title:a.msg}),n.next=22;break;case 21:r.showToast({icon:"none",title:o.msg});case 22:n.next=36;break;case 24:return e("log",{avatarUrl:t.avatarUrl,nickName:t.nickName,mobile:t.userPhone,checkCode:t.code,inviteCode:t.inviteCode,cid:t.cid,unionId:t.uniId}," at pages\\register\\register.vue:192"),n.next=27,t.$fetch(t.$api.customerUser,{avatarUrl:t.avatarUrl,nickName:t.nickName,mobile:t.userPhone,checkCode:t.code,inviteCode:t.inviteCode,cid:t.cid,unionId:t.uniId},"POST","form");case 27:if(c=n.sent,0!==c.code){n.next=35;break}return n.next=31,t.$fetch(t.$api.customerWx,{cid:t.cid,unionId:t.uniId},"POST","FORM");case 31:u=n.sent,0===u.code?(r.setStorageSync("token",u.data.token),r.switchTab({url:"../my/my"})):r.showToast({icon:"none",title:c.msg}),n.next=36;break;case 35:r.showToast({icon:"none",title:c.msg});case 36:case"end":return n.stop()}}),n)})))()},goToRichText:function(){return c(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.navigateTo({url:"../rich-text/rich-text?id=2"});case 1:case"end":return e.stop()}}),e)})))()}}};t.default=u}).call(this,n("0de9")["default"],n("6e42")["default"])},"558f":function(e,t,n){"use strict";var r,i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}))},"77ec":function(e,t,n){"use strict";var r=n("f736"),i=n.n(r);i.a},a8f4:function(e,t,n){"use strict";n.r(t);var r=n("558f"),i=n("3eb9");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("77ec");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=u.exports},f736:function(e,t,n){}},[["12f0","common/runtime","common/vendor"]]]);