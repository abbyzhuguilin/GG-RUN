(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/register"],{"12f0":function(e,t,n){"use strict";(function(e){n("7207"),n("921b");r(n("66fd"));var t=r(n("a8f4"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"3eb9":function(e,t,n){"use strict";n.r(t);var r=n("4669"),i=n.n(r);for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);t["default"]=i.a},4669:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("4795")),u=a(n("f8e4"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,i,u,a){try{var o=e[u](a),c=o.value}catch(s){return void n(s)}o.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var u=e.apply(t,n);function a(e){o(u,r,i,a,c,"next",e)}function c(e){o(u,r,i,a,c,"throw",e)}a(void 0)}))}}var s={onLoad:function(t){e("log",plus.push.getClientInfo()," at pages\\register\\register.vue:30"),this.cid=plus.push.getClientInfo().clientid,e("log",t," at pages\\register\\register.vue:32"),t.wxlogin&&(e("log","进入"," at pages\\register\\register.vue:34"),this.wxlogin=t.wxlogin,this.uniId=t.unionId,this.nickName=t.nickName,this.avatarUrl=t.avatarUrl)},data:function(){return{wxlogin:"",uniId:"",isReader:!0,getYzm:!0,computedTimer:0,userPhone:"",code:"",yzm:"",userPwd:"",userSecPwd:"",inviteCode:"",resMsg:"",cid:"",checkPhone:"",nickName:"",avatarUrl:""}},methods:{checkPhoneNumber:function(){var e=/^1[3456789]\d{9}$/;return e.test(this.userPhone)?(this.checkPhone=!1,!0):(this.checkPhone=!0,!1)},handleIsReader:function(){this.isReader=!this.isReader},getCode:function(){var e=this;return c(i.default.mark((function t(){var n,a,o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkPhoneNumber(),e.getYzm){t.next=3;break}return t.abrupt("return");case 3:if(""!=e.userPhone.trim()){t.next=6;break}return r.showToast({icon:"none",title:"请先输入手机号"}),t.abrupt("return");case 6:if(!e.checkPhone){t.next=9;break}return r.showToast({icon:"none",title:"请检查手机号输入是否正确"}),t.abrupt("return");case 9:return e.getYzm=!1,e.computedTimer=60,n=setInterval((function(){0===e.computedTimer?(clearInterval(n),e.getYzm=!0):e.computedTimer--}),1e3),a=u.default.setEncrypt(e.$api.publiukey,e.userPhone),t.next=15,e.$fetch(e.$api.customerPhone,{mobile:a},"GET","form");case 15:o=t.sent,e.yzm=o.msg;case 17:case"end":return t.stop()}}),t)})))()},formSubmit:function(){var t=this;return c(i.default.mark((function n(){var u,a,o,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.wxlogin){n.next=24;break}if(""!=t.userPhone.trim()&&""!=t.code.trim()&&""!=t.userPwd&&""!=t.userSecPwd){n.next=4;break}return r.showToast({icon:"none",title:"请填写信息后进行注册"}),n.abrupt("return");case 4:if(t.userPwd==t.userSecPwd){n.next=7;break}return r.showToast({icon:"none",title:"两次输入的密码不一致"}),n.abrupt("return");case 7:if(t.isReader){n.next=10;break}return r.showToast({icon:"none",title:"请认真阅读平台用户协议"}),n.abrupt("return");case 10:return n.next=12,t.$fetch(t.$api.customerUser,{mobile:t.userPhone,checkCode:t.code,password:t.userPwd,inviteCode:t.inviteCode,cid:t.cid},"POST","form");case 12:if(u=n.sent,0!==u.code){n.next=21;break}return r.showToast({icon:"success",title:"注册成功"}),n.next=17,t.$fetch(t.$api.customerLogin,{loginName:t.userPhone,password:t.userPwd,cid:t.cid},"POST","Form");case 17:a=n.sent,0==a.code?(r.setStorageSync("token",a.data.token),setTimeout((function(){r.switchTab({url:"../my/my"})}),1500)):r.showToast({icon:"none",title:a.msg}),n.next=22;break;case 21:r.showToast({icon:"none",title:u.msg});case 22:n.next=36;break;case 24:return e("log",{avatarUrl:t.avatarUrl,nickName:t.nickName,mobile:t.userPhone,checkCode:t.code,inviteCode:t.inviteCode,cid:t.cid,unionId:t.uniId}," at pages\\register\\register.vue:194"),n.next=27,t.$fetch(t.$api.customerUser,{avatarUrl:t.avatarUrl,nickName:t.nickName,mobile:t.userPhone,checkCode:t.code,inviteCode:t.inviteCode,cid:t.cid,unionId:t.uniId},"POST","form");case 27:if(o=n.sent,0!==o.code){n.next=35;break}return n.next=31,t.$fetch(t.$api.customerWx,{cid:t.cid,unionId:t.uniId},"POST","FORM");case 31:c=n.sent,0===c.code?(r.setStorageSync("token",c.data.token),r.switchTab({url:"../my/my"})):r.showToast({icon:"none",title:o.msg}),n.next=36;break;case 35:r.showToast({icon:"none",title:o.msg});case 36:case"end":return n.stop()}}),n)})))()},goToRichText:function(){return c(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.navigateTo({url:"../rich-text/rich-text?id=2"});case 1:case"end":return e.stop()}}),e)})))()}}};t.default=s}).call(this,n("0de9")["default"],n("6e42")["default"])},"77ec":function(e,t,n){"use strict";var r=n("f736"),i=n.n(r);i.a},"7e1d":function(e,t,n){"use strict";var r,i=function(){var e=this,t=e.$createElement;e._self._c},u=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}))},a8f4:function(e,t,n){"use strict";n.r(t);var r=n("c9f2"),i=n("3eb9");for(var u in i)"default"!==u&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("77ec");var a,o=n("f0c5"),c=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=c.exports},b16b:function(e,t,n){"use strict";n.r(t);var r=n("f0ca"),i=n.n(r);for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);t["default"]=i.a},c9f2:function(e,t,n){"use strict";var r,i=function(){var e=this,t=e.$createElement;e._self._c},u=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}))},f0ca:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("1010"));function i(e){return e&&e.__esModule?e:{default:e}}var u={data:function(){return{}},methods:{},getRealLen:function(e){return e.replace(/[^\x00-\xff]/g,"__").length},setEncryptList:function(e,t,n){var r=[],i=t,u=/.{40}/g,a=i.match(u);a.push(i.substring(a.join("").length));for(var o=0;o<a.length;o++){var c=this.getRealLen(a[o]);if(c>116)for(var s=this.setEncryptList(e,a[o],c),f=0;f<s.length;f++)r.push(s[f]);else r.push(this.setEncrypt(e,a[o]))}return r},setEncrypt:function(e,t){var n=new r.default;return n.setPublicKey(e),n.encrypt(t)},setLongEncrypt:function(e,t){var n=t,r=/.{116}/g,i=n.match(r);i.push(n.substring(i.join("").length));for(var u=[],a=0;a<i.length;a++){var o=this.getRealLen(i[a]);if(o>116)for(var c=this.setEncryptList(e,i[a],o),s=0;s<c.length;s++)u.push(c[s]);else u.push(this.setEncrypt(e,i[a]))}return u},setDecryptArray:function(e,t){for(var n="",r=0;r<t.length;r++)n+=this.setDecrypt(e,t[r]);return n},setDecrypt:function(e,t){var n=new r.default;return n.setPrivateKey(e),n.decrypt(t)}};t.default=u},f736:function(e,t,n){},f8e4:function(e,t,n){"use strict";n.r(t);var r=n("7e1d"),i=n("b16b");for(var u in i)"default"!==u&&function(e){n.d(t,e,(function(){return i[e]}))}(u);var a,o=n("f0c5"),c=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);t["default"]=c.exports}},[["12f0","common/runtime","common/vendor"]]]);