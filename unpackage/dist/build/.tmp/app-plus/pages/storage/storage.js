(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storage/storage"],{3534:function(e,t,s){"use strict";(function(e){s("7207"),s("921b");r(s("66fd"));var t=r(s("7ae8"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},"550e":function(e,t,s){"use strict";s.r(t);var r=s("a708"),d=s.n(r);for(var i in r)"default"!==i&&function(e){s.d(t,e,(function(){return r[e]}))}(i);t["default"]=d.a},"7ae8":function(e,t,s){"use strict";s.r(t);var r=s("e8a7"),d=s("550e");for(var i in d)"default"!==i&&function(e){s.d(t,e,(function(){return d[e]}))}(i);s("9305");var n,a=s("f0c5"),o=Object(a["a"])(d["default"],r["b"],r["c"],!1,null,"279a87c4",null,!1,r["a"],n);t["default"]=o.exports},9305:function(e,t,s){"use strict";var r=s("c76f"),d=s.n(r);d.a},a708:function(e,t,s){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=i(s("4795"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s,r,d,i,n){try{var a=e[i](n),o=a.value}catch(c){return void s(c)}a.done?t(o):Promise.resolve(o).then(r,d)}function a(e){return function(){var t=this,s=arguments;return new Promise((function(r,d){var i=e.apply(t,s);function a(e){n(i,r,d,a,o,"next",e)}function o(e){n(i,r,d,a,o,"throw",e)}a(void 0)}))}}var o=function(){s.e("components/uni-popup/uni-popup").then(function(){return resolve(s("8f1d"))}.bind(null,s)).catch(s.oe)},c={onLoad:function(t){var s=this;e("log",t.assignIndex," at pages\\storage\\storage.vue:435"),this.car=t.car,this.scrollIndex=Number(t.scrollIndex),e("log",this.scrollIndex," at pages\\storage\\storage.vue:438"),this.initAddress(),this.initorderProperty(),this.initRichText();var d=this.$dayjs().hour();this.nowTime=d;var i=this.timer.findIndex((function(e){if(s.nowTime==e.start)return!0}));this.timeList=this.timer.slice(i+1),this.signCode=r.getStorageSync("user_signCode"),"{}"==JSON.stringify(this.sendAddress)?this.sendAddressShow=!0:this.sendAddressShow=!1},onShow:function(){var t=r.getSystemInfoSync();if(this.platform=t.platform,this.initMyInfo(),this.initorderProperty(),this.createOrderTimer=this.$dayjs().hour(),r.getStorageSync("sendAddress")){var s=JSON.parse(r.getStorageSync("sendAddress"));this.sendAddress,this.sendAddress=s}if(r.getStorageSync("endAddress")){var d=JSON.parse(r.getStorageSync("endAddress"));this.endAddress=d,"undefined"===this.endAddress.addressDetail&&(this.endAddress.addressDetail="")}if(r.getStorageSync("shopInfo")){var i=r.getStorageSync("shopInfo");i&&void 0!=i&&(this.shopInfo=i)}if(r.getStorageSync("discount")){var n=r.getStorageSync("discount");void 0!=n.value&&(this.discount=n),e("log",this.discount," at pages\\storage\\storage.vue:511")}else this.discount={};if(r.getStorageSync("takeTimer")){var a=r.getStorageSync("takeTimer");a&&void 0!=a&&(this.showChoiceTime=a)}this.isComputedDistance&&this.isComputedDistanceFunc(),this.isInitOrderPrice&&this.isInitOrderPriceAjax(),""!=this.countDown&&(clearInterval(this.countDown),this.minutes=30,this.seconds=0),"{}"==JSON.stringify(this.endAddress)?this.endAddressShow=!0:this.endAddressShow=!1,r.getStorageSync("remark")&&(this.remark=r.getStorageSync("remark"))},onUnload:function(){r.removeStorageSync("shopInfo"),r.removeStorageSync("discount"),r.removeStorageSync("takeTimer"),r.removeStorageSync("remark")},data:function(){return{platform:"",sendAddress:{},endAddress:{},car:0,scrollList:["帮我送","帮我取","帮我买"],carScrollList:["帮我送","帮我取"],scrollIndex:0,dayIndex:0,day:["今天","明天","后天"],rightIndex:999,timer:[{text:"9:00-10:00",start:"9",end:"10"},{text:"10:00-11:00",start:"10",end:"11"},{text:"11:00-12:00",start:"11",end:"12"},{text:"12:00-13:00",start:"12",end:"13"},{text:"13:00-14:00",start:"13",end:"14"},{text:"14:00-15:00",start:"14",end:"15"},{text:"15:00-16:00",start:"15",end:"16"},{text:"16:00-17:00",start:"16",end:"17"},{text:"17:00-18:00",start:"17",end:"18"},{text:"18:00-19:00",start:"18",end:"19"},{text:"19:00-20:00",start:"19",end:"20"},{text:"21:00-22:00",start:"21",end:"22"},{text:"22:00-23:00",start:"22",end:"23"},{text:"23:00-24:00",start:"23",end:"24"}],timeList:[],choiceTime:"",showChoiceTime:"",showDay:"",choiceMinunte:"",dayTimer:"",choiceMinunteEnd:"",assignList:["骑手就近购买","指定地址"],assignIndex:0,grant:[0,1,2,3,4,5],giveGrant:"",totalPrice:0,priceDetailshow:!1,payInfo:[{image:"../../static/img/my/yuezhifu.png",text:"余额支付",sectext:""},{image:"../../static/img/my/Alipaypayment.png",text:"支付宝支付（推荐）\t",sectext:""},{image:"../../static/img/my/weixinzhifu.png",text:"微信支付",sectext:""}],circleShow:0,horsemanCircle:!1,sendAddressShow:!0,endAddressShow:!0,shopInfo:{},discount:{},distance:"",signCode:0,goldCode:0,urgentCode:0,stayWarmCode:0,remark:"",orderComputed:{},minutes:30,seconds:0,countDown:"",horseman:!1,horsemanCount:"",horsemanList:[],addPirce:0,orderId:"",RichText:[],orderProperty:"",helpBuy:0,riderSide:3,payFlag:!0,shopAppraisement:!1,helpBuyTextArea:"",appraisement:"",helpbuyCircle:!0,choiceMinunteStart:"",Nhorseman:!1,xiaopiaoCircle:!1,newAddPrice:0,adcode:""}},components:{uniPopup:o},watch:{sendAddress:function(e,t){e!=t&&(this.sendAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.endAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},endAddress:function(e,t){e!=t&&(this.endAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.sendAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},signCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},goldCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},urgentCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},stayWarmCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},giveGrant:function(e,t){e!=t&&this.isInitOrderPriceAjax()},distance:function(e,t){e!=t&&this.isInitOrderPriceAjax()},second:{handler:function(e){this.num(e)}},minute:{handler:function(e){this.num(e)}}},computed:{isComputedDistance:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)},isInitOrderPrice:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)&&"{}"!=JSON.stringify(this.shopInfo)}},methods:{closePay:function(e){clearInterval(this.countDown),this.countDown=null,this.minutes=30,this.seconds=0,!e.show&&this.payFlag&&r.getStorageSync("discount")&&(r.setStorageSync("userSelect",0),r.switchTab({url:"../order/order"}))},goBack:function(){r.navigateBack({delta:1})},goTofreight:function(e){r.navigateTo({url:"../freightDeatail/freightDeatail?freightInfo="+JSON.stringify(this.orderComputed)+"&status="+e})},goToRemark:function(){r.navigateTo({url:"../remark/remark"})},closeShopAppraisement:function(){e("log",this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:820"),e("log",!0===this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:821"),this.shopAppraisement=!this.shopAppraisement,r.hideKeyboard()},checkShopInfoPrice:function(){},needTicket:function(){this.xiaopiaoCircle=!this.xiaopiaoCircle,this.xiaopiaoCircle?this.helpBuyTextArea=this.helpBuyTextArea+" 需要小票,按小票结算":this.helpBuyTextArea=this.helpBuyTextArea.replace(" 需要小票,按小票结算","")},initMyInfo:function(){var e=this;return a(d.default.mark((function t(){var s;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.currentUser,{},"GET","form");case 2:s=t.sent,e.payInfo[0].sectext="("+Number(s.data.amount).toFixed(2)+")";case 4:case"end":return t.stop()}}),t)})))()},hangdleAssignIndex:function(e){var t=this;if(this.assignIndex=e,this.helpBuy=e,1==e){var s=this;this.sendAddress.addressDetail="",r.chooseLocation({success:function(e){var d=e;r.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+e.longitude+","+e.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===d.name&&(d.name=e.data.regeocode.aois[0].name),d.address=e.data.regeocode.formatted_address,t.sendAddress.addressDetail instanceof Array?(s.sendAddress.addressDetail[0]=d.address,s.sendAddress.addressDetail[1]="",s.sendAddress.addressDetail[2]=d.name,s.sendAddress.latitude=d.longitude+","+d.latitude):(s.sendAddress.editAddress=d,s.sendAddress.latitude=s.sendAddress.editAddress.longitude+","+s.sendAddress.editAddress.latitude),r.setStorageSync("sendAddress",JSON.stringify(s.sendAddress)),t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})},complete:function(){t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})}this.isInitOrderPriceAjax()},handleScrollIndex:function(e){this.scrollIndex=e,this.shopInfo={},this.discount={},this.showChoiceTime="马上取件",this.assignIndex=0,this.choiceTime="",this.showDay="",this.choiceMinunte="",this.dayTimer="",this.choiceMinunteEnd="",this.giveGrant="",this.totalPrice=0,this.orderComputed={},this.helpBuy=0,this.helpBuyTextArea="",this.choiceMinunteStart=0,this.rightIndex=999,r.removeStorageSync("takeTimer"),r.removeStorageSync("shopInfo"),r.removeStorageSync("discount")},pickTimer:function(){this.$refs.popup.open(),this.handleDayIndex(this.dayIndex)},handleDayIndex:function(e){var t=this;if((e||0==e)&&(this.showDay=this.day[e]),this.dayIndex=e,0===e){this.dayTimer=this.$dayjs().format("YYYY-MM-DD");var s=this.timer.findIndex((function(e){if(t.nowTime==e.start)return!0}));this.timeList=this.timer.slice(s+1)}else 1===e?(this.dayTimer=this.$dayjs().add(1,"day").format("YYYY-MM-DD"),this.timeList=[]):2===e&&(this.dayTimer=this.$dayjs().add(2,"day").format("YYYY-MM-DD"),this.timeList=[]);this.rightIndex=999},handleRight:function(e,t){"马上取件"===this.showChoiceTime&&(this.choiceMinunteStart=0),this.rightIndex=t,this.choiceMinunte=e,this.choiceMinunteEnd=e.end,this.choiceMinunteStart=e.start},initTakeNow:function(){this.dayIndex=0,this.rightIndex=999},initorderProperty:function(){var e=this;return a(d.default.mark((function t(){var s;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.orderProperty,{carType:e.car},"GET","form");case 2:s=t.sent,e.orderProperty=s.data.bond,e.riderSide=s.data.distance,e.newAddPrice=s.data.capacitySubsidy,e.yunliTimerStart=s.data.noCapacityMonitoringPeriod.split("-")[0],e.yunliTimerEnd=s.data.noCapacityMonitoringPeriod.split("-")[1];case 8:case"end":return t.stop()}}),t)})))()},popSubmit:function(){this.$refs.popup.close(),this.choiceTime=this.dayTimer+" "+this.choiceMinunteStart,999!=this.rightIndex?this.showChoiceTime=this.showDay+" "+this.choiceMinunte.text:this.showChoiceTime="马上取件",r.setStorageSync("takeTimer",this.showChoiceTime)},goToAddress:function(e){r.navigateTo({url:"../address/address?address="+e})},setHelpBuyInfo:function(){this.appraisement<=0&&1==r.getStorageSync("shopInfo")?(this.appraisement=1,r.showToast({title:"商品预估价最低1元",icon:"none"})):this.appraisement>500&&(this.appraisement=500,r.showToast({title:"商品预估价最高500元",icon:"none"})),this.helpBuyTextArea.trim()&&(this.shopInfo.main=this.helpBuyTextArea),this.appraisement&&(this.shopInfo.price=this.appraisement),this.helpBuyTextArea.trim()&&this.appraisement&&(r.setStorageSync("shopInfo",this.shopInfo),this.isInitOrderPriceAjax()),""===this.helpBuyTextArea&&(this.orderComputed.payAmount=0)},goToShopInfo:function(){"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)?2==this.scrollIndex?r.navigateTo({url:"../buyShopInfo/buyShopInfo"}):r.navigateTo({url:"../shopInfo/shopInfo"}):r.showToast({icon:"none",title:"请先填写地址"})},goToDiscount:function(){r.navigateTo({url:"../discount/discount?payAmount="+this.orderComputed.payAmount})},selectedGrant:function(e){var t=e.detail.value;this.giveGrant=this.grant[t]},handleBilldetail:function(){var t=this;return a(d.default.mark((function s(){var i,n;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i=t.sendAddress.latitude.split(",")[1],n=t.sendAddress.latitude.split(",")[0],2==t.scrollIndex&&0==t.assignIndex&&(i=t.endAddress.latitude.split(",")[1],n=t.endAddress.latitude.split(",")[0]),i=Number(i).toFixed(6),n=Number(n).toFixed(5),r.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+n+","+i+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(){var s=a(d.default.mark((function s(i){var n,a,o,c,u;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.adcode=i.data.regeocode.addressComponent.adcode.substring(0,4),s.next=3,t.$fetch(t.$api.testAdcode,{adcode:t.adcode},"POST","FORM");case 3:if(n=s.sent,e("log",n," at pages\\storage\\storage.vue:1110"),0==n.code){s.next=9;break}return s.abrupt("return",r.showToast({icon:"none",title:"该地区暂未开通服务，敬请期待"}));case 9:if(void 0!==t.shopInfo.main&&void 0!==t.shopInfo.price){s.next=12;break}return r.showToast({title:"请检查您要下单的信息",icon:"none"}),s.abrupt("return");case 12:if(2==t.scrollIndex){s.next=16;break}if(""!=t.sendAddress.mobile.trim()&&""!=t.sendAddress.name.trim()){s.next=16;break}return r.showToast({icon:"none",title:"请完善取货地址信息"}),s.abrupt("return");case 16:if(2!==t.scrollIndex||t.helpbuyCircle){s.next=19;break}return r.showToast({title:"请认真阅读帮买服务协议",icon:"none"}),s.abrupt("return");case 19:if(""!==t.sendAddress.latitude||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=22;break}return r.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),s.abrupt("return");case 22:if("{}"!==JSON.stringify(t.sendAddress.editAddress)&&"{}"!==JSON.stringify(t.endAddress.editAddress)){s.next=25;break}return r.showToast({icon:"none",title:"未获取到详细地址,请先完善信息"}),s.abrupt("return");case 25:if(!t.discount.type){s.next=29;break}if(!(t.orderComputed.payAmount<50)){s.next=29;break}return r.showToast({icon:"none",title:"订单金额小于50，无法使用优惠"}),s.abrupt("return");case 29:if("{}"!=JSON.stringify(t.sendAddress)&&"{}"!=JSON.stringify(t.endAddress)&&"{}"!=JSON.stringify(t.shopInfo)){s.next=34;break}return r.showToast({icon:"none",title:"请检查您要下单的信息"}),s.abrupt("return");case 34:return r.showLoading({title:"订单生成中"}),a=t.sendAddress.latitude.split(",")[1],o=t.sendAddress.latitude.split(",")[0],a=Number(a).toFixed(6),o=Number(o).toFixed(5),c=null,s.next=42,t.$fetch(t.$api.getScanRange,{},"GET","Form");case 42:u=s.sent,0===u.code&&(c=u.data.taskScanRange),r.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:a+","+o,radius:1e3*c},success:function(s){e("log",s," at pages\\storage\\storage.vue:1209"),r.hideLoading(),t.horsemanCount=s.data.data.count,t.horsemanList=s.data.data.results,t.createOrderTimer>=t.yunliTimerStart&&t.createOrderTimer<=t.yunliTimerEnd&&(t.horseman=!0,t.Nhorseman=!0),0==t.horseman&&(t.Nhorseman=!1,t.$refs.popups.open())}});case 45:case"end":return s.stop()}}),s)})));function i(e){return s.apply(this,arguments)}return i}()});case 6:case"end":return s.stop()}}),s)})))()},handlePopPay:function(){var e=this;return a(d.default.mark((function t(){return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCreateOrderPriceAjax();case 1:case"end":return t.stop()}}),t)})))()},handleCircle:function(e){this.circleShow=e},handleDetailshow:function(){this.priceDetailshow=!this.priceDetailshow},handleHorsemanCircle:function(){this.horsemanCircle=!this.horsemanCircle},handleHorsemanShow:function(){this.addPirce=0,this.isInitOrderPriceAjax(),this.horseman=!1},goToEdit:function(e,t,s){var d=this;if(2!==this.scrollIndex||0!==t||0!==this.assignIndex)if(2===this.scrollIndex&&0===t&&1===this.assignIndex){var i=this;r.chooseLocation({success:function(e){var t=e;r.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+e.longitude+","+e.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===t.name&&(t.name=e.data.regeocode.aois[0].name),t.address=e.data.regeocode.formatted_address,d.sendAddress.addressDetail instanceof Array?(i.sendAddress.addressDetail[0]=t.address,i.sendAddress.addressDetail[1]="",i.sendAddress.addressDetail[2]=t.name,i.sendAddress.latitude=t.longitude+","+t.latitude):(i.sendAddress.editAddress=t,i.sendAddress.latitude=i.sendAddress.editAddress.longitude+","+i.sendAddress.editAddress.latitude),r.setStorageSync("sendAddress",JSON.stringify(i.sendAddress)),d.isComputedDistanceFunc(),d.isInitOrderPriceAjax()}})},complete:function(){d.isComputedDistanceFunc(),d.isInitOrderPriceAjax()}})}else r.navigateTo({url:"../editAddress/editAddress?addressInfo="+JSON.stringify(e)+"&status="+t+"&id="+s})},initAddress:function(){return a(d.default.mark((function e(){return d.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleSignCode:function(e){e.detail.value?this.signCode=1:this.signCode=0},handleGoldCode:function(e){e.detail.value?this.goldCode=1:this.goldCode=0},handleUrgentCode:function(e){e.detail.value?this.urgentCode=1:this.urgentCode=0},handleStayWarmCode:function(e){e.detail.value?this.stayWarmCode=1:this.stayWarmCode=0},isInitOrderPriceAjax:function(){var t=this;return a(d.default.mark((function s(){var i,n,a,o,c,u,l,p,g,h,f,m,y,A,x;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(""!==t.sendAddress.latitude||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=3;break}return r.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),s.abrupt("return");case 3:if(void 0!==t.shopInfo.price){s.next=5;break}return s.abrupt("return");case 5:if("{}"==JSON.stringify(t.sendAddress)||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)||""===t.sendAddress.latitude){s.next=89;break}if(i=null,i=t.sendAddress.addressDetail instanceof Array?t.sendAddress.addressDetail[0]+""+t.sendAddress.addressDetail[1]:t.sendAddress.editAddress.address+""+t.sendAddress.addressDetail,n=JSON.stringify(i),a=JSON.stringify(t.endAddress.editAddress.address+""+t.endAddress.addressDetail),999!==t.rightIndex){s.next=50;break}if("{}"!==JSON.stringify(t.discount)){s.next=31;break}if(2!==t.scrollIndex){s.next=25;break}if(0!==t.assignIndex){s.next=18;break}return s.next=16,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 16:o=s.sent,0==o.code&&(t.orderComputed=o.data);case 18:if(1!==t.assignIndex){s.next=23;break}return s.next=21,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 21:c=s.sent,0==c.code&&(t.orderComputed=c.data);case 23:s.next=29;break;case 25:return s.next=27,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 27:u=s.sent,0==u.code&&(t.orderComputed=u.data);case 29:s.next=48;break;case 31:if(2!==t.scrollIndex){s.next=44;break}if(0!==t.assignIndex){s.next=37;break}return s.next=35,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 35:l=s.sent,0==l.code&&(t.orderComputed=l.data);case 37:if(1!==t.assignIndex){s.next=42;break}return s.next=40,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 40:p=s.sent,0==p.code&&(t.orderComputed=p.data);case 42:s.next=48;break;case 44:return s.next=46,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 46:g=s.sent,0==g.code&&(t.orderComputed=g.data);case 48:s.next=89;break;case 50:if("{}"!==JSON.stringify(t.discount)){s.next=72;break}if(e("log",t.choiceTime+"*******************"," at pages\\storage\\storage.vue:1638"),2!==t.scrollIndex){s.next=66;break}if(0!==t.assignIndex){s.next=59;break}return s.next=56,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 56:h=s.sent,e("log",h," at pages\\storage\\storage.vue:1664"),0==h.code&&(t.orderComputed=h.data);case 59:if(1!==t.assignIndex){s.next=64;break}return s.next=62,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 62:f=s.sent,0==f.code&&(t.orderComputed=f.data);case 64:s.next=70;break;case 66:return s.next=68,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 68:m=s.sent,0==m.code&&(t.orderComputed=m.data);case 70:s.next=89;break;case 72:if(2!==t.scrollIndex){s.next=85;break}if(0!==t.assignIndex){s.next=78;break}return s.next=76,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 76:y=s.sent,0==y.code&&(t.orderComputed=y.data);case 78:if(1!==t.assignIndex){s.next=83;break}return s.next=81,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 81:A=s.sent,0==A.code&&(t.orderComputed=A.data);case 83:s.next=89;break;case 85:return s.next=87,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:n,latitude:t.sendAddress.latitude}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 87:x=s.sent,0==x.code&&(t.orderComputed=x.data);case 89:case"end":return s.stop()}}),s)})))()},isComputedDistanceFunc:function(){var t=this;if("{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)){this.sendAddress.addressDetail instanceof Array?r.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(s){e("log",s.data," at pages\\storage\\storage.vue:1848"),t.distance=s.data.data.paths[0].distance/1e3}}):r.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(e){t.distance=e.data.data.paths[0].distance/1e3}})}},isCreateOrderPriceAjax:function(){var t=this;return a(d.default.mark((function s(){var r,i,n,a,o,c,u,l,p,g,h,f,m,y,A,x,S,I,T,C,b,v;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("{}"==JSON.stringify(t.sendAddress)||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=117;break}if(r=null,i=null,n=null,a=null,o=null,c=null,u=null,t.sendAddress.addressDetail instanceof Array?(r=t.sendAddress.addressDetail[0]+""+t.sendAddress.addressDetail[1],n=t.sendAddress.addressDetail[1],i=t.sendAddress.addressDetail[2],a=t.sendAddress.addressDetail[0],o=t.endAddress.editAddress.name,c=t.endAddress.addressDetail,u=t.endAddress.editAddress.address):(r=t.sendAddress.editAddress.address+""+t.sendAddress.addressDetail,n=t.sendAddress.addressDetail,i=t.sendAddress.editAddress.name,a=t.sendAddress.editAddress.address,o=t.endAddress.editAddress.name,c=t.endAddress.addressDetail,u=t.endAddress.editAddress.address),l=r,p=r.indexOf("市"),l=r.substring(p+1,p+r.length),g=t.endAddress.editAddress.address+""+t.endAddress.addressDetail,h=g.indexOf("市"),g=g.substring(h+1,h+g.length),f=0,2===t.scrollIndex&&(f=50),e("log",t.choiceTime+"&&&&&&&&&&&"," at pages\\storage\\storage.vue:1929"),999!==t.rightIndex){s.next=71;break}if("{}"!==JSON.stringify(t.discount)){s.next=46;break}if(2!==t.scrollIndex||0!==t.helpBuy){s.next=32;break}return s.next=23,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 23:m=s.sent,e("log",m," at pages\\storage\\storage.vue:1980"),e("log","111"," at pages\\storage\\storage.vue:1981"),t.orderId=m.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=44;break;case 32:return y=0,2===t.scrollIndex&&(y=50),s.next=36,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:i,name:a,detail:n,userName:t.sendAddress.name,mobile:t.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,name:u,title:o,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:y,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 36:A=s.sent,e("log",A," at pages\\storage\\storage.vue:2033"),e("log","222"," at pages\\storage\\storage.vue:2034"),e("log",{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:i,name:a,detail:n,userName:t.sendAddress.name,mobile:t.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,name:u,title:o,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:y,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode}," at pages\\storage\\storage.vue:2035"),t.orderId=A.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 44:s.next=69;break;case 46:if(2!==t.scrollIndex||0!==t.helpBuy){s.next=58;break}return s.next=49,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 49:x=s.sent,e("log",x," at pages\\storage\\storage.vue:2135"),e("log","333"," at pages\\storage\\storage.vue:2136"),t.orderId=x.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=69;break;case 58:return S=0,2===t.scrollIndex&&(S=50),s.next=62,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:i,name:a,detail:n,userName:t.sendAddress.name,mobile:t.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:S,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 62:I=s.sent,e("log",I," at pages\\storage\\storage.vue:2190"),e("log","444"," at pages\\storage\\storage.vue:2191"),t.orderId=I.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 69:s.next=117;break;case 71:if("{}"!==JSON.stringify(t.discount)){s.next=96;break}if(2!==t.scrollIndex||0!==t.helpBuy){s.next=85;break}return e("log","创建5"," at pages\\storage\\storage.vue:2205"),s.next=76,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 76:T=s.sent,e("log",T," at pages\\storage\\storage.vue:2257"),e("log","55"," at pages\\storage\\storage.vue:2258"),t.orderId=T.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=94;break;case 85:return s.next=87,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:i,name:a,detail:n,userName:t.sendAddress.name,mobile:t.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 87:C=s.sent,e("log",C," at pages\\storage\\storage.vue:2308"),e("log","666"," at pages\\storage\\storage.vue:2309"),t.orderId=C.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 94:s.next=117;break;case 96:if(2!==t.scrollIndex||0!==t.helpBuy){s.next=108;break}return s.next=99,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 99:b=s.sent,e("log",b," at pages\\storage\\storage.vue:2373"),e("log","77"," at pages\\storage\\storage.vue:2374"),t.orderId=b.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=117;break;case 108:return s.next=110,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:i,name:a,detail:n,userName:t.sendAddress.name,mobile:t.sendAddress.mobile}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:f,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 110:v=s.sent,e("log",v," at pages\\storage\\storage.vue:2426"),e("log","88s"," at pages\\storage\\storage.vue:2427"),t.orderId=v.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 117:case"end":return s.stop()}}),s)})))()},countDownTimer:function(){var e=this;this.countDown=setInterval((function(){0===e.seconds&&0!==e.minutes?(e.seconds=59,e.minutes-=1):0===e.minutes&&0===e.seconds?(e.$refs.popupPay.close(),e.seconds=0,clearInterval(e.countDown),e.countDown=null,e.minutes=30,e.seconds=0):e.seconds-=1}),1e3)},num:function(e){return e<10?"0"+e:""+e},continueOrder:function(){var e=this;return a(d.default.mark((function t(){var s,i,n,a;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.horsemanCircle){t.next=15;break}return e.addPirce=e.newAddPrice,e.isInitOrderPriceAjax(),e.horseman=!1,s=e.sendAddress.latitude.split(",")[1],i=e.sendAddress.latitude.split(",")[0],n=null,t.next=9,e.$fetch(e.$api.getScanRange,{},"GET","Form");case 9:a=t.sent,0===a.code&&(n=Number(a.data.taskScanRange)+Number(a.data.addSubsidyScanRange)),r.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:s+","+i,radius:1e3*n},success:function(t){e.horsemanCount=t.data.data.count,e.horsemanList=t.data.data.results,0==e.horseman&&e.$refs.popups.open()}}),e.$refs.popups.open(),t.next=16;break;case 15:r.showToast({icon:"none",title:"请仔细阅读并同意加收运力费协议"});case 16:case"end":return t.stop()}}),t)})))()},payOrder:function(){var t=this;return a(d.default.mark((function s(){var i,n,o;return d.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r.showLoading({title:"正在下单中...."}),t.payFlag=!1,0!==t.circleShow){s.next=8;break}return s.next=5,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 5:i=s.sent,e("log",i," at pages\\storage\\storage.vue:2515"),0==i.code?(r.hideLoading(),r.showToast({icon:"success",title:i.msg}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),r.setStorageSync("userSelect",1),setTimeout((function(){r.setStorageSync("orderRefresh",!0),r.switchTab({url:"../order/order"})}),1500)):r.showToast({icon:"none",title:i.msg});case 8:if(1!==t.circleShow){s.next=13;break}return s.next=11,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 11:n=s.sent,r.requestPayment({provider:"alipay",orderInfo:n.msg,success:function(e){r.hideLoading(),r.showToast({icon:"success",title:"支付成功"}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),r.setStorageSync("userSelect",1),setTimeout((function(){r.setStorageSync("orderRefresh",!0),r.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=a(d.default.mark((function e(s){var i;return d.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.showToast({icon:"none",title:"支付失败"}),t.$refs.popupPay.close(),e.next=4,t.$fetch(t.$api.orderDetail,{id:t.orderId},"POST","Form");case 4:i=e.sent,0==i.code&&setTimeout((function(){r.setStorageSync("orderRefresh",!0),r.switchTab({url:"../order/order"}),r.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(i.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}()});case 13:if(2!==t.circleShow){s.next=18;break}return s.next=16,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 16:o=s.sent,r.requestPayment({provider:"wxpay",orderInfo:o.data,success:function(e){r.hideLoading(),r.showToast({icon:"success",title:"支付成功"}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),r.setStorageSync("userSelect",1),setTimeout((function(){r.setStorageSync("orderRefresh",!0),r.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=a(d.default.mark((function e(s){var i;return d.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.showToast({icon:"none",title:"支付失败"}),t.$refs.popupPay.close(),e.next=4,t.$fetch(t.$api.orderDetail,{id:t.orderId},"POST","Form");case 4:i=e.sent,0==i.code&&setTimeout((function(){r.setStorageSync("orderRefresh",!0),r.switchTab({url:"../order/order"}),r.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(i.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}()});case 18:case"end":return s.stop()}}),s)})))()},initRichText:function(){var e=this;return a(d.default.mark((function t(){var s;return d.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.articleType,{type:5},"Post","Form");case 2:s=t.sent,0==s.code&&(e.RichText=s.data);case 4:case"end":return t.stop()}}),t)})))()},goToRichText:function(e){r.navigateTo({url:"../rich-text/rich-text?id="+e})},choiceHelpbuyCircle:function(){this.helpbuyCircle=!this.helpbuyCircle}}};t.default=c}).call(this,s("0de9")["default"],s("6e42")["default"])},c76f:function(e,t,s){},e8a7:function(e,t,s){"use strict";var r={"uni-popup":function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"8f1d"))}},d=function(){var e=this,t=e.$createElement,s=(e._self._c,Number(e.car)),r=Number(e.car),d=JSON.stringify(e.shopInfo),i=JSON.stringify(e.discount),n=JSON.stringify(e.orderComputed),a=JSON.stringify(e.orderComputed),o=JSON.stringify(e.orderComputed),c=JSON.stringify(e.orderComputed),u=JSON.stringify(e.orderComputed),l=JSON.stringify(e.orderComputed),p=JSON.stringify(e.orderComputed),g=JSON.stringify(e.discount),h=JSON.stringify(e.orderComputed),f=(e.orderComputed.taskReward-e.orderComputed.payAmount).toFixed(2),m=JSON.stringify(e.orderComputed);e.$mp.data=Object.assign({},{$root:{m0:s,m1:r,g0:d,g1:i,g2:n,g3:a,g4:o,g5:c,g6:u,g7:l,g8:p,g9:g,g10:h,g11:f,g12:m}})},i=[];s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r}))}},[["3534","common/runtime","common/vendor"]]]);