(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storage/storage"],{3534:function(e,t,s){"use strict";(function(e){s("7207"),s("921b");d(s("66fd"));var t=d(s("7ae8"));function d(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},"4fcb":function(e,t,s){"use strict";var d={"u-upload":function(){return s.e("node-modules/uview-ui/components/u-upload/u-upload").then(s.bind(null,"282e"))},"uni-popup":function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"8f1d"))}},r=function(){var e=this,t=e.$createElement,s=(e._self._c,Number(e.car)),d=Number(e.car),r=JSON.stringify(e.shopInfo),n=JSON.stringify(e.discount),i=JSON.stringify(e.orderComputed),a=JSON.stringify(e.orderComputed),o=JSON.stringify(e.orderComputed),c=JSON.stringify(e.orderComputed),u=JSON.stringify(e.orderComputed),l=JSON.stringify(e.orderComputed),p=JSON.stringify(e.orderComputed),g=JSON.stringify(e.discount),h=JSON.stringify(e.orderComputed),m=(e.orderComputed.taskReward-e.orderComputed.payAmount).toFixed(2),f=JSON.stringify(e.orderComputed);e.$mp.data=Object.assign({},{$root:{m0:s,m1:d,g0:r,g1:n,g2:i,g3:a,g4:o,g5:c,g6:u,g7:l,g8:p,g9:g,g10:h,g11:m,g12:f}})},n=[];s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return d}))},"550e":function(e,t,s){"use strict";s.r(t);var d=s("a708"),r=s.n(d);for(var n in d)"default"!==n&&function(e){s.d(t,e,(function(){return d[e]}))}(n);t["default"]=r.a},"62c8":function(e,t,s){"use strict";var d=s("fc86"),r=s.n(d);r.a},"7ae8":function(e,t,s){"use strict";s.r(t);var d=s("4fcb"),r=s("550e");for(var n in r)"default"!==n&&function(e){s.d(t,e,(function(){return r[e]}))}(n);s("62c8");var i,a=s("f0c5"),o=Object(a["a"])(r["default"],d["b"],d["c"],!1,null,"02bb0e35",null,!1,d["a"],i);t["default"]=o.exports},a708:function(e,t,s){"use strict";(function(e,d){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(s("4795"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a(e,t,s,d,r,n,i){try{var a=e[n](i),o=a.value}catch(c){return void s(c)}a.done?t(o):Promise.resolve(o).then(d,r)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(d,r){var n=e.apply(t,s);function i(e){a(n,d,r,i,o,"next",e)}function o(e){a(n,d,r,i,o,"throw",e)}i(void 0)}))}}var c=function(){s.e("components/uni-popup/uni-popup").then(function(){return resolve(s("8f1d"))}.bind(null,s)).catch(s.oe)},u={onLoad:function(t){var s=this;this.getQiniuToken(),e("log",t.assignIndex," at pages\\storage\\storage.vue:454"),this.car=t.car,this.scrollIndex=Number(t.scrollIndex),e("log",this.scrollIndex," at pages\\storage\\storage.vue:457"),this.initAddress(),this.initorderProperty(),this.initRichText();var r=this.$dayjs().format("HH:mm");r=r.substring(0,r.length-1)+"0",this.nowTime=r;var n=this.timer.findIndex((function(t){if(e("log",t," at pages\\storage\\storage.vue:475"),e("log",s.nowTime," at pages\\storage\\storage.vue:476"),e("log","*****"," at pages\\storage\\storage.vue:477"),s.nowTime==t.start)return!0}));e("log",n," at pages\\storage\\storage.vue:482"),this.timeList=this.timer.slice(n+3),this.signCode=d.getStorageSync("user_signCode"),"{}"==JSON.stringify(this.sendAddress)?this.sendAddressShow=!0:this.sendAddressShow=!1},onShow:function(){var t=d.getSystemInfoSync();if(this.platform=t.platform,this.initMyInfo(),this.initorderProperty(),this.createOrderTimer=this.$dayjs().hour(),d.getStorageSync("sendAddress")){var s=JSON.parse(d.getStorageSync("sendAddress"));this.sendAddress,this.sendAddress=s,e("log",this.sendAddress," at pages\\storage\\storage.vue:514")}if(d.getStorageSync("endAddress")){var r=JSON.parse(d.getStorageSync("endAddress"));this.endAddress=r,"undefined"===this.endAddress.addressDetail&&(this.endAddress.addressDetail="")}if(d.getStorageSync("shopInfo")){var n=d.getStorageSync("shopInfo");n&&void 0!=n&&(this.shopInfo=n)}if(d.getStorageSync("discount")){var i=d.getStorageSync("discount");void 0!=i.value&&(this.discount=i),e("log",this.discount," at pages\\storage\\storage.vue:539")}else this.discount={};if(d.getStorageSync("takeTimer")){var a=d.getStorageSync("takeTimer");a&&void 0!=a&&(this.showChoiceTime=a)}this.isComputedDistance&&this.isComputedDistanceFunc(),this.isInitOrderPrice&&this.isInitOrderPriceAjax(),""!=this.countDown&&(clearInterval(this.countDown),this.minutes=30,this.seconds=0),"{}"==JSON.stringify(this.endAddress)?this.endAddressShow=!0:this.endAddressShow=!1,d.getStorageSync("remark")&&(this.remark=d.getStorageSync("remark"))},onUnload:function(){d.removeStorageSync("shopInfo"),d.removeStorageSync("discount"),d.removeStorageSync("takeTimer"),d.removeStorageSync("remark")},data:function(){return{action:"https://upload.qiniup.com/",fileList:[],QNtoken:{},pics:"",pickerTimerShow:!1,pickerTimerList:[1,2,3,4,6,7],platform:"",sendAddress:{},endAddress:{},car:0,scrollList:["帮我送","帮我取","帮我买"],carScrollList:["帮我送","帮我取"],scrollIndex:0,dayIndex:0,day:["今天","明天","后天"],rightIndex:999,timer:[{text:"9:00",start:"09:00",end:"9:10"},{text:"9:10",start:"09:10",end:"9:20"},{text:"9:20",start:"09:20",end:"9:30"},{text:"9:30",start:"09:30",end:"9:40"},{text:"9:40",start:"09:40",end:"9:50"},{text:"9:50",start:"09:50",end:"10"},{text:"10:00",start:"10:00",end:"10:10"},{text:"10:10",start:"10:10",end:"10:20"},{text:"10:20",start:"10:20",end:"10:30"},{text:"10:30",start:"10:30",end:"10:40"},{text:"10:40",start:"10:40",end:"10:50"},{text:"10:50",start:"10:50",end:"11"},{text:"11:00",start:"11:00",end:"11:10"},{text:"11:10",start:"11:10",end:"11:20"},{text:"11:20",start:"11:20",end:"11:30"},{text:"11:30",start:"11:30",end:"11:40"},{text:"11:40",start:"11:40",end:"11:50"},{text:"11:50",start:"11:50",end:"12"},{text:"12:00",start:"12:00",end:"12:10"},{text:"12:10",start:"12:10",end:"12:20"},{text:"12:20",start:"12:20",end:"12:30"},{text:"12:30",start:"12:30",end:"12:40"},{text:"12:40",start:"12:40",end:"12:50"},{text:"12:50",start:"12:50",end:"13"},{text:"13:00",start:"13:00",end:"13:10"},{text:"13:10",start:"13:10",end:"13:20"},{text:"13:20",start:"13:20",end:"13:30"},{text:"13:30",start:"13:30",end:"13:40"},{text:"13:40",start:"13:40",end:"13:50"},{text:"13:50",start:"13:50",end:"14"},{text:"14:00",start:"14:00",end:"14:10"},{text:"14:10",start:"14:10",end:"14:20"},{text:"14:20",start:"14:20",end:"14:30"},{text:"14:30",start:"14:30",end:"14:40"},{text:"14:40",start:"14:40",end:"14:50"},{text:"14:50",start:"14:50",end:"15"},{text:"15:00",start:"15:00",end:"15:10"},{text:"15:10",start:"15:10",end:"15:20"},{text:"15:20",start:"15:20",end:"15:30"},{text:"15:30",start:"15:30",end:"15:40"},{text:"15:40",start:"15:40",end:"15:50"},{text:"15:50",start:"15:50",end:"16"},{text:"16:00",start:"16:00",end:"16:10"},{text:"16:10",start:"16:10",end:"16:20"},{text:"16:20",start:"16:20",end:"16:30"},{text:"16:30",start:"16:30",end:"16:40"},{text:"16:40",start:"16:40",end:"16:50"},{text:"16:50",start:"16:50",end:"17"},{text:"17:00",start:"17:00",end:"17:10"},{text:"17:10",start:"17:10",end:"17:20"},{text:"17:20",start:"17:20",end:"17:30"},{text:"17:30",start:"17:30",end:"17:40"},{text:"17:40",start:"17:40",end:"17:50"},{text:"17:50",start:"17:50",end:"18"},{text:"18:00",start:"18:00",end:"18:10"},{text:"18:10",start:"18:10",end:"18:20"},{text:"18:20",start:"18:20",end:"18:30"},{text:"18:30",start:"18:30",end:"18:40"},{text:"18:40",start:"18:40",end:"18:50"},{text:"18:50",start:"18:50",end:"19"},{text:"19:00",start:"19:00",end:"19:10"},{text:"19:10",start:"19:10",end:"19:20"},{text:"19:20",start:"19:20",end:"19:30"},{text:"19:30",start:"19:30",end:"19:40"},{text:"19:40",start:"19:40",end:"19:50"},{text:"19:50",start:"19:50",end:"20"},{text:"20:00",start:"20:00",end:"20:10"},{text:"20:10",start:"20:10",end:"20:20"},{text:"20:20",start:"20:20",end:"20:30"},{text:"20:30",start:"20:30",end:"20:40"},{text:"20:40",start:"20:40",end:"20:50"},{text:"20:50",start:"20:50",end:"21"},{text:"21:00",start:"21:00",end:"21:10"},{text:"21:10",start:"21:10",end:"21:20"},{text:"21:20",start:"21:20",end:"21:30"},{text:"21:30",start:"21:30",end:"21:40"},{text:"21:40",start:"21:40",end:"21:50"},{text:"21:50",start:"21:50",end:"22"},{text:"22:00",start:"22:00",end:"22:10"},{text:"22:10",start:"22:10",end:"22:20"},{text:"22:20",start:"22:20",end:"22:30"},{text:"22:30",start:"22:30",end:"22:40"},{text:"22:40",start:"22:40",end:"22:50"},{text:"22:50",start:"22:50",end:"23"},{text:"23:00",start:"23:00",end:"23:10"},{text:"23:10",start:"23:10",end:"23:20"},{text:"23:20",start:"23:20",end:"23:30"},{text:"23:30",start:"23:30",end:"23:40"},{text:"23:40",start:"23:40",end:"23:50"},{text:"23:50",start:"23:50",end:"0"}],timeList:[],choiceTime:"",showChoiceTime:"",showDay:"",choiceMinunte:"",dayTimer:"",choiceMinunteEnd:"",assignList:["骑手就近购买","指定地址"],assignIndex:0,grant:[0,1,2,3,4,5],giveGrant:"",totalPrice:0,priceDetailshow:!1,payInfo:[{image:"../../static/img/my/yuezhifu.png",text:"余额支付",sectext:""},{image:"../../static/img/my/Alipaypayment.png",text:"支付宝支付（推荐）\t",sectext:""},{image:"../../static/img/my/weixinzhifu.png",text:"微信支付",sectext:""}],circleShow:0,horsemanCircle:!1,sendAddressShow:!0,endAddressShow:!0,shopInfo:{},discount:{},distance:"",signCode:0,goldCode:0,urgentCode:0,stayWarmCode:0,remark:"",orderComputed:{},minutes:30,seconds:0,countDown:"",horseman:!1,horsemanCount:"",horsemanList:[],addPirce:0,orderId:"",RichText:[],orderProperty:"",helpBuy:0,riderSide:3,payFlag:!0,shopAppraisement:!1,helpBuyTextArea:"",appraisement:"",helpbuyCircle:!0,choiceMinunteStart:"",Nhorseman:!1,xiaopiaoCircle:!1,newAddPrice:0,adcode:""}},components:{uniPopup:c},watch:{sendAddress:function(e,t){e!=t&&(this.sendAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.endAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},endAddress:function(e,t){e!=t&&(this.endAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.sendAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},signCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},goldCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},urgentCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},stayWarmCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},giveGrant:function(e,t){e!=t&&this.isInitOrderPriceAjax()},distance:function(e,t){e!=t&&this.isInitOrderPriceAjax()},second:{handler:function(e){this.num(e)}},minute:{handler:function(e){this.num(e)}}},computed:{isComputedDistance:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)},isInitOrderPrice:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)&&"{}"!=JSON.stringify(this.shopInfo)}},methods:{getQiniuToken:function(){var t=this;return o(r.default.mark((function s(){var d;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$fetch(t.$api.getQiniuToken,{},"POST","form");case 2:d=s.sent,e("log",d," at pages\\storage\\storage.vue:926"),t.QNtoken={token:d.data.token};case 5:case"end":return s.stop()}}),s)})))()},UpLoaded:function(e){var t=this;this.pics=[],e.forEach((function(e){t.pics.push(t.$api.baseLocation+e.response.hash)}))},RemoveImg:function(e,t){this.pics.splice(e,1)},closePay:function(e){clearInterval(this.countDown),this.countDown=null,this.minutes=30,this.seconds=0,!e.show&&this.payFlag&&d.getStorageSync("discount")&&(d.setStorageSync("userSelect",0),d.switchTab({url:"../order/order"}))},goBack:function(){d.navigateBack({delta:1})},goTofreight:function(e){d.navigateTo({url:"../freightDeatail/freightDeatail?freightInfo="+JSON.stringify(this.orderComputed)+"&status="+e})},goToRemark:function(){d.navigateTo({url:"../remark/remark"})},closeShopAppraisement:function(){e("log",this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:980"),e("log",!0===this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:981"),this.shopAppraisement=!this.shopAppraisement,d.hideKeyboard()},checkShopInfoPrice:function(){},needTicket:function(){this.xiaopiaoCircle=!this.xiaopiaoCircle,this.xiaopiaoCircle?this.helpBuyTextArea=this.helpBuyTextArea+" 需要小票,按小票结算":this.helpBuyTextArea=this.helpBuyTextArea.replace(" 需要小票,按小票结算","")},initMyInfo:function(){var e=this;return o(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.currentUser,{},"GET","form");case 2:s=t.sent,e.payInfo[0].sectext="("+Number(s.data.amount).toFixed(2)+")";case 4:case"end":return t.stop()}}),t)})))()},hangdleAssignIndex:function(e){var t=this;if(this.assignIndex=e,this.helpBuy=e,1==e){var s=this;this.sendAddress.addressDetail="",d.chooseLocation({success:function(e){var r=e;d.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+e.longitude+","+e.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===r.name&&(r.name=e.data.regeocode.aois[0].name),r.address=e.data.regeocode.formatted_address,t.sendAddress.addressDetail instanceof Array?(s.sendAddress.addressDetail[0]=r.address,s.sendAddress.addressDetail[1]="",s.sendAddress.addressDetail[2]=r.name,s.sendAddress.latitude=r.longitude+","+r.latitude):(s.sendAddress.editAddress=r,s.sendAddress.latitude=s.sendAddress.editAddress.longitude+","+s.sendAddress.editAddress.latitude),d.setStorageSync("sendAddress",JSON.stringify(s.sendAddress)),t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})},complete:function(){t.isComputedDistanceFunc(),t.isInitOrderPriceAjax()}})}this.isInitOrderPriceAjax()},handleScrollIndex:function(e){this.scrollIndex=e,this.shopInfo={},this.discount={},this.showChoiceTime="马上取件",this.assignIndex=0,this.choiceTime="",this.showDay="",this.choiceMinunte="",this.dayTimer="",this.choiceMinunteEnd="",this.giveGrant="",this.totalPrice=0,this.orderComputed={},this.helpBuy=0,this.helpBuyTextArea="",this.choiceMinunteStart=0,this.rightIndex=999,this.pics=[],d.removeStorageSync("takeTimer"),d.removeStorageSync("shopInfo"),d.removeStorageSync("discount")},pickTimer:function(){var e=this,t=this.timer.findIndex((function(t){if(e.nowTime==t.start)return!0}));this.timeList=this.timer.slice(t+3),this.$refs.popup.open(),this.pickerTimerShow=!0,this.handleDayIndex(this.dayIndex)},handleDayIndex:function(e){var t=this;if((e||0==e)&&(this.showDay=this.day[e]),this.dayIndex=e,0===e){this.dayTimer=this.$dayjs().format("YYYY-MM-DD");var s=this.timer.findIndex((function(e){if(t.nowTime==e.start)return!0}));this.timeList=this.timer.slice(s+3)}else 1===e?(this.dayTimer=this.$dayjs().add(1,"day").format("YYYY-MM-DD"),this.timeList=[]):2===e&&(this.dayTimer=this.$dayjs().add(2,"day").format("YYYY-MM-DD"),this.timeList=[]);this.rightIndex=999},handleRight:function(e,t){"马上取件"===this.showChoiceTime&&(this.choiceMinunteStart=0),this.rightIndex=t,this.choiceMinunte=e,this.choiceMinunteEnd=e.end,this.choiceMinunteStart=e.start},initTakeNow:function(){this.dayIndex=0,this.rightIndex=999},initorderProperty:function(){var e=this;return o(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.orderProperty,{carType:e.car},"GET","form");case 2:s=t.sent,e.orderProperty=s.data.bond,e.riderSide=s.data.distance,e.newAddPrice=s.data.capacitySubsidy,e.yunliTimerStart=s.data.noCapacityMonitoringPeriod.split("-")[0],e.yunliTimerEnd=s.data.noCapacityMonitoringPeriod.split("-")[1];case 8:case"end":return t.stop()}}),t)})))()},popSubmit:function(){this.$refs.popup.close(),this.choiceTime=this.dayTimer+" "+this.choiceMinunteStart,999!=this.rightIndex?this.showChoiceTime=this.showDay+" "+this.choiceMinunte.text:this.showChoiceTime="马上取件",d.setStorageSync("takeTimer",this.showChoiceTime)},goToAddress:function(e){d.navigateTo({url:"../address/address?address="+e})},setHelpBuyInfo:function(){this.appraisement<=0&&1==d.getStorageSync("shopInfo")?(this.appraisement=1,d.showToast({title:"商品预估价最低1元",icon:"none"})):this.appraisement>500&&(this.appraisement=500,d.showToast({title:"商品预估价最高500元",icon:"none"})),this.shopInfo.pics=JSON.stringify(this.pics),this.helpBuyTextArea.trim()&&(this.shopInfo.main=this.helpBuyTextArea),this.appraisement&&(this.shopInfo.price=this.appraisement),this.helpBuyTextArea.trim()&&this.appraisement&&(d.setStorageSync("shopInfo",this.shopInfo),this.isInitOrderPriceAjax()),""===this.helpBuyTextArea&&(this.orderComputed.payAmount=0)},goToShopInfo:function(){"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)?2==this.scrollIndex?d.navigateTo({url:"../buyShopInfo/buyShopInfo"}):d.navigateTo({url:"../shopInfo/shopInfo"}):d.showToast({icon:"none",title:"请先填写地址"})},goToDiscount:function(){d.navigateTo({url:"../discount/discount?payAmount="+this.orderComputed.payAmount})},selectedGrant:function(e){var t=e.detail.value;this.giveGrant=this.grant[t]},handleBilldetail:function(){var t=this;return o(r.default.mark((function s(){var n,i;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=t.sendAddress.latitude.split(",")[1],i=t.sendAddress.latitude.split(",")[0],2==t.scrollIndex&&0==t.assignIndex&&(n=t.endAddress.latitude.split(",")[1],i=t.endAddress.latitude.split(",")[0]),n=Number(n).toFixed(6),i=Number(i).toFixed(5),d.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+i+","+n+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(){var s=o(r.default.mark((function s(n){var i,a,o,c,u;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.adcode=n.data.regeocode.addressComponent.adcode.substring(0,4),s.next=3,t.$fetch(t.$api.testAdcode,{adcode:t.adcode},"POST","FORM");case 3:if(i=s.sent,e("log",i," at pages\\storage\\storage.vue:1282"),0==i.code){s.next=9;break}return s.abrupt("return",d.showToast({icon:"none",title:"该地区暂未开通服务，敬请期待"}));case 9:if(void 0!==t.shopInfo.main&&void 0!==t.shopInfo.price){s.next=12;break}return d.showToast({title:"请检查您要下单的信息",icon:"none"}),s.abrupt("return");case 12:if(2==t.scrollIndex){s.next=16;break}if(""!=t.sendAddress.mobile.trim()&&""!=t.sendAddress.name.trim()){s.next=16;break}return d.showToast({icon:"none",title:"请完善取货地址信息"}),s.abrupt("return");case 16:if(2!==t.scrollIndex||t.helpbuyCircle){s.next=19;break}return d.showToast({title:"请认真阅读帮买服务协议",icon:"none"}),s.abrupt("return");case 19:if(""!==t.sendAddress.latitude||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=22;break}return d.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),s.abrupt("return");case 22:if("{}"!==JSON.stringify(t.sendAddress.editAddress)&&"{}"!==JSON.stringify(t.endAddress.editAddress)){s.next=25;break}return d.showToast({icon:"none",title:"未获取到详细地址,请先完善信息"}),s.abrupt("return");case 25:if(!t.discount.type){s.next=29;break}if(!(t.orderComputed.payAmount<50)){s.next=29;break}return d.showToast({icon:"none",title:"订单金额小于50，无法使用优惠"}),s.abrupt("return");case 29:if("{}"!=JSON.stringify(t.sendAddress)&&"{}"!=JSON.stringify(t.endAddress)&&"{}"!=JSON.stringify(t.shopInfo)){s.next=34;break}return d.showToast({icon:"none",title:"请检查您要下单的信息"}),s.abrupt("return");case 34:return d.showLoading({title:"订单生成中"}),a=t.sendAddress.latitude.split(",")[1],o=t.sendAddress.latitude.split(",")[0],a=Number(a).toFixed(6),o=Number(o).toFixed(5),c=null,s.next=42,t.$fetch(t.$api.getScanRange,{},"GET","Form");case 42:u=s.sent,0===u.code&&(c=u.data.taskScanRange),d.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:a+","+o,radius:1e3*c},success:function(s){e("log",s," at pages\\storage\\storage.vue:1381"),d.hideLoading(),t.horsemanCount=s.data.data.count,t.horsemanList=s.data.data.results,t.createOrderTimer>=t.yunliTimerStart&&t.createOrderTimer<=t.yunliTimerEnd&&(t.horseman=!0,t.Nhorseman=!0),0==t.horseman&&(t.Nhorseman=!1,t.$refs.popups.open())}});case 45:case"end":return s.stop()}}),s)})));function n(e){return s.apply(this,arguments)}return n}()});case 6:case"end":return s.stop()}}),s)})))()},handlePopPay:function(){var e=this;return o(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCreateOrderPriceAjax();case 1:case"end":return t.stop()}}),t)})))()},handleCircle:function(e){this.circleShow=e},handleDetailshow:function(){this.priceDetailshow=!this.priceDetailshow},handleHorsemanCircle:function(){this.horsemanCircle=!this.horsemanCircle},handleHorsemanShow:function(){this.addPirce=0,this.isInitOrderPriceAjax(),this.horseman=!1},goToEdit:function(e,t,s){var r=this;if(2!==this.scrollIndex||0!==t||0!==this.assignIndex)if(2===this.scrollIndex&&0===t&&1===this.assignIndex){var n=this;d.chooseLocation({success:function(e){var t=e;d.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+e.longitude+","+e.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(e){"地图位置"===t.name&&(t.name=e.data.regeocode.aois[0].name),t.address=e.data.regeocode.formatted_address,r.sendAddress.addressDetail instanceof Array?(n.sendAddress.addressDetail[0]=t.address,n.sendAddress.addressDetail[1]="",n.sendAddress.addressDetail[2]=t.name,n.sendAddress.latitude=t.longitude+","+t.latitude):(n.sendAddress.editAddress=t,n.sendAddress.latitude=n.sendAddress.editAddress.longitude+","+n.sendAddress.editAddress.latitude),d.setStorageSync("sendAddress",JSON.stringify(n.sendAddress)),r.isComputedDistanceFunc(),r.isInitOrderPriceAjax()}})},complete:function(){r.isComputedDistanceFunc(),r.isInitOrderPriceAjax()}})}else d.navigateTo({url:"../editAddress/editAddress?addressInfo="+JSON.stringify(e)+"&status="+t+"&id="+s})},initAddress:function(){return o(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleSignCode:function(e){e.detail.value?this.signCode=1:this.signCode=0},handleGoldCode:function(e){e.detail.value?this.goldCode=1:this.goldCode=0},handleUrgentCode:function(e){e.detail.value?this.urgentCode=1:this.urgentCode=0},handleStayWarmCode:function(e){e.detail.value?this.stayWarmCode=1:this.stayWarmCode=0},isInitOrderPriceAjax:function(){var t=this;return o(r.default.mark((function s(){var n,i,a,o,c,u,l,p,g,h,m,f,y,x,A;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(""!==t.sendAddress.latitude||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=3;break}return d.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),s.abrupt("return");case 3:if(void 0!==t.shopInfo.price){s.next=5;break}return s.abrupt("return");case 5:if("{}"==JSON.stringify(t.sendAddress)||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)||""===t.sendAddress.latitude){s.next=89;break}if(n=null,n=t.sendAddress.addressDetail instanceof Array?t.sendAddress.addressDetail[0]+""+t.sendAddress.addressDetail[1]:t.sendAddress.editAddress.address+""+t.sendAddress.addressDetail,i=JSON.stringify(n),a=JSON.stringify(t.endAddress.editAddress.address+""+t.endAddress.addressDetail),999!==t.rightIndex){s.next=50;break}if("{}"!==JSON.stringify(t.discount)){s.next=31;break}if(2!==t.scrollIndex){s.next=25;break}if(0!==t.assignIndex){s.next=18;break}return s.next=16,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 16:o=s.sent,0==o.code&&(t.orderComputed=o.data);case 18:if(1!==t.assignIndex){s.next=23;break}return s.next=21,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 21:c=s.sent,0==c.code&&(t.orderComputed=c.data);case 23:s.next=29;break;case 25:return s.next=27,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 27:u=s.sent,0==u.code&&(t.orderComputed=u.data);case 29:s.next=48;break;case 31:if(2!==t.scrollIndex){s.next=44;break}if(0!==t.assignIndex){s.next=37;break}return s.next=35,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 35:l=s.sent,0==l.code&&(t.orderComputed=l.data);case 37:if(1!==t.assignIndex){s.next=42;break}return s.next=40,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:50,subsidy:t.addPirce},"POST");case 40:p=s.sent,0==p.code&&(t.orderComputed=p.data);case 42:s.next=48;break;case 44:return s.next=46,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 46:g=s.sent,0==g.code&&(t.orderComputed=g.data);case 48:s.next=89;break;case 50:if("{}"!==JSON.stringify(t.discount)){s.next=72;break}if(e("log",t.choiceTime+"*******************"," at pages\\storage\\storage.vue:1810"),2!==t.scrollIndex){s.next=66;break}if(0!==t.assignIndex){s.next=59;break}return s.next=56,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 56:h=s.sent,e("log",h," at pages\\storage\\storage.vue:1836"),0==h.code&&(t.orderComputed=h.data);case 59:if(1!==t.assignIndex){s.next=64;break}return s.next=62,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 62:m=s.sent,0==m.code&&(t.orderComputed=m.data);case 64:s.next=70;break;case 66:return s.next=68,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 68:f=s.sent,0==f.code&&(t.orderComputed=f.data);case 70:s.next=89;break;case 72:if(2!==t.scrollIndex){s.next=85;break}if(0!==t.assignIndex){s.next=78;break}return s.next=76,t.$fetch(t.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 76:y=s.sent,0==y.code&&(t.orderComputed=y.data);case 78:if(1!==t.assignIndex){s.next=83;break}return s.next=81,t.$fetch(t.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:t.shopInfo.price,subsidy:t.addPirce},"POST");case 81:x=s.sent,0==x.code&&(t.orderComputed=x.data);case 83:s.next=89;break;case 85:return s.next=87,t.$fetch(t.$api.orderCalculation,{buyAddressType:t.assignIndex,startAddress:JSON.stringify({addressDetail:i,latitude:t.sendAddress.latitude,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:a,latitude:t.endAddress.latitude,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:"",subsidy:t.addPirce},"POST");case 87:A=s.sent,0==A.code&&(t.orderComputed=A.data);case 89:case"end":return s.stop()}}),s)})))()},isComputedDistanceFunc:function(){var t=this;if("{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)){this.sendAddress.addressDetail instanceof Array?d.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(s){e("log",s.data," at pages\\storage\\storage.vue:2020"),t.distance=s.data.data.paths[0].distance/1e3}}):d.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(e){t.distance=e.data.data.paths[0].distance/1e3}})}},isCreateOrderPriceAjax:function(){var t=this;return o(r.default.mark((function s(){var d,n,i,a,o,c,u,l,p,g,h,m,f,y,x,A,b,I,S,N,T,C;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("{}"==JSON.stringify(t.sendAddress)||"{}"==JSON.stringify(t.endAddress)||"{}"==JSON.stringify(t.shopInfo)){s.next=116;break}if(d=null,n=null,i=null,a=null,o=null,c=null,u=null,t.sendAddress.addressDetail instanceof Array?(d=t.sendAddress.addressDetail[0]+""+t.sendAddress.addressDetail[1],i=t.sendAddress.addressDetail[1],n=t.sendAddress.addressDetail[2],a=t.sendAddress.addressDetail[0],o=t.endAddress.editAddress.name,c=t.endAddress.addressDetail,u=t.endAddress.editAddress.address):(d=t.sendAddress.editAddress.address+""+t.sendAddress.addressDetail,i=t.sendAddress.addressDetail,n=t.sendAddress.editAddress.name,a=t.sendAddress.editAddress.address,o=t.endAddress.editAddress.name,c=t.endAddress.addressDetail,u=t.endAddress.editAddress.address),l=d,p=d.indexOf("市"),l=d.substring(p+1,p+d.length),g=t.endAddress.editAddress.address+""+t.endAddress.addressDetail,h=g.indexOf("市"),g=g.substring(h+1,h+g.length),m=0,2===t.scrollIndex&&(m=50),999!==t.rightIndex){s.next=70;break}if("{}"!==JSON.stringify(t.discount)){s.next=45;break}if(2!==t.scrollIndex||0!==t.helpBuy){s.next=31;break}return s.next=22,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 22:f=s.sent,e("log",f," at pages\\storage\\storage.vue:2154"),e("log","111"," at pages\\storage\\storage.vue:2155"),t.orderId=f.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=43;break;case 31:return y=0,2===t.scrollIndex&&(y=50),s.next=35,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:n,name:a,detail:i,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,name:u,title:o,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:y,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 35:x=s.sent,e("log",x," at pages\\storage\\storage.vue:2209"),e("log","222"," at pages\\storage\\storage.vue:2210"),e("log",{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:n,name:a,detail:i,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,name:u,title:o,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:y,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode}," at pages\\storage\\storage.vue:2211"),t.orderId=x.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 43:s.next=68;break;case 45:if(2!==t.scrollIndex||0!==t.helpBuy){s.next=57;break}return s.next=48,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 48:A=s.sent,e("log",A," at pages\\storage\\storage.vue:2315"),e("log","333"," at pages\\storage\\storage.vue:2316"),t.orderId=A.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=68;break;case 57:return b=0,2===t.scrollIndex&&(b=50),s.next=61,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:n,name:a,detail:i,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:0,carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:b,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 61:I=s.sent,e("log",I," at pages\\storage\\storage.vue:2372"),e("log","444"," at pages\\storage\\storage.vue:2373"),t.orderId=I.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 68:s.next=116;break;case 70:if("{}"!==JSON.stringify(t.discount)){s.next=95;break}if(2!==t.scrollIndex||0!==t.helpBuy){s.next=84;break}return e("log","创建5"," at pages\\storage\\storage.vue:2387"),s.next=75,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 75:S=s.sent,e("log",S," at pages\\storage\\storage.vue:2441"),e("log","55"," at pages\\storage\\storage.vue:2442"),t.orderId=S.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=93;break;case 84:return s.next=86,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:n,name:a,detail:i,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 86:N=s.sent,e("log",N," at pages\\storage\\storage.vue:2494"),e("log","666"," at pages\\storage\\storage.vue:2495"),t.orderId=N.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 93:s.next=116;break;case 95:if(2!==t.scrollIndex||0!==t.helpBuy){s.next=107;break}return s.next=98,t.$fetch(t.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.riderSide,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 98:T=s.sent,e("log",T," at pages\\storage\\storage.vue:2561"),e("log","77"," at pages\\storage\\storage.vue:2562"),t.orderId=T.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer(),s.next=116;break;case 107:return s.next=109,t.$fetch(t.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:l,latitude:t.sendAddress.latitude,title:n,name:a,detail:i,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,extensionNumber:t.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:g,latitude:t.endAddress.latitude,title:o,name:u,detail:c,userName:t.endAddress.name,mobile:t.endAddress.mobile,extensionNumber:t.endAddress.extensionNumber}),tip:t.giveGrant,goodsInventory:JSON.stringify({weight:t.shopInfo.weight,cost:t.shopInfo.price,goods:t.shopInfo.main,pics:t.shopInfo.pics}),distance:t.distance,type:t.scrollIndex,pickUpType:1,pickUpTime:t.choiceTime+":00:00",carType:t.car,incubatorFlag:t.stayWarmCode,premiumFlag:t.goldCode,urgentExpressPriceFlag:t.urgentCode,signForCodeFlag:t.signCode,userCouponId:t.discount.id,goodsPredictAmount:m,subsidy:t.addPirce,remark:t.remark,adcode:t.adcode},"POST");case 109:C=s.sent,e("log",C," at pages\\storage\\storage.vue:2616"),e("log","88s"," at pages\\storage\\storage.vue:2617"),t.orderId=C.data,t.$refs.popups.close(),t.$refs.popupPay.open(),t.countDownTimer();case 116:case"end":return s.stop()}}),s)})))()},countDownTimer:function(){var e=this;this.countDown=setInterval((function(){0===e.seconds&&0!==e.minutes?(e.seconds=59,e.minutes-=1):0===e.minutes&&0===e.seconds?(e.$refs.popupPay.close(),e.seconds=0,clearInterval(e.countDown),e.countDown=null,e.minutes=30,e.seconds=0):e.seconds-=1}),1e3)},num:function(e){return e<10?"0"+e:""+e},continueOrder:function(){var e=this;return o(r.default.mark((function t(){var s,n,i,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.horsemanCircle){t.next=15;break}return e.addPirce=e.newAddPrice,e.isInitOrderPriceAjax(),e.horseman=!1,s=e.sendAddress.latitude.split(",")[1],n=e.sendAddress.latitude.split(",")[0],i=null,t.next=9,e.$fetch(e.$api.getScanRange,{},"GET","Form");case 9:a=t.sent,0===a.code&&(i=Number(a.data.taskScanRange)+Number(a.data.addSubsidyScanRange)),d.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:s+","+n,radius:1e3*i},success:function(t){e.horsemanCount=t.data.data.count,e.horsemanList=t.data.data.results,0==e.horseman&&e.$refs.popups.open()}}),e.$refs.popups.open(),t.next=16;break;case 15:d.showToast({icon:"none",title:"请仔细阅读并同意加收运力费协议"});case 16:case"end":return t.stop()}}),t)})))()},payOrder:function(){var t=this;return o(r.default.mark((function s(){var n,a,c,u,l,p,g,h,m,f,y,x,A,b;return r.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(d.showLoading({title:"正在下单中...."}),t.payFlag=!1,n=null,a=null,c=null,u=null,l=null,p=null,g=null,t.sendAddress.addressDetail instanceof Array?(n=t.sendAddress.addressDetail[0]+""+t.sendAddress.addressDetail[1],c=t.sendAddress.addressDetail[1],a=t.sendAddress.addressDetail[2],u=t.sendAddress.addressDetail[0],l=t.endAddress.editAddress.name,p=t.endAddress.addressDetail,g=t.endAddress.editAddress.address):(n=t.sendAddress.editAddress.address+""+t.sendAddress.addressDetail,c=t.sendAddress.addressDetail,a=t.sendAddress.editAddress.name,u=t.sendAddress.editAddress.address,l=t.endAddress.editAddress.name,p=t.endAddress.addressDetail,g=t.endAddress.editAddress.address),n,h=n.indexOf("市"),n.substring(h+1,h+n.length),m=t.endAddress.editAddress.address+""+t.endAddress.addressDetail,f=m.indexOf("市"),m=m.substring(f+1,f+m.length),0!==t.circleShow){s.next=22;break}return s.next=19,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 19:y=s.sent,e("log",y," at pages\\storage\\storage.vue:2758"),0==y.code?(d.hideLoading(),d.showToast({icon:"success",title:y.msg}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),d.setStorageSync("userSelect",1),0==t.scrollIndex?(e("log",t.sendAddress," at pages\\storage\\storage.vue:2782"),d.setStorageSync("helpMeBuy",JSON.stringify((x={addressDetail:t.sendAddress.addressDetail,latitude:t.sendAddress.latitude,title:a,name:u,detail:c,userName:t.sendAddress.name,mobile:t.sendAddress.mobile,editAddress:JSON.stringify(t.sendAddress.editAddress)},i(x,"name",u),i(x,"mobile",t.sendAddress.mobile),i(x,"extensionNumber",t.sendAddress.extensionNumber),x)))):1==t.scrollIndex&&(e("log",t.endAddress," at pages\\storage\\storage.vue:2799"),d.setStorageSync("helpMeGet",JSON.stringify({addressDetail:t.endAddress.addressDetail,latitude:t.endAddress.latitude,name:g,title:l,detail:p,userName:t.endAddress.name,mobile:t.endAddress.mobile,editAddress:JSON.stringify(t.endAddress.editAddress),extensionNumber:t.endAddress.extensionNumber}))),setTimeout((function(){d.setStorageSync("orderRefresh",!0),d.switchTab({url:"../order/order"})}),1500)):d.showToast({icon:"none",title:y.msg});case 22:if(1!==t.circleShow){s.next=27;break}return s.next=25,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 25:A=s.sent,d.requestPayment({provider:"alipay",orderInfo:A.msg,success:function(e){d.hideLoading(),d.showToast({icon:"success",title:"支付成功"}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),d.setStorageSync("userSelect",1),setTimeout((function(){d.setStorageSync("orderRefresh",!0),d.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=o(r.default.mark((function e(s){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.showToast({icon:"none",title:"支付失败"}),t.$refs.popupPay.close(),e.next=4,t.$fetch(t.$api.orderDetail,{id:t.orderId},"POST","Form");case 4:n=e.sent,0==n.code&&setTimeout((function(){d.setStorageSync("orderRefresh",!0),d.switchTab({url:"../order/order"}),d.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(n.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}()});case 27:if(2!==t.circleShow){s.next=32;break}return s.next=30,t.$fetch(t.$api.orderPay,{orderId:t.orderId,payType:t.circleShow},"POST","form");case 30:b=s.sent,d.requestPayment({provider:"wxpay",orderInfo:b.data,success:function(e){d.hideLoading(),d.showToast({icon:"success",title:"支付成功"}),clearInterval(t.countDown),t.countDown=null,t.minutes=30,t.seconds=0,t.$refs.popupPay.close(),d.setStorageSync("userSelect",1),setTimeout((function(){d.setStorageSync("orderRefresh",!0),d.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=o(r.default.mark((function e(s){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.showToast({icon:"none",title:"支付失败"}),t.$refs.popupPay.close(),e.next=4,t.$fetch(t.$api.orderDetail,{id:t.orderId},"POST","Form");case 4:n=e.sent,0==n.code&&setTimeout((function(){d.setStorageSync("orderRefresh",!0),d.switchTab({url:"../order/order"}),d.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(n.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function s(t){return e.apply(this,arguments)}return s}()});case 32:case"end":return s.stop()}}),s)})))()},initRichText:function(){var e=this;return o(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch(e.$api.articleType,{type:5},"Post","Form");case 2:s=t.sent,0==s.code&&(e.RichText=s.data);case 4:case"end":return t.stop()}}),t)})))()},goToRichText:function(e){d.navigateTo({url:"../rich-text/rich-text?id="+e})},choiceHelpbuyCircle:function(){this.helpbuyCircle=!this.helpbuyCircle}}};t.default=u}).call(this,s("0de9")["default"],s("6e42")["default"])},fc86:function(e,t,s){}},[["3534","common/runtime","common/vendor"]]]);