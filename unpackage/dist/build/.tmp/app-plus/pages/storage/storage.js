(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storage/storage"],{"0ed3":function(e,t,s){"use strict";var i=s("cee8"),r=s.n(i);r.a},"283d":function(e,t,s){"use strict";var i={"u-upload":function(){return s.e("node-modules/uview-ui/components/u-upload/u-upload").then(s.bind(null,"3347"))},"uni-popup":function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"0a69"))}},r=function(){var e=this,t=e.$createElement,s=(e._self._c,Number(e.car)),i=Number(e.car),r=JSON.stringify(e.qpInfo),d=JSON.stringify(e.shopInfo),n=JSON.stringify(e.discount),a=JSON.stringify(e.orderComputed),o=JSON.stringify(e.orderComputed),h=JSON.stringify(e.orderComputed),c=JSON.stringify(e.orderComputed),u=JSON.stringify(e.orderComputed),l=JSON.stringify(e.orderComputed),p=JSON.stringify(e.orderComputed),g=JSON.stringify(e.discount),f=JSON.stringify(e.orderComputed),m=(e.orderComputed.taskReward-e.orderComputed.payAmount).toFixed(2);e.$mp.data=Object.assign({},{$root:{m0:s,m1:i,g0:r,g1:d,g2:n,g3:a,g4:o,g5:h,g6:c,g7:u,g8:l,g9:p,g10:g,g11:f,g12:m}})},d=[];s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return i}))},"3ff8":function(e,t,s){"use strict";s.r(t);var i=s("283d"),r=s("e508");for(var d in r)"default"!==d&&function(e){s.d(t,e,(function(){return r[e]}))}(d);s("0ed3");var n,a=s("f0c5"),o=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"c172c07c",null,!1,i["a"],n);t["default"]=o.exports},"459b":function(e,t,s){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(s("a34a"));function d(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a(e,t,s,i,r,d,n){try{var a=e[d](n),o=a.value}catch(h){return void s(h)}a.done?t(o):Promise.resolve(o).then(i,r)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(i,r){var d=e.apply(t,s);function n(e){a(d,i,r,n,o,"next",e)}function o(e){a(d,i,r,n,o,"throw",e)}n(void 0)}))}}var h=function(){s.e("components/uni-popup/uni-popup").then(function(){return resolve(s("0a69"))}.bind(null,s)).catch(s.oe)},c={onLoad:function(t){var s=this,r=this.$dayjs().format("HH:mm");e("log","(***************)"," at pages\\storage\\storage.vue:464"),r=r.substring(0,r.length-1)+"0",this.nowTime=r;var d=this.timer.findIndex((function(t){if(e("log",t," at pages\\storage\\storage.vue:473"),e("log",s.nowTime," at pages\\storage\\storage.vue:474"),e("log","*****"," at pages\\storage\\storage.vue:475"),s.nowTime==t.start)return!0}));if(e("log",d," at pages\\storage\\storage.vue:480"),this.timeList=this.timer.slice(d+3),this.getQiniuToken(),e("log",t.assignIndex," at pages\\storage\\storage.vue:484"),this.car=t.car,this.scrollIndex=Number(t.scrollIndex),e("log",this.scrollIndex," at pages\\storage\\storage.vue:487"),this.initAddress(),this.initorderProperty(),this.initRichText(),"{}"!=i.getStorageSync("helpMeShopInfo")){var n=JSON.parse(i.getStorageSync("helpMeShopInfo"));e("log",i.getStorageSync("helpMeShopInfo")," at pages\\storage\\storage.vue:500"),e("log",n," at pages\\storage\\storage.vue:501"),this.qpInfo=n,i.removeStorageSync("helpMeShopInfo"),e("log",this.qpInfo," at pages\\storage\\storage.vue:504")}this.signCode=i.getStorageSync("user_signCode"),"{}"==JSON.stringify(this.sendAddress)?this.sendAddressShow=!0:this.sendAddressShow=!1},onShow:function(){var t=i.getSystemInfoSync();if(this.platform=t.platform,this.initMyInfo(),this.initorderProperty(),this.createOrderTimer=this.$dayjs().hour(),i.getStorageSync("sendAddress")){var s=JSON.parse(i.getStorageSync("sendAddress"));this.sendAddress,this.sendAddress=s,e("log",this.sendAddress," at pages\\storage\\storage.vue:538")}if(i.getStorageSync("endAddress")){var r=JSON.parse(i.getStorageSync("endAddress"));this.endAddress=r,"undefined"===this.endAddress.addressDetail&&(this.endAddress.addressDetail="")}if(i.getStorageSync("shopInfo")){var d=i.getStorageSync("shopInfo");d&&void 0!=d&&(this.shopInfo=d)}if(i.getStorageSync("discount")){var n=i.getStorageSync("discount");void 0!=n.value&&(this.discount=n),e("log",this.discount," at pages\\storage\\storage.vue:563")}else this.discount={};if(i.getStorageSync("takeTimer")){var a=i.getStorageSync("takeTimer");a&&void 0!=a&&(this.showChoiceTime=a)}this.isComputedDistance&&this.isComputedDistanceFunc(),this.isInitOrderPrice&&this.isInitOrderPriceAjax(),""!=this.countDown&&(clearInterval(this.countDown),this.minutes=30,this.seconds=0),"{}"==JSON.stringify(this.endAddress)?this.endAddressShow=!0:this.endAddressShow=!1,i.getStorageSync("remark")&&(this.remark=i.getStorageSync("remark"))},onUnload:function(){i.removeStorageSync("shopInfo"),i.removeStorageSync("discount"),i.removeStorageSync("takeTimer"),i.removeStorageSync("remark")},data:function(){return{action:"https://upload.qiniup.com/",fileList:[],QNtoken:{},pics:"",qpInfo:{},pickerTimerShow:!1,pickerTimerList:[1,2,3,4,6,7],platform:"",sendAddress:{},endAddress:{},car:0,scrollList:["帮我送","帮我取","帮我买"],carScrollList:["帮我送","帮我取"],scrollIndex:0,dayIndex:0,day:["今天","明天","后天"],rightIndex:999,timer:[{text:"9:00",start:"09:00",end:"9:10"},{text:"9:10",start:"09:10",end:"9:20"},{text:"9:20",start:"09:20",end:"9:30"},{text:"9:30",start:"09:30",end:"9:40"},{text:"9:40",start:"09:40",end:"9:50"},{text:"9:50",start:"09:50",end:"10"},{text:"10:00",start:"10:00",end:"10:10"},{text:"10:10",start:"10:10",end:"10:20"},{text:"10:20",start:"10:20",end:"10:30"},{text:"10:30",start:"10:30",end:"10:40"},{text:"10:40",start:"10:40",end:"10:50"},{text:"10:50",start:"10:50",end:"11"},{text:"11:00",start:"11:00",end:"11:10"},{text:"11:10",start:"11:10",end:"11:20"},{text:"11:20",start:"11:20",end:"11:30"},{text:"11:30",start:"11:30",end:"11:40"},{text:"11:40",start:"11:40",end:"11:50"},{text:"11:50",start:"11:50",end:"12"},{text:"12:00",start:"12:00",end:"12:10"},{text:"12:10",start:"12:10",end:"12:20"},{text:"12:20",start:"12:20",end:"12:30"},{text:"12:30",start:"12:30",end:"12:40"},{text:"12:40",start:"12:40",end:"12:50"},{text:"12:50",start:"12:50",end:"13"},{text:"13:00",start:"13:00",end:"13:10"},{text:"13:10",start:"13:10",end:"13:20"},{text:"13:20",start:"13:20",end:"13:30"},{text:"13:30",start:"13:30",end:"13:40"},{text:"13:40",start:"13:40",end:"13:50"},{text:"13:50",start:"13:50",end:"14"},{text:"14:00",start:"14:00",end:"14:10"},{text:"14:10",start:"14:10",end:"14:20"},{text:"14:20",start:"14:20",end:"14:30"},{text:"14:30",start:"14:30",end:"14:40"},{text:"14:40",start:"14:40",end:"14:50"},{text:"14:50",start:"14:50",end:"15"},{text:"15:00",start:"15:00",end:"15:10"},{text:"15:10",start:"15:10",end:"15:20"},{text:"15:20",start:"15:20",end:"15:30"},{text:"15:30",start:"15:30",end:"15:40"},{text:"15:40",start:"15:40",end:"15:50"},{text:"15:50",start:"15:50",end:"16"},{text:"16:00",start:"16:00",end:"16:10"},{text:"16:10",start:"16:10",end:"16:20"},{text:"16:20",start:"16:20",end:"16:30"},{text:"16:30",start:"16:30",end:"16:40"},{text:"16:40",start:"16:40",end:"16:50"},{text:"16:50",start:"16:50",end:"17"},{text:"17:00",start:"17:00",end:"17:10"},{text:"17:10",start:"17:10",end:"17:20"},{text:"17:20",start:"17:20",end:"17:30"},{text:"17:30",start:"17:30",end:"17:40"},{text:"17:40",start:"17:40",end:"17:50"},{text:"17:50",start:"17:50",end:"18"},{text:"18:00",start:"18:00",end:"18:10"},{text:"18:10",start:"18:10",end:"18:20"},{text:"18:20",start:"18:20",end:"18:30"},{text:"18:30",start:"18:30",end:"18:40"},{text:"18:40",start:"18:40",end:"18:50"},{text:"18:50",start:"18:50",end:"19"},{text:"19:00",start:"19:00",end:"19:10"},{text:"19:10",start:"19:10",end:"19:20"},{text:"19:20",start:"19:20",end:"19:30"},{text:"19:30",start:"19:30",end:"19:40"},{text:"19:40",start:"19:40",end:"19:50"},{text:"19:50",start:"19:50",end:"20"},{text:"20:00",start:"20:00",end:"20:10"},{text:"20:10",start:"20:10",end:"20:20"},{text:"20:20",start:"20:20",end:"20:30"},{text:"20:30",start:"20:30",end:"20:40"},{text:"20:40",start:"20:40",end:"20:50"},{text:"20:50",start:"20:50",end:"21"},{text:"21:00",start:"21:00",end:"21:10"},{text:"21:10",start:"21:10",end:"21:20"},{text:"21:20",start:"21:20",end:"21:30"},{text:"21:30",start:"21:30",end:"21:40"},{text:"21:40",start:"21:40",end:"21:50"},{text:"21:50",start:"21:50",end:"22"},{text:"22:00",start:"22:00",end:"22:10"},{text:"22:10",start:"22:10",end:"22:20"},{text:"22:20",start:"22:20",end:"22:30"},{text:"22:30",start:"22:30",end:"22:40"},{text:"22:40",start:"22:40",end:"22:50"},{text:"22:50",start:"22:50",end:"23"},{text:"23:00",start:"23:00",end:"23:10"},{text:"23:10",start:"23:10",end:"23:20"},{text:"23:20",start:"23:20",end:"23:30"},{text:"23:30",start:"23:30",end:"23:40"},{text:"23:40",start:"23:40",end:"23:50"},{text:"23:50",start:"23:50",end:"0"}],timeList:[],choiceTime:"",showChoiceTime:"",showDay:"",choiceMinunte:"",dayTimer:"",choiceMinunteEnd:"",assignList:["骑手就近购买","指定地址"],assignIndex:0,grant:[0,1,2,3,4,5],giveGrant:"",totalPrice:0,priceDetailshow:!1,payInfo:[{image:"../../static/img/my/yuezhifu.png",text:"余额支付",sectext:""},{image:"../../static/img/my/Alipaypayment.png",text:"支付宝支付（推荐）\t",sectext:""},{image:"../../static/img/my/weixinzhifu.png",text:"微信支付",sectext:""}],circleShow:0,horsemanCircle:!1,sendAddressShow:!0,endAddressShow:!0,shopInfo:{},discount:{},distance:"",signCode:0,goldCode:0,urgentCode:0,stayWarmCode:0,remark:"",orderComputed:{},minutes:30,seconds:0,countDown:"",horseman:!1,horsemanCount:"",horsemanList:[],addPirce:0,orderId:"",RichText:[],orderProperty:"",helpBuy:0,riderSide:3,payFlag:!0,shopAppraisement:!1,helpBuyTextArea:"",appraisement:"",helpbuyCircle:!0,choiceMinunteStart:"",Nhorseman:!1,xiaopiaoCircle:!1,newAddPrice:0,adcode:"",point:{point:{},city:"",address:"",name:""}}},components:{uniPopup:h},watch:{point:{deep:!0,handler:function(t){var s=this;e("log",t," at pages\\storage\\storage.vue:876"),i.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+t.point.longitude+","+t.point.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(r){s.sendAddressShow=!1,s.sendAddress.addressDetail instanceof Array?(s.sendAddress.addressDetail[0]=t.address,s.sendAddress.addressDetail[1]="",s.sendAddress.addressDetail[2]=t.name,s.sendAddress.latitude=t.point.longitude+","+t.point.latitude):(s.sendAddress.editAddress={address:t.address,latitude:t.point.latitude,name:t.name,longitude:t.point.longitude},s.sendAddress.latitude=t.point.longitude+","+t.point.latitude),e("log",JSON.stringify(s.sendAddress)," at pages\\storage\\storage.vue:914"),i.setStorageSync("sendAddress",JSON.stringify(s.sendAddress)),s.isComputedDistanceFunc(),s.isInitOrderPriceAjax()}})}},sendAddress:function(e,t){e!=t&&(this.sendAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.endAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},endAddress:function(e,t){e!=t&&(this.endAddressShow=!1,"{}"!=JSON.stringify(e)&&"{}"!=JSON.stringify(this.sendAddress)&&this.isComputedDistanceFunc(),this.isInitOrderPriceAjax())},signCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},goldCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},urgentCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},stayWarmCode:function(e,t){e!=t&&this.isInitOrderPriceAjax()},giveGrant:function(e,t){e!=t&&this.isInitOrderPriceAjax()},distance:function(e,t){e!=t&&this.isInitOrderPriceAjax()},second:{handler:function(e){this.num(e)}},minute:{handler:function(e){this.num(e)}}},computed:{isComputedDistance:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)},isInitOrderPrice:function(){return"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)&&"{}"!=JSON.stringify(this.shopInfo)}},methods:{getQiniuToken:function(){var t=o(r.default.mark((function t(){var s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$fetch(this.$api.getQiniuToken,{},"POST","form");case 2:s=t.sent,e("log",s," at pages\\storage\\storage.vue:1005"),this.QNtoken={token:s.data.token};case 5:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),handleQnBox:function(){this.qpInfo={}},UpLoaded:function(e){var t=this;this.pics=[],e.forEach((function(e){t.pics.push(t.$api.baseLocation+e.response.hash)}))},RemoveImg:function(e,t){this.pics.splice(e,1)},closePay:function(e){clearInterval(this.countDown),this.countDown=null,this.minutes=30,this.seconds=0,!e.show&&this.payFlag&&i.getStorageSync("discount")&&(i.setStorageSync("userSelect",0),i.switchTab({url:"../order/order"}))},handleHelpQpInfo:function(){this.shopInfo=this.qpInfo,this.qpInfo={},this.isComputedDistance&&this.isComputedDistanceFunc(),this.isInitOrderPrice&&this.isInitOrderPriceAjax()},goBack:function(){i.navigateBack({delta:1})},goTofreight:function(e){i.navigateTo({url:"../freightDeatail/freightDeatail?freightInfo="+JSON.stringify(this.orderComputed)+"&status="+e})},goToRemark:function(){i.navigateTo({url:"../remark/remark"})},closeShopAppraisement:function(){e("log",this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:1075"),e("log",!0===this.helpBuyTextArea.trim()," at pages\\storage\\storage.vue:1076"),this.shopAppraisement=!this.shopAppraisement,i.hideKeyboard()},checkShopInfoPrice:function(){},needTicket:function(){this.xiaopiaoCircle=!this.xiaopiaoCircle,this.xiaopiaoCircle?this.helpBuyTextArea=this.helpBuyTextArea+" 需要小票,按小票结算":this.helpBuyTextArea=this.helpBuyTextArea.replace(" 需要小票,按小票结算","")},initMyInfo:function(){var e=o(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.currentUser,{},"GET","form");case 2:t=e.sent,this.payInfo[0].sectext="("+Number(t.data.amount).toFixed(2)+")";case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hangdleAssignIndex:function(e){if(this.assignIndex=e,this.helpBuy=e,1==e){this.sendAddress.addressDetail="",i.navigateTo({url:"../choose-location/choose-location",animationType:"slide-in-bottom"})}},handleScrollIndex:function(e){this.scrollIndex=e,this.shopInfo={},this.discount={},this.showChoiceTime="马上取件",this.assignIndex=0,this.choiceTime="",this.showDay="",this.choiceMinunte="",this.dayTimer="",this.choiceMinunteEnd="",this.giveGrant="",this.totalPrice=0,this.orderComputed={},this.helpBuy=0,this.helpBuyTextArea="",this.choiceMinunteStart=0,this.rightIndex=999,this.pics=[],i.removeStorageSync("takeTimer"),i.removeStorageSync("shopInfo"),i.removeStorageSync("discount")},pickTimer:function(){var e=this,t=this.timer.findIndex((function(t){if(e.nowTime==t.start)return!0}));this.timeList=this.timer.slice(t+3),this.$refs.popup.open(),this.pickerTimerShow=!0,this.handleDayIndex(this.dayIndex)},handleDayIndex:function(e){var t=this;if((e||0==e)&&(this.showDay=this.day[e]),this.dayIndex=e,0===e){this.dayTimer=this.$dayjs().format("YYYY-MM-DD");var s=this.timer.findIndex((function(e){if(t.nowTime==e.start)return!0}));this.timeList=this.timer.slice(s+3)}else 1===e?(this.dayTimer=this.$dayjs().add(1,"day").format("YYYY-MM-DD"),this.timeList=[]):2===e&&(this.dayTimer=this.$dayjs().add(2,"day").format("YYYY-MM-DD"),this.timeList=[]);this.rightIndex=999},handleRight:function(e,t){"马上取件"===this.showChoiceTime&&(this.choiceMinunteStart=0),this.rightIndex=t,this.choiceMinunte=e,this.choiceMinunteEnd=e.end,this.choiceMinunteStart=e.start},initTakeNow:function(){this.dayIndex=0,this.rightIndex=999},initorderProperty:function(){var e=o(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.orderProperty,{carType:this.car},"GET","form");case 2:t=e.sent,this.orderProperty=t.data.bond,this.riderSide=t.data.distance,this.newAddPrice=t.data.capacitySubsidy,this.yunliTimerStart=t.data.noCapacityMonitoringPeriod.split("-")[0],this.yunliTimerEnd=t.data.noCapacityMonitoringPeriod.split("-")[1];case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),popSubmit:function(){this.$refs.popup.close(),this.choiceTime=this.dayTimer+" "+this.choiceMinunteStart,999!=this.rightIndex?this.showChoiceTime=this.showDay+" "+this.choiceMinunte.text:this.showChoiceTime="马上取件",i.setStorageSync("takeTimer",this.showChoiceTime)},goToAddress:function(e){i.navigateTo({url:"../address/address?address="+e})},setHelpBuyInfo:function(){e("log",this.appraisement," at pages\\storage\\storage.vue:1299"),this.appraisement<=0&&1==i.getStorageSync("shopInfo")?(this.appraisement=1,i.showToast({title:"商品预估价最低1元",icon:"none"})):this.appraisement>500&&(this.appraisement=500,i.showToast({title:"商品预估价最高500元",icon:"none"})),this.shopInfo.pics=JSON.stringify(this.pics),this.helpBuyTextArea.trim()&&(this.shopInfo.main=this.helpBuyTextArea),this.appraisement&&(this.shopInfo.price=this.appraisement),this.helpBuyTextArea.trim()&&this.appraisement&&(i.setStorageSync("shopInfo",this.shopInfo),this.isInitOrderPriceAjax()),""===this.helpBuyTextArea&&(this.orderComputed.payAmount=0)},goToShopInfo:function(){"{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)?2==this.scrollIndex?i.navigateTo({url:"../buyShopInfo/buyShopInfo"}):(this.qpInfo={},i.navigateTo({url:"../shopInfo/shopInfo"})):i.showToast({icon:"none",title:"请先填写地址"})},goToDiscount:function(){i.navigateTo({url:"../discount/discount?payAmount="+this.orderComputed.payAmount})},selectedGrant:function(e){var t=e.detail.value;this.giveGrant=this.grant[t]},handleBilldetail:function(){var t=o(r.default.mark((function t(){var s,d,n=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2==this.scrollIndex&&0==this.assignIndex&&(this.sendAddress=this.endAddress),e("log",this.sendAddress," at pages\\storage\\storage.vue:1367"),2==this.scrollIndex&&0==this.assignIndex?(s=this.endAddress.latitude.split(",")[1],d=this.endAddress.latitude.split(",")[0]):(s=this.sendAddress.latitude.split(",")[1],d=this.sendAddress.latitude.split(",")[0]),s=Number(s).toFixed(6),d=Number(d).toFixed(5),e("log",this.sendAddress," at pages\\storage\\storage.vue:1383"),i.request({url:"https://restapi.amap.com/v3/geocode/regeo?output=JSON&location="+d+","+s+"&key=6223011d1e55de8ee9d00617ee5270c2&radius=1000&extensions=all",success:function(){var t=o(r.default.mark((function t(s){var d,a,o,h,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.adcode=s.data.regeocode.addressComponent.adcode.substring(0,4),t.next=3,n.$fetch(n.$api.testAdcode,{adcode:n.adcode},"POST","FORM");case 3:if(d=t.sent,e("log",d," at pages\\storage\\storage.vue:1392"),0==d.code){t.next=9;break}return t.abrupt("return",i.showToast({icon:"none",title:"该地区暂未开通服务，敬请期待"}));case 9:if(e("log","***"," at pages\\storage\\storage.vue:1400"),e("log",n.assignIndex," at pages\\storage\\storage.vue:1401"),e("log",n.scrollIndex," at pages\\storage\\storage.vue:1402"),void 0!==n.shopInfo.main&&void 0!==n.shopInfo.price){t.next=15;break}return i.showToast({title:"请检查您要下单的信息",icon:"none"}),t.abrupt("return");case 15:if(2==n.scrollIndex){t.next=21;break}if(void 0!=n.sendAddress.mobile){t.next=18;break}return t.abrupt("return",i.showToast({icon:"none",title:"请完善取货地址信息"}));case 18:if(""!=n.sendAddress.mobile.trim()&&""!=n.sendAddress.name.trim()){t.next=21;break}return i.showToast({icon:"none",title:"请完善取货地址信息"}),t.abrupt("return");case 21:if(2!==n.scrollIndex||n.helpbuyCircle){t.next=24;break}return i.showToast({title:"请认真阅读帮买服务协议",icon:"none"}),t.abrupt("return");case 24:if(""!==n.sendAddress.latitude||"{}"==JSON.stringify(n.endAddress)||"{}"==JSON.stringify(n.shopInfo)){t.next=27;break}return i.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),t.abrupt("return");case 27:if("{}"!==JSON.stringify(n.sendAddress.editAddress)&&"{}"!==JSON.stringify(n.endAddress.editAddress)){t.next=30;break}return i.showToast({icon:"none",title:"未获取到详细地址,请先完善信息"}),t.abrupt("return");case 30:if(!n.discount.type){t.next=34;break}if(!(n.orderComputed.payAmount<50)){t.next=34;break}return i.showToast({icon:"none",title:"订单金额小于50，无法使用优惠"}),t.abrupt("return");case 34:if("{}"!=JSON.stringify(n.sendAddress)&&"{}"!=JSON.stringify(n.endAddress)&&"{}"!=JSON.stringify(n.shopInfo)){t.next=39;break}return i.showToast({icon:"none",title:"请检查您要下单的信息"}),t.abrupt("return");case 39:return i.showLoading({title:"订单生成中"}),a=n.sendAddress.latitude.split(",")[1],o=n.sendAddress.latitude.split(",")[0],a=Number(a).toFixed(6),o=Number(o).toFixed(5),h=null,t.next=47,n.$fetch(n.$api.getScanRange,{},"GET","Form");case 47:c=t.sent,0===c.code&&(h=c.data.taskScanRange),i.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:a+","+o,radius:1e3*h},success:function(t){e("log",t," at pages\\storage\\storage.vue:1499"),i.hideLoading(),n.horsemanCount=t.data.data.count,n.horsemanList=t.data.data.results,n.createOrderTimer>=n.yunliTimerStart&&n.createOrderTimer<=n.yunliTimerEnd&&(n.horseman=!0,n.Nhorseman=!0),0==n.horseman&&(n.Nhorseman=!1,n.$refs.popups.open())}});case 50:case"end":return t.stop()}}),t)})));function s(e){return t.apply(this,arguments)}return s}()});case 7:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),handlePopPay:function(){var e=o(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isCreateOrderPriceAjax();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCircle:function(e){this.circleShow=e},handleDetailshow:function(){this.priceDetailshow=!this.priceDetailshow},handleHorsemanCircle:function(){this.horsemanCircle=!this.horsemanCircle},handleHorsemanShow:function(){this.addPirce=0,this.isInitOrderPriceAjax(),this.horseman=!1},goToEdit:function(e,t,s){if(2!==this.scrollIndex||0!==t||0!==this.assignIndex)if(2===this.scrollIndex&&0===t&&1===this.assignIndex){i.navigateTo({url:"../choose-location/choose-location",animationType:"slide-in-bottom"})}else i.navigateTo({url:"../editAddress/editAddress?addressInfo="+JSON.stringify(e)+"&status="+t+"&id="+s})},initAddress:function(){var e=o(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),handleSignCode:function(e){e.detail.value?this.signCode=1:this.signCode=0},handleGoldCode:function(e){e.detail.value?this.goldCode=1:this.goldCode=0},handleUrgentCode:function(e){e.detail.value?this.urgentCode=1:this.urgentCode=0},handleStayWarmCode:function(e){e.detail.value?this.stayWarmCode=1:this.stayWarmCode=0},isInitOrderPriceAjax:function(){var t=o(r.default.mark((function t(){var s,d,n,a,o,h,c,u,l,p,g,f,m,y,x;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.sendAddress.latitude||"{}"==JSON.stringify(this.endAddress)||"{}"==JSON.stringify(this.shopInfo)){t.next=3;break}return i.showToast({title:"未获取到详细地址,请先完善信息",icon:"none"}),t.abrupt("return");case 3:if(void 0!==this.shopInfo.price){t.next=5;break}return t.abrupt("return");case 5:if("{}"==JSON.stringify(this.endAddress)||"{}"==JSON.stringify(this.shopInfo)){t.next=91;break}if(s=null,void 0!=this.sendAddress.addressDetail&&(s=this.sendAddress.addressDetail instanceof Array?this.sendAddress.addressDetail[0]+""+this.sendAddress.addressDetail[1]:this.sendAddress.editAddress.address+""+this.sendAddress.addressDetail),d=JSON.stringify(s)?JSON.stringify(s):"",n=JSON.stringify(this.endAddress.editAddress.address+""+this.endAddress.addressDetail),999!==this.rightIndex){t.next=52;break}if("{}"!==JSON.stringify(this.discount)){t.next=33;break}if(2!==this.scrollIndex){t.next=27;break}if(0!==this.assignIndex){t.next=19;break}return t.next=16,this.$fetch(this.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:50,subsidy:this.addPirce},"POST");case 16:a=t.sent,e("log",a," at pages\\storage\\storage.vue:1774"),0==a.code&&(this.orderComputed=a.data);case 19:if(1!==this.assignIndex){t.next=25;break}return t.next=22,this.$fetch(this.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:50,subsidy:this.addPirce},"POST");case 22:o=t.sent,e("log",o," at pages\\storage\\storage.vue:1803"),0==o.code&&(this.orderComputed=o.data);case 25:t.next=31;break;case 27:return t.next=29,this.$fetch(this.$api.orderCalculation,{buyAddressType:this.assignIndex,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:"",subsidy:this.addPirce},"POST");case 29:h=t.sent,0==h.code&&(this.orderComputed=h.data);case 31:t.next=50;break;case 33:if(2!==this.scrollIndex){t.next=46;break}if(0!==this.assignIndex){t.next=39;break}return t.next=37,this.$fetch(this.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:50,subsidy:this.addPirce},"POST");case 37:c=t.sent,0==c.code&&(this.orderComputed=c.data);case 39:if(1!==this.assignIndex){t.next=44;break}return t.next=42,this.$fetch(this.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:50,subsidy:this.addPirce},"POST");case 42:u=t.sent,0==u.code&&(this.orderComputed=u.data);case 44:t.next=50;break;case 46:return t.next=48,this.$fetch(this.$api.orderCalculation,{buyAddressType:this.assignIndex,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:"",subsidy:this.addPirce},"POST");case 48:l=t.sent,0==l.code&&(this.orderComputed=l.data);case 50:t.next=91;break;case 52:if("{}"!==JSON.stringify(this.discount)){t.next=74;break}if(e("log",this.choiceTime+"*******************"," at pages\\storage\\storage.vue:1939"),2!==this.scrollIndex){t.next=68;break}if(0!==this.assignIndex){t.next=61;break}return t.next=58,this.$fetch(this.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:this.shopInfo.price,subsidy:this.addPirce},"POST");case 58:p=t.sent,e("log",p," at pages\\storage\\storage.vue:1965"),0==p.code&&(this.orderComputed=p.data);case 61:if(1!==this.assignIndex){t.next=66;break}return t.next=64,this.$fetch(this.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:this.shopInfo.price,subsidy:this.addPirce},"POST");case 64:g=t.sent,0==g.code&&(this.orderComputed=g.data);case 66:t.next=72;break;case 68:return t.next=70,this.$fetch(this.$api.orderCalculation,{buyAddressType:this.assignIndex,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:"",subsidy:this.addPirce},"POST");case 70:f=t.sent,0==f.code&&(this.orderComputed=f.data);case 72:t.next=91;break;case 74:if(2!==this.scrollIndex){t.next=87;break}if(0!==this.assignIndex){t.next=80;break}return t.next=78,this.$fetch(this.$api.orderCalculation,{buyAddressType:1,endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:this.shopInfo.price,subsidy:this.addPirce},"POST");case 78:m=t.sent,0==m.code&&(this.orderComputed=m.data);case 80:if(1!==this.assignIndex){t.next=85;break}return t.next=83,this.$fetch(this.$api.orderCalculation,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:this.shopInfo.price,subsidy:this.addPirce},"POST");case 83:y=t.sent,0==y.code&&(this.orderComputed=y.data);case 85:t.next=91;break;case 87:return t.next=89,this.$fetch(this.$api.orderCalculation,{buyAddressType:this.assignIndex,startAddress:JSON.stringify({addressDetail:d,latitude:this.sendAddress.latitude,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:n,latitude:this.endAddress.latitude,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:"",subsidy:this.addPirce},"POST");case 89:x=t.sent,0==x.code&&(this.orderComputed=x.data);case 91:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),isComputedDistanceFunc:function(){var t=this;if("{}"!=JSON.stringify(this.sendAddress)&&"{}"!=JSON.stringify(this.endAddress)){this.sendAddress.addressDetail instanceof Array?i.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(s){e("log",s.data," at pages\\storage\\storage.vue:2149"),t.distance=s.data.data.paths[0].distance/1e3}}):i.request({url:"https://restapi.amap.com/v4/direction/bicycling?origin="+this.sendAddress.latitude+"&destination="+this.endAddress.latitude+"&key=6223011d1e55de8ee9d00617ee5270c2",success:function(s){e("log",s.data," at pages\\storage\\storage.vue:2163"),t.distance=s.data.data.paths[0].distance/1e3}})}},isCreateOrderPriceAjax:function(){var t=o(r.default.mark((function t(){var s,i,d,n,a,o,h,c,u,l,p,g,f,m,y,x,A,b,I,S,N,T;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("{}"==JSON.stringify(this.sendAddress)||"{}"==JSON.stringify(this.endAddress)||"{}"==JSON.stringify(this.shopInfo)){t.next=117;break}if(s=null,i=null,d=null,n=null,a=null,o=null,h=null,this.sendAddress.addressDetail instanceof Array?(s=this.sendAddress.addressDetail[0]+""+this.sendAddress.addressDetail[1],d=this.sendAddress.addressDetail[1],i=this.sendAddress.addressDetail[2],n=this.sendAddress.addressDetail[0],a=this.endAddress.editAddress.name,o=this.endAddress.addressDetail,h=this.endAddress.editAddress.address):(s=this.sendAddress.editAddress.address+""+this.sendAddress.addressDetail,d=this.sendAddress.addressDetail,i=this.sendAddress.editAddress.name,n=this.sendAddress.editAddress.address,a=this.endAddress.editAddress.name,o=this.endAddress.addressDetail,h=this.endAddress.editAddress.address),c=s,u=s.indexOf("市"),c=s.substring(u+1,u+s.length+1),e("log",c," at pages\\storage\\storage.vue:2217"),l=this.endAddress.editAddress.address+""+this.endAddress.addressDetail,p=l.indexOf("市"),l=l.substring(p+1,p+l.length+1),g=0,2===this.scrollIndex&&(g=50),999!==this.rightIndex){t.next=71;break}if("{}"!==JSON.stringify(this.discount)){t.next=46;break}if(2!==this.scrollIndex||0!==this.helpBuy){t.next=32;break}return t.next=23,this.$fetch(this.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 23:f=t.sent,e("log",f," at pages\\storage\\storage.vue:2283"),e("log","111"," at pages\\storage\\storage.vue:2284"),this.orderId=f.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer(),t.next=44;break;case 32:return m=0,2===this.scrollIndex&&(m=50),t.next=36,this.$fetch(this.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:c,latitude:this.sendAddress.latitude,title:i,name:n,detail:d,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,name:h,title:a,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:m,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 36:y=t.sent,e("log",y," at pages\\storage\\storage.vue:2338"),e("log","222"," at pages\\storage\\storage.vue:2339"),e("log",{buyAddressType:0,startAddress:JSON.stringify({addressDetail:c,latitude:this.sendAddress.latitude,title:i,name:n,detail:d,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,name:h,title:a,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:m,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode}," at pages\\storage\\storage.vue:2340"),this.orderId=y.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer();case 44:t.next=69;break;case 46:if(2!==this.scrollIndex||0!==this.helpBuy){t.next=58;break}return t.next=49,this.$fetch(this.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 49:x=t.sent,e("log",x," at pages\\storage\\storage.vue:2444"),e("log","333"," at pages\\storage\\storage.vue:2445"),this.orderId=x.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer(),t.next=69;break;case 58:return A=0,2===this.scrollIndex&&(A=50),t.next=62,this.$fetch(this.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:c,latitude:this.sendAddress.latitude,title:i,name:n,detail:d,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:0,carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:A,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 62:b=t.sent,e("log",b," at pages\\storage\\storage.vue:2501"),e("log","444"," at pages\\storage\\storage.vue:2502"),this.orderId=b.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer();case 69:t.next=117;break;case 71:if("{}"!==JSON.stringify(this.discount)){t.next=96;break}if(2!==this.scrollIndex||0!==this.helpBuy){t.next=85;break}return e("log","创建5"," at pages\\storage\\storage.vue:2516"),t.next=76,this.$fetch(this.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 76:I=t.sent,e("log",I," at pages\\storage\\storage.vue:2570"),e("log","55"," at pages\\storage\\storage.vue:2571"),this.orderId=I.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer(),t.next=94;break;case 85:return t.next=87,this.$fetch(this.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:c,latitude:this.sendAddress.latitude,title:i,name:n,detail:d,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 87:S=t.sent,e("log",S," at pages\\storage\\storage.vue:2623"),e("log","666"," at pages\\storage\\storage.vue:2624"),this.orderId=S.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer();case 94:t.next=117;break;case 96:if(2!==this.scrollIndex||0!==this.helpBuy){t.next=108;break}return t.next=99,this.$fetch(this.$api.orderCreate,{buyAddressType:1,startAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.riderSide,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 99:N=t.sent,e("log",N," at pages\\storage\\storage.vue:2690"),e("log","77"," at pages\\storage\\storage.vue:2691"),this.orderId=N.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer(),t.next=117;break;case 108:return t.next=110,this.$fetch(this.$api.orderCreate,{buyAddressType:0,startAddress:JSON.stringify({addressDetail:c,latitude:this.sendAddress.latitude,title:i,name:n,detail:d,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,extensionNumber:this.sendAddress.extensionNumber}),endAddress:JSON.stringify({addressDetail:l,latitude:this.endAddress.latitude,title:a,name:h,detail:o,userName:this.endAddress.name,mobile:this.endAddress.mobile,extensionNumber:this.endAddress.extensionNumber}),tip:this.giveGrant,goodsInventory:JSON.stringify({weight:this.shopInfo.weight,cost:this.shopInfo.price,goods:this.shopInfo.main,pics:this.shopInfo.pics}),distance:this.distance,type:this.scrollIndex,pickUpType:1,pickUpTime:this.choiceTime+":00:00",carType:this.car,incubatorFlag:this.stayWarmCode,premiumFlag:this.goldCode,urgentExpressPriceFlag:this.urgentCode,signForCodeFlag:this.signCode,userCouponId:this.discount.id,goodsPredictAmount:g,subsidy:this.addPirce,remark:this.remark,adcode:this.adcode},"POST");case 110:T=t.sent,e("log",T," at pages\\storage\\storage.vue:2745"),e("log","88s"," at pages\\storage\\storage.vue:2746"),this.orderId=T.data,this.$refs.popups.close(),this.$refs.popupPay.open(),this.countDownTimer();case 117:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),countDownTimer:function(){var e=this;this.countDown=setInterval((function(){0===e.seconds&&0!==e.minutes?(e.seconds=59,e.minutes-=1):0===e.minutes&&0===e.seconds?(e.$refs.popupPay.close(),e.seconds=0,clearInterval(e.countDown),e.countDown=null,e.minutes=30,e.seconds=0):e.seconds-=1}),1e3)},num:function(e){return e<10?"0"+e:""+e},continueOrder:function(){var e=o(r.default.mark((function e(){var t,s,d,n,a=this;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.horsemanCircle){e.next=15;break}return this.addPirce=this.newAddPrice,this.isInitOrderPriceAjax(),this.horseman=!1,t=this.sendAddress.latitude.split(",")[1],s=this.sendAddress.latitude.split(",")[0],d=null,e.next=9,this.$fetch(this.$api.getScanRange,{},"GET","Form");case 9:n=e.sent,0===n.code&&(d=Number(n.data.taskScanRange)+Number(n.data.addSubsidyScanRange)),i.request({url:"https://tsapi.amap.com/v1/track/terminal/aroundsearch",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{key:"4145121d3d1b5dcf41702960f3bd5adc",sid:"126730",center:t+","+s,radius:1e3*d},success:function(e){a.horsemanCount=e.data.data.count,a.horsemanList=e.data.data.results,0==a.horseman&&a.$refs.popups.open()}}),this.$refs.popups.open(),e.next=16;break;case 15:i.showToast({icon:"none",title:"请仔细阅读并同意加收运力费协议"});case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),payOrder:function(){var t=o(r.default.mark((function t(){var s,d,a,h,c,u,l,p,g,f,m,y,x,A,b=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.showLoading({title:"正在下单中...."}),this.payFlag=!1,s=null,d=null,a=null,h=null,c=null,u=null,l=null,this.sendAddress.addressDetail instanceof Array?(s=this.sendAddress.addressDetail[0]+""+this.sendAddress.addressDetail[1],a=this.sendAddress.addressDetail[1],d=this.sendAddress.addressDetail[2],h=this.sendAddress.addressDetail[0],c=this.endAddress.editAddress.name,u=this.endAddress.addressDetail,l=this.endAddress.editAddress.address):(s=this.sendAddress.editAddress.address+""+this.sendAddress.addressDetail,a=this.sendAddress.addressDetail,d=this.sendAddress.editAddress.name,h=this.sendAddress.editAddress.address,c=this.endAddress.editAddress.name,u=this.endAddress.addressDetail,l=this.endAddress.editAddress.address),s,p=s.indexOf("市"),s.substring(p+1,p+s.length),g=this.endAddress.editAddress.address+""+this.endAddress.addressDetail,f=g.indexOf("市"),g=g.substring(f+1,f+g.length),0!==this.circleShow){t.next=22;break}return t.next=19,this.$fetch(this.$api.orderPay,{orderId:this.orderId,payType:this.circleShow},"POST","form");case 19:m=t.sent,e("log",m," at pages\\storage\\storage.vue:2887"),0==m.code?(i.hideLoading(),i.showToast({icon:"success",title:m.msg}),clearInterval(this.countDown),this.countDown=null,this.minutes=30,this.seconds=0,this.$refs.popupPay.close(),i.setStorageSync("userSelect",1),0==this.scrollIndex?(e("log",this.sendAddress," at pages\\storage\\storage.vue:2911"),i.setStorageSync("helpMeBuy",JSON.stringify((y={addressDetail:this.sendAddress.addressDetail,latitude:this.sendAddress.latitude,title:d,name:h,detail:a,userName:this.sendAddress.name,mobile:this.sendAddress.mobile,editAddress:JSON.stringify(this.sendAddress.editAddress)},n(y,"name",h),n(y,"mobile",this.sendAddress.mobile),n(y,"extensionNumber",this.sendAddress.extensionNumber),y))),i.setStorageSync("helpMeShopInfo",JSON.stringify(this.shopInfo)),e("log",JSON.stringify(this.shopInfo)+"*********"," at pages\\storage\\storage.vue:2927")):1==this.scrollIndex&&(e("log",this.endAddress," at pages\\storage\\storage.vue:2930"),i.setStorageSync("helpMeGet",JSON.stringify({addressDetail:this.endAddress.addressDetail,latitude:this.endAddress.latitude,name:l,title:c,detail:u,userName:this.endAddress.name,mobile:this.endAddress.mobile,editAddress:JSON.stringify(this.endAddress.editAddress),extensionNumber:this.endAddress.extensionNumber})),i.setStorageSync("helpMeShopInfo",JSON.stringify(this.shopInfo)),e("log",JSON.stringify(this.shopInfo)+"----------"," at pages\\storage\\storage.vue:2944")),setTimeout((function(){i.setStorageSync("orderRefresh",!0),i.switchTab({url:"../order/order"})}),1500)):i.showToast({icon:"none",title:m.msg});case 22:if(1!==this.circleShow){t.next=27;break}return t.next=25,this.$fetch(this.$api.orderPay,{orderId:this.orderId,payType:this.circleShow},"POST","form");case 25:x=t.sent,i.requestPayment({provider:"alipay",orderInfo:x.msg,success:function(e){i.hideLoading(),i.showToast({icon:"success",title:"支付成功"}),clearInterval(b.countDown),b.countDown=null,b.minutes=30,b.seconds=0,b.$refs.popupPay.close(),i.setStorageSync("userSelect",1),setTimeout((function(){i.setStorageSync("orderRefresh",!0),i.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=o(r.default.mark((function e(t){var s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.showToast({icon:"none",title:"支付失败"}),b.$refs.popupPay.close(),e.next=4,b.$fetch(b.$api.orderDetail,{id:b.orderId},"POST","Form");case 4:s=e.sent,0==s.code&&setTimeout((function(){i.setStorageSync("orderRefresh",!0),i.switchTab({url:"../order/order"}),i.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(s.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()});case 27:if(2!==this.circleShow){t.next=32;break}return t.next=30,this.$fetch(this.$api.orderPay,{orderId:this.orderId,payType:this.circleShow},"POST","form");case 30:A=t.sent,i.requestPayment({provider:"wxpay",orderInfo:A.data,success:function(e){i.hideLoading(),i.showToast({icon:"success",title:"支付成功"}),clearInterval(b.countDown),b.countDown=null,b.minutes=30,b.seconds=0,b.$refs.popupPay.close(),i.setStorageSync("userSelect",1),setTimeout((function(){i.setStorageSync("orderRefresh",!0),i.switchTab({url:"../order/order"})}),1500)},fail:function(){var e=o(r.default.mark((function e(t){var s;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.showToast({icon:"none",title:"支付失败"}),b.$refs.popupPay.close(),e.next=4,b.$fetch(b.$api.orderDetail,{id:b.orderId},"POST","Form");case 4:s=e.sent,0==s.code&&setTimeout((function(){i.setStorageSync("orderRefresh",!0),i.switchTab({url:"../order/order"}),i.navigateTo({url:"../orderDetail/orderDetail?orderDetail="+JSON.stringify(s.data)+"&currentIndex=0"})}),1500);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()});case 32:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),initRichText:function(){var e=o(r.default.mark((function e(){var t;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$fetch(this.$api.articleType,{type:5},"Post","Form");case 2:t=e.sent,0==t.code&&(this.RichText=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goToRichText:function(e){i.navigateTo({url:"../rich-text/rich-text?id="+e})},choiceHelpbuyCircle:function(){this.helpbuyCircle=!this.helpbuyCircle}}};t.default=c}).call(this,s("0de9")["default"],s("6e42")["default"])},ad4f:function(e,t,s){"use strict";(function(e){s("6857"),s("921b");i(s("66fd"));var t=i(s("3ff8"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},cee8:function(e,t,s){},e508:function(e,t,s){"use strict";s.r(t);var i=s("459b"),r=s.n(i);for(var d in i)"default"!==d&&function(e){s.d(t,e,(function(){return i[e]}))}(d);t["default"]=r.a}},[["ad4f","common/runtime","common/vendor"]]]);